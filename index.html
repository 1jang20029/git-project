<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연성대학교 캠퍼스 가이드</title>
    <!-- 네이버 지도 API 스크립트 추가 -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=ikduyzmop9"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 768px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            padding-bottom: 60px; /* 하단 탭 메뉴 영역만큼 패딩 추가 */
            position: relative;
        }
        
        header {
            background-color: #c62917;
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-icons {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .login-button {
            padding: 6px 12px;
            background-color: white;
            color: #c62917;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
        }
        
        .profile-dropdown-container {
            position: relative;
        }
        
        .header-profile-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            cursor: pointer;
        }
        
        .profile-dropdown {
            position: absolute;
            top: 40px;
            right: 0;
            width: 220px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            overflow: hidden;
            display: none;
        }
        
        .profile-dropdown.active {
            display: block;
        }
        
        .dropdown-profile-info {
            padding: 16px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #eee;
        }
        
        .dropdown-profile-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
            color: #333;
        }
        
        .dropdown-profile-detail {
            font-size: 13px;
            color: #666;
            margin-bottom: 2px;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: #eee;
        }
        
        .dropdown-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            color: #666;
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background-color: #f5f5f5;
        }
        
        .dropdown-icon {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .search-bar {
            padding: 12px 16px;
            background-color: #f9f9f9;
            display: flex;
            border-bottom: 1px solid #eee;
        }
        
        .search-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* 검색 결과 스타일 */
        .search-results {
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 0 16px;
            overflow: hidden;
            position: relative;
            z-index: 100;
        }
        
        .no-results {
            padding: 16px;
            text-align: center;
            color: #888;
            font-size: 14px;
        }
        
        .notification-banner {
            background-color: #ffebee;
            padding: 12px 16px;
            border-bottom: 1px solid #ffcdd2;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .urgent-icon {
            color: #c62917;
            font-weight: bold;
        }
        
        .notification-text {
            font-size: 14px;
            flex: 1;
        }
        
        .shortcut-menu {
            display: flex;
            padding: 16px;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
        }
        
        .shortcut-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
            cursor: pointer;
        }
        
        .shortcut-icon {
            width: 40px;
            height: 40px;
            background-color: #f0f0f0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            font-size: 20px;
        }
        
        .shortcut-text {
            font-size: 12px;
            text-align: center;
            color: #555;
        }
        
        .content-section {
            padding: 16px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .see-all {
            font-size: 13px;
            color: #888;
            text-decoration: none;
        }
        
        .notice-list {
            list-style: none;
        }
        
        .notice-item {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .notice-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .notice-category {
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            color: #555;
        }
        
        .notice-date {
            font-size: 12px;
            color: #888;
        }
        
        .notice-title {
            font-size: 15px;
            margin-bottom: 6px;
        }
        
        .notice-summary {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }
        
        .facility-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .facility-item {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .facility-image {
            height: 100px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .facility-info {
            padding: 10px;
        }
        
        .facility-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .facility-location {
            font-size: 12px;
            color: #666;
        }
        
        .lecture-list {
            list-style: none;
        }
        
        .lecture-item {
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
        }
        
        .lecture-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .lecture-title {
            font-size: 15px;
            font-weight: bold;
        }
        
        .lecture-rating {
            color: #ff9800;
            font-weight: bold;
        }
        
        .lecture-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .lecture-professor {
            color: #333;
        }
        
        .lecture-reviews {
            font-size: 12px;
            color: #666;
        }
        
        /* 하단 탭 메뉴 수정 - 항상 표시되도록 */
        .tab-menu {
            display: flex;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 768px;
            margin: 0 auto;
            background-color: white;
            border-top: 1px solid #ddd;
            z-index: 1000; /* 다른 요소 위에 표시되도록 z-index 추가 */
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05); /* 약간의 그림자 추가 */
        }
        
        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 0;
            font-size: 12px;
            color: #888;
            text-decoration: none;
            cursor: pointer;
        }
        
        .tab-item.active {
            color: #c62917;
        }
        
        .tab-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }
        
        /* 지도 컨테이너 스타일 수정 */
        .campus-map {
            height: 350px; /* 높이 증가 */
            width: 100% !important; /* 너비 강제 지정 */
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            display: block; /* 항상 표시되도록 */
        }
        
        /* 네이버 지도 컨테이너 스타일 */
        #naverMap {
            width: 100% !important;
            height: 100% !important;
        }
        
        /* 지도 마커 정보창 스타일 */
        .map-info-window {
            padding: 8px 12px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            font-size: 13px;
            max-width: 200px;
        }
        
        .map-info-title {
            font-weight: bold;
            margin-bottom: 4px;
            color: #333;
        }
        
        .map-info-desc {
            color: #666;
            font-size: 12px;
        }
        
        /* 지도 버튼 스타일 */
        .map-control-buttons {
            position: absolute;
            bottom: 10px;
            right: 10px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .map-button {
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
        }
        
        .content-pad {
            padding-bottom: 60px; /* 하단 탭 메뉴 높이만큼 여백 */
        }

        /* 탭 콘텐츠 */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 건물 및 교실 목록 */
        .building-list {
            list-style: none;
        }
        
        /* 건물 목록 항목 재디자인 */
        .building-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .building-image {
            width: 80px;
            height: 60px;
            border-radius: 4px;
            overflow: hidden;
            margin-right: 12px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .building-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .building-info-container {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .building-info {
            flex: 1;
        }
        
        .building-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .building-description {
            font-size: 13px;
            color: #666;
        }
        
        .building-nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            padding: 8px;
            border-radius: 4px;
            margin-left: 8px;
            cursor: pointer;
        }
        
        .building-nav-button:hover {
            background-color: #e0e0e0;
        }
        
        .building-nav-button span:first-child {
            font-size: 12px;
            color: #555;
            margin-bottom: 4px;
        }
        
        .building-nav-button span:last-child {
            font-size: 18px;
        }
        
        /* 강의 평가 스타일 */
        .rating-stars {
            color: #ffb400;
            letter-spacing: 2px;
        }
        
        /* 카테고리 필터 */
        .category-filter {
            display: flex;
            overflow-x: auto;
            padding: 8px 0;
            margin-bottom: 12px;
            -webkit-overflow-scrolling: touch;
        }
        
        .category-tag {
            flex-shrink: 0;
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 16px;
            margin-right: 8px;
            font-size: 13px;
            color: #555;
            background-color: white;
            cursor: pointer;
        }
        
        .category-tag.active {
            background-color: #c62917;
            color: white;
            border-color: #c62917;
        }
        
        /* 알림 리스트 */
        .alert-list {
            list-style: none;
        }
        
        .alert-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            cursor: pointer;
        }
        
        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            font-size: 20px;
        }
        
        .alert-info {
            flex: 1;
        }
        
        .alert-title {
            font-size: 15px;
            margin-bottom: 4px;
        }
        
        .alert-message {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }
        
        .alert-time {
            font-size: 12px;
            color: #888;
        }
        
        .alert-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 10px;
            background-color: #c62917;
            color: white;
            font-size: 12px;
            margin-left: 4px;
        }

        /* 내 정보 탭 */
        .profile-section {
            padding: 24px 16px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        
        .profile-image {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background-color: #f0f0f0;
            margin-right: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            overflow: hidden;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .profile-detail {
            font-size: 14px;
            color: #666;
        }
        
        .menu-list {
            list-style: none;
        }
        
        .menu-item {
            padding: 16px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .menu-title {
            font-size: 15px;
        }
        
        .menu-arrow {
            color: #ccc;
        }

        /* 공지사항 상세 */
        .notice-detail {
            padding: 20px 16px;
        }
        
        .notice-detail-header {
            margin-bottom: 16px;
        }
        
        .notice-detail-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .notice-detail-info {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: #888;
        }
        
        .notice-detail-content {
            font-size: 15px;
            line-height: 1.6;
        }
        
        /* 로딩 인디케이터 */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #888;
        }

        /* 헤더 프로필 이미지 스타일 */
        .header-profile-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            margin-left: 8px;
        }
        
        /* 프로필 이미지 스타일 */
        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* 회원 탈퇴 버튼 스타일 */
        .delete-account {
            color: #e53935;
        }

        /* 페이지네이션 스타일 */
        .pagination-controls {
            display: flex;
            justify-content: center;
            padding: 16px 0;
            gap: 10px;
        }
        
        .pagination-button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
            font-size: 14px;
            cursor: pointer;
        }
        
        .pagination-button:hover {
            background-color: #f0f0f0;
        }
        
        .pagination-button.active {
            background-color: #c62917;
            border-color: #c62917;
            color: white;
        }
        
        .pagination-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* 건물 내부 정보 페이지 스타일 */
        .building-detail-container {
            padding: 16px;
        }

        .building-header {
            margin-bottom: 20px;
        }

        .building-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .building-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 16px;
        }

        .building-image-large {
            width: 100%;
            height: 200px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .building-image-large img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 층별 선택 메뉴 */
        .floor-selector {
            display: flex;
            overflow-x: auto;
            margin-bottom: 16px;
            padding-bottom: 8px;
            -webkit-overflow-scrolling: touch;
        }

        .floor-button {
            flex-shrink: 0;
            padding: 8px 16px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            margin-right: 8px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            min-width: 60px;
            text-align: center;
        }

        .floor-button:hover {
            background-color: #f0f0f0;
        }

        .floor-button.active {
            background-color: #c62917;
            color: white;
            border-color: #c62917;
        }

        /* 실내 지도 컨테이너 */
        .floor-map-container {
            position: relative;
            width: 100%;
            height: 350px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            background-color: #f9f9f9;
        }

        .floor-map {
            width: 100%;
            height: 100%;
            background-color: #fff;
        }

        .classroom-marker {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: #c62917;
            border-radius: 50%;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            cursor: pointer;
            z-index: 10;
            transform: translate(-50%, -50%);
        }

        .classroom-marker.path {
            background-color: #2196F3;
        }

        .classroom-marker.start {
            background-color: #4CAF50;
        }

        .classroom-marker.end {
            background-color: #FF5722;
        }

        /* 길 표시 선 */
        .path-line {
            position: absolute;
            background-color: #2196F3;
            z-index: 5;
            opacity: 0.7;
        }

        /* 강의실 목록 */
        .classroom-list {
            list-style: none;
            margin-bottom: 20px;
        }

        .classroom-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .classroom-info {
            flex: 1;
        }

        .classroom-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .classroom-desc {
            font-size: 13px;
            color: #666;
        }

        .classroom-button {
            padding: 6px 12px;
            background-color: #f0f0f0;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-left: 8px;
        }

        .classroom-button:hover {
            background-color: #e0e0e0;
        }

        .navigation-controls {
            padding: 16px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .navigation-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .navigation-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 14px;
            color: #666;
        }

        .form-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
        }

        .navigation-button {
            padding: 10px 16px;
            background-color: #c62917;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 8px;
        }

        .navigation-button:hover {
            background-color: #b32213;
        }

        .navigation-instructions {
            margin-top: 20px;
            padding: 16px;
            background-color: #f0f0f0;
            border-radius: 8px;
            display: none;
        }

        .instruction-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .instruction-list {
            list-style: decimal;
            padding-left: 20px;
        }

        .instruction-item {
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.5;
        }

        .back-button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #f0f0f0;
            border-radius: 4px;
            font-size: 14px;
            color: #333;
            text-decoration: none;
            margin-bottom: 16px;
        }

        .back-button:hover {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo" onclick="goToHome()">연성대학교</div>
            <div class="header-icons">
                <!-- 로그인 버튼만 남기고 검색 및 알림 아이콘 제거 -->
                <a href="#" class="login-button" onclick="goToPage('login')">로그인</a>
                <div class="profile-dropdown-container" style="display: none;">
                    <div class="header-profile-image" onclick="toggleProfileDropdown()">
                        <!-- 여기에 프로필 이미지가 들어갑니다 -->
                        <img id="headerProfileImg" src="" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="프로필">
                    </div>
                    <div class="profile-dropdown">
                        <div class="dropdown-profile-info">
                            <div class="dropdown-profile-name">사용자</div>
                            <div class="dropdown-profile-detail">학과 | 학년</div>
                            <div class="dropdown-profile-detail">학번: 0000000000</div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="goToPage('profile-edit')">
                            <span class="dropdown-icon">✏️</span>
                            <span>프로필 수정</span>
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <span class="dropdown-icon">🚪</span>
                            <span>로그아웃</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- 홈 탭 -->
        <div id="home-tab" class="tab-content active">
            <!-- 긴급 알림 배너 -->
            <div class="notification-banner" onclick="viewNotification('emergency')">
                <span class="urgent-icon">📢</span>
                <span class="notification-text">긴급 공지: 내일(4/9) 대학 전체 휴강 안내 - 시설 점검으로 인한 단수</span>
            </div>
            
            <!-- 검색 바 -->
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="강의실, 공지사항, 교수님 검색" onkeypress="handleSearchKeyPress(event)">
            </div>
            
            <!-- 바로가기 메뉴 -->
            <div class="shortcut-menu">
                <div class="shortcut-item" onclick="switchTab('facility')">
                    <div class="shortcut-icon">🏫</div>
                    <div class="shortcut-text">강의실</div>
                </div>
                <div class="shortcut-item" onclick="switchTab('community')">
                    <div class="shortcut-icon">📝</div>
                    <div class="shortcut-text">강의평가</div>
                </div>
                <div class="shortcut-item" onclick="goToPage('shuttle')">
                    <div class="shortcut-icon">🚌</div>
                    <div class="shortcut-text">셔틀버스</div>
                </div>
                <div class="shortcut-item" onclick="goToPage('cafeteria')">
                    <div class="shortcut-icon">🍽️</div>
                    <div class="shortcut-text">학식</div>
                </div>
                <div class="shortcut-item" onclick="goToPage('academic-calendar')">
                    <div class="shortcut-icon">📅</div>
                    <div class="shortcut-text">학사일정</div>
                </div>
            </div>
            
            <!-- 공지사항 섹션 -->
            <div class="content-section">
                <div class="section-title">
                    <span>주요 공지사항</span>
                    <a href="#" class="see-all" onclick="goToPage('notices')">전체보기</a>
                </div>
                
                <div class="category-filter">
                    <div class="category-tag active" onclick="filterNotices('all')">전체</div>
                    <div class="category-tag" onclick="filterNotices('academic')">학사</div>
                    <div class="category-tag" onclick="filterNotices('scholarship')">장학</div>
                    <div class="category-tag" onclick="filterNotices('job')">취업</div>
                    <div class="category-tag" onclick="filterNotices('event')">행사</div>
                    <div class="category-tag" onclick="filterNotices('department')">학과</div>
                </div>
                
                <ul class="notice-list">
                    <!-- 알림창 없이 공지사항 상세 페이지로 바로 이동하도록 수정 -->
                    <li class="notice-item" onclick="goToNoticeDetail('notice1')">
                        <div class="notice-header">
                            <span class="notice-category">학사</span>
                            <span class="notice-date">2025.04.08</span>
                        </div>
                        <div class="notice-title">2025학년도 1학기 중간고사 일정 안내</div>
                        <div class="notice-summary">
                            4월 22일(월)부터 4월 26일(금)까지 중간고사가 진행됩니다. 자세한 시간표는 학과 사무실에서 확인하세요.
                        </div>
                    </li>
                    <li class="notice-item" onclick="goToNoticeDetail('notice2')">
                        <div class="notice-header">
                            <span class="notice-category">장학</span>
                            <span class="notice-date">2025.04.07</span>
                        </div>
                        <div class="notice-title">국가장학금 2차 신청 마감 안내</div>
                        <div class="notice-summary">
                            국가장학금 2차 신청이 이번 주 금요일(4/11)에 마감됩니다. 아직 신청하지 않은 학생들은 서둘러 신청해주세요.
                        </div>
                    </li>
                    <li class="notice-item" onclick="goToNoticeDetail('notice3')">
                        <div class="notice-header">
                            <span class="notice-category">취업</span>
                            <span class="notice-date">2025.04.06</span>
                        </div>
                        <div class="notice-title">삼성전자 대규모 채용설명회 개최 안내</div>
                        <div class="notice-summary">
                            4월 15일(화) 오후 2시 대강당에서 삼성전자 채용설명회가 진행됩니다. 참석을 원하는 학생은 사전 신청 바랍니다.
                        </div>
                    </li>
                </ul>
            </div>
            
            <!-- 강의평가 섹션 -->
            <div class="content-section">
                <div class="section-title">
                    <span>인기 강의평가</span>
                    <a href="#" class="see-all" onclick="switchTab('community')">전체보기</a>
                </div>
                
                <ul class="lecture-list">
                    <li class="lecture-item" onclick="viewLectureDetail('web-programming')">
                        <div class="lecture-header">
                            <div class="lecture-title">웹 프로그래밍 실습</div>
                            <div class="lecture-rating">4.8</div>
                        </div>
                        <div class="lecture-info">
                            <span class="lecture-professor">김민수 교수님</span>
                            <span>컴퓨터정보학과</span>
                        </div>
                        <div class="rating-stars">★★★★★</div>
                        <div class="lecture-reviews">
                            "과제는 많지만 실력이 확실히 늘어요! 취업에 큰 도움이 됩니다."
                        </div>
                    </li>
                    <li class="lecture-item" onclick="viewLectureDetail('marketing')">
                        <div class="lecture-header">
                            <div class="lecture-title">마케팅 원론</div>
                            <div class="lecture-rating">4.5</div>
                        </div>
                        <div class="lecture-info">
                            <span class="lecture-professor">이지영 교수님</span>
                           <span>경영학과</span>
                       </div>
                       <div class="rating-stars">★★★★☆</div>
                       <div class="lecture-reviews">
                           "실제 사례를 많이 다루어서 이해하기 쉽고 재미있어요."
                       </div>
                   </li>
               </ul>
           </div>
           
           <div class="content-pad"></div>
       </div>
       
       <!-- 시설 탭 -->
       <div id="facility-tab" class="tab-content">
           <div class="search-bar">
               <input type="text" id="facility-search-input" class="search-input" placeholder="건물, 강의실, 편의시설 검색" oninput="searchFacilities(this.value)">
           </div>
           
           <!-- 검색 결과를 표시할 컨테이너 추가 -->
           <div id="search-results" class="search-results" style="display: none;">
               <!-- 검색 결과가 여기에 동적으로 추가됩니다 -->
           </div>
           
           <!-- 검색 결과가 없을 때 표시될 내용 -->
           <div id="no-results" class="no-results" style="display: none;">
               검색 결과가 없습니다.
           </div>
           
           <!-- 원래 내용은 검색 결과가 없을 때만 표시 -->
           <div id="original-content">
               <!-- 네이버 지도로 대체된 캠퍼스 맵 -->
               <div class="campus-map">
                   <div id="naverMap"></div>
                   <div class="map-control-buttons">
                       <div class="map-button" onclick="zoomIn()">🔍+</div>
                       <div class="map-button" onclick="zoomOut()">🔍-</div>
                       <div class="map-button" onclick="resetMapView()">🏠</div>
                   </div>
               </div>
               
               <div class="content-section">
                   <div class="section-title">
                       <span>주요 건물</span>
                   </div>
                   
                   <ul class="building-list">
                       <!-- 건물 항목들이 JavaScript로 동적 생성됩니다 -->
                   </ul>
                   
                   <!-- 페이지네이션 컨트롤 추가 -->
                   <div id="pagination-controls" class="pagination-controls">
                       <!-- 페이지 버튼들이 JavaScript로 동적 생성됩니다 -->
                   </div>
               </div>
               
               <div class="content-section">
                   <div class="section-title">
                       <span>편의시설</span>
                   </div>
                   
                   <div class="facility-list">
                       <div class="facility-item" onclick="showFacilityDetail('cafeteria')">
                           <div class="facility-image">
                               <img src="/api/placeholder/150/100" alt="학생식당">
                           </div>
                           <div class="facility-info">
                               <div class="facility-name">학생식당</div>
                               <div class="facility-location">학생복지센터 2층</div>
                           </div>
                       </div>
                       <div class="facility-item" onclick="showFacilityDetail('cafe')">
                           <div class="facility-image">
                               <img src="/api/placeholder/150/100" alt="카페">
                           </div>
                           <div class="facility-info">
                               <div class="facility-name">카페 연성</div>
                               <div class="facility-location">문화1관 1층</div>
                           </div>
                       </div>
                       <div class="facility-item" onclick="showFacilityDetail('convenience')">
                           <div class="facility-image">
                               <img src="/api/placeholder/150/100" alt="편의점">
                           </div>
                           <div class="facility-info">
                               <div class="facility-name">CU 편의점</div>
                               <div class="facility-location">학생복지센터 1층</div>
                           </div>
                       </div>
                       <div class="facility-item" onclick="showFacilityDetail('atm')">
                           <div class="facility-image">
                               <img src="/api/placeholder/150/100" alt="ATM">
                           </div>
                           <div class="facility-info">
                               <div class="facility-name">ATM</div>
                               <div class="facility-location">학생복지센터 1층</div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
           
           <div class="content-pad"></div>
       </div>
       
       <!-- 건물 상세 페이지 (실내 지도) -->
       <div id="building-detail-tab" class="tab-content">
           <a href="#" class="back-button" onclick="switchTab('facility')">← 뒤로가기</a>
           
           <div class="building-detail-container">
               <div class="building-header">
                   <div class="building-title" id="building-detail-title">건물명</div>
                   <div class="building-subtitle" id="building-detail-subtitle">건물 설명</div>
               </div>
               
               <div class="building-image-large">
                   <img id="building-detail-image" src="/api/placeholder/400/200" alt="건물 이미지">
               </div>
               
               <div class="section-title">
                   <span>실내 지도</span>
               </div>
               
               <div class="floor-selector" id="floor-selector">
                   <!-- 층 선택 버튼들이 JavaScript로 동적 생성됩니다 -->
               </div>
               
               <div class="floor-map-container">
                   <div class="floor-map" id="floor-map">
                       <!-- 실내 지도와 강의실 마커가 JavaScript로 동적 생성됩니다 -->
                   </div>
               </div>
               
               <div class="navigation-controls">
                   <div class="navigation-title">강의실 길찾기</div>
                   <div class="navigation-form">
                       <div class="form-group">
                           <label class="form-label" for="start-point">출발지</label>
                           <select class="form-select" id="start-point">
                               <option value="entrance">건물 입구</option>
                               <!-- 다른 출발지 옵션은 JavaScript로 동적 생성됩니다 -->
                           </select>
                       </div>
                       <div class="form-group">
                           <label class="form-label" for="end-point">도착지</label>
                           <select class="form-select" id="end-point">
                               <option value="">선택하세요</option>
                               <!-- 도착지 옵션은 JavaScript로 동적 생성됩니다 -->
                           </select>
                       </div>
                       <button class="navigation-button" onclick="findPath()">길찾기</button>
                   </div>
               </div>
               
               <div class="navigation-instructions" id="navigation-instructions">
                   <div class="instruction-title">길찾기 안내</div>
                   <ul class="instruction-list" id="instruction-list">
                       <!-- 길찾기 안내 항목들이 JavaScript로 동적 생성됩니다 -->
                   </ul>
               </div>
               
               <div class="section-title">
                   <span>강의실 목록</span>
               </div>
               
               <ul class="classroom-list" id="classroom-list">
                   <!-- 강의실 목록 항목들이 JavaScript로 동적 생성됩니다 -->
               </ul>
           </div>
           
           <div class="content-pad"></div>
       </div>
       
       <!-- 하단 탭 메뉴 생략 (기존 코드와 동일) -->
       <div class="tab-menu">
           <div class="tab-item active" onclick="switchTab('home')">
               <span class="tab-icon">🏠</span>
               <span>홈</span>
           </div>
           <div class="tab-item" onclick="switchTab('facility')">
               <span class="tab-icon">🏫</span>
               <span>시설</span>
           </div>
           <div class="tab-item" onclick="switchTab('community')">
               <span class="tab-icon">💬</span>
               <span>커뮤니티</span>
           </div>
           <div class="tab-item" onclick="switchTab('profile')">
               <span class="tab-icon">👤</span>
               <span>내 정보</span>
           </div>
           <div class="tab-item" onclick="switchTab('alert')">
               <span class="tab-icon">🔔</span>
               <span>알림</span>
           </div>
       </div>
   </div>
   
   <script>
       // 건물 데이터 (배열로 정의) - 이미지에서 확인된 건물 이름으로 수정
       const buildingData = [
           {
               id: '공학1관',
               name: '공학1관',
               description: '공학계열 강의실, 실험실',
               image: '/api/placeholder/80/60',
               type: 'building',
               position: { lat: 37.39632767479923, lng: 126.90699348692698 },
               floors: [1, 2, 3, 4, 5],  // 건물 층수
               entrances: [
                   { id: 'main', name: '정문', floor: 1, position: { x: 100, y: 350 } },
                   { id: 'side', name: '측면 입구', floor: 1, position: { x: 250, y: 350 } }
               ]
           },
           {
               id: '자연과학관',
               name: '자연과학관',
               description: '반려동물보건학과, 반려동물산업과',
               image: '/api/placeholder/80/60',
               type: 'building',
               position: { lat: 37.39669466288283, lng: 126.90676716508685 },
               floors: [1, 2, 3, 4],
               entrances: [
                   { id: 'main', name: '정문', floor: 1, position: { x: 100, y: 350 } }
               ]
           },
           {
               id: '식품과학관',
               name: '식품과학관',
               description: '식품영양학과, 조리실습실',
               image: '/api/placeholder/80/60',
               type: 'building',
               position: { lat: 37.39714809720343, lng: 126.90762208499473 },
               floors: [1, 2, 3, 4],
               entrances: [
                   { id: 'main', name: '정문', floor: 1, position: { x: 100, y: 350 } }
               ]
           },
           {
               id: '도의관',
               name: '도의관',
               description: '교양 수업, 강당',
               image: '/api/placeholder/80/60',
               type: 'building',
               position: { lat: 37.39679932128769, lng: 126.90809683728425 },
               floors: [1, 2, 3],
               entrances: [
                   { id: 'main', name: '정문', floor: 1, position: { x: 100, y: 350 } }
               ]
           },
           {
               id: '공학2관',
               name: '공학2관',
               description: '공학계열 실습실, 연구실',
               image: '/api/placeholder/80/60',
               type: 'building',
               position: { lat: 37.396789747114205, lng: 126.90737406929797 },
               floors: [1, 2, 3, 4, 5],
               entrances: [
                   { id: 'main', name: '정문', floor: 1, position: { x: 100, y: 350 } },
                   { id: 'side', name: '측면 입구', floor: 1, position: { x: 250, y: 350 } }
               ]
           },
           // 다른 건물들... (생략)
       ];

       // 강의실 데이터 - 건물별 강의실 정보
       const classroomData = {
           '공학1관': {
               '1': [  // 1층
                   { id: 'E1-101', name: '101호', type: '강의실', capacity: 40, position: { x: 100, y: 100 } },
                   { id: 'E1-102', name: '102호', type: '강의실', capacity: 40, position: { x: 200, y: 100 } },
                   { id: 'E1-103', name: '103호', type: '실험실', capacity: 30, position: { x: 300, y: 100 } },
                   { id: 'E1-104', name: '104호', type: '강의실', capacity: 60, position: { x: 100, y: 200 } },
                   { id: 'E1-105', name: '105호', type: '실습실', capacity: 30, position: { x: 200, y: 200 } },
                   { id: 'E1-106', name: '학생회실', type: '사무실', capacity: 20, position: { x: 300, y: 200 } }
               ],
               '2': [  // 2층
                   { id: 'E1-201', name: '201호', type: '강의실', capacity: 40, position: { x: 100, y: 100 } },
                   { id: 'E1-202', name: '202호', type: '강의실', capacity: 40, position: { x: 200, y: 100 } },
                   { id: 'E1-203', name: '203호', type: '실험실', capacity: 30, position: { x: 300, y: 100 } },
                   { id: 'E1-204', name: '204호', type: '강의실', capacity: 60, position: { x: 100, y: 200 } },
                   { id: 'E1-205', name: '205호', type: '강의실', capacity: 60, position: { x: 200, y: 200 } },
                   { id: 'E1-206', name: '컴퓨터실', type: '실습실', capacity: 40, position: { x: 300, y: 200 } }
               ],
               '3': [  // 3층
                   { id: 'E1-301', name: '301호', type: '강의실', capacity: 40, position: { x: 100, y: 100 } },
                   { id: 'E1-302', name: '302호', type: '강의실', capacity: 40, position: { x: 200, y: 100 } },
                   { id: 'E1-303', name: '303호', type: '실험실', capacity: 30, position: { x: 300, y: 100 } },
                   { id: 'E1-304', name: '304호', type: '강의실', capacity: 60, position: { x: 100, y: 200 } },
                   { id: 'E1-305', name: '305호', type: '교수연구실', capacity: 4, position: { x: 200, y: 200 } },
                   { id: 'E1-306', name: '306호', type: '교수연구실', capacity: 4, position: { x: 300, y: 200 } }
               ],
               '4': [  // 4층
                   { id: 'E1-401', name: '401호', type: '강의실', capacity: 40, position: { x: 100, y: 100 } },
                   { id: 'E1-402', name: '402호', type: '강의실', capacity: 40, position: { x: 200, y: 100 } },
                   { id: 'E1-403', name: '403호', type: '실험실', capacity: 30, position: { x: 300, y: 100 } },
                   { id: 'E1-404', name: '404호', type: '세미나실', capacity: 20, position: { x: 100, y: 200 } },
                   { id: 'E1-405', name: '405호', type: '교수연구실', capacity: 4, position: { x: 200, y: 200 } },
                   { id: 'E1-406', name: '406호', type: '교수연구실', capacity: 4, position: { x: 300, y: 200 } }
               ],
               '5': [  // 5층
                   { id: 'E1-501', name: '501호', type: '세미나실', capacity: 30, position: { x: 100, y: 100 } },
                   { id: 'E1-502', name: '502호', type: '강의실', capacity: 40, position: { x: 200, y: 100 } },
                   { id: 'E1-503', name: '503호', type: '전산실', capacity: 60, position: { x: 300, y: 100 } },
                   { id: 'E1-504', name: '504호', type: '회의실', capacity: 16, position: { x: 100, y: 200 } },
                   { id: 'E1-505', name: '505호', type: '교수연구실', capacity: 4, position: { x: 200, y: 200 } },
                   { id: 'E1-506', name: '506호', type: '교수연구실', capacity: 4, position: { x: 300, y: 200 } }
               ]
           },
           '자연과학관': {
               '1': [
                   // 자연과학관 1층 강의실들...
                   { id: 'S1-101', name: '101호', type: '강의실', capacity: 40, position: { x: 100, y: 100 } },
                   { id: 'S1-102', name: '102호', type: '실험실', capacity: 30, position: { x: 200, y: 100 } },
                   { id: 'S1-103', name: '103호', type: '동물실습실', capacity: 30, position: { x: 300, y: 100 } }
               ],
               // 다른 층 데이터...
           },
           // 다른 건물의 강의실 데이터...
       };

       // 경로 데이터 - 각 건물 내 연결 지점 정보
       const pathData = {
           '공학1관': {
               '1': [  // 1층 경로 점
                   { id: 'e1', name: '동쪽 계단', type: 'stairs', position: { x: 350, y: 150 }, connections: ['e2'] },
                   { id: 'w1', name: '서쪽 계단', type: 'stairs', position: { x: 50, y: 150 }, connections: ['w2'] },
                   { id: 'c1', name: '중앙 복도', type: 'corridor', position: { x: 200, y: 150 }, connections: ['e1', 'w1'] },
                   { id: 'main', name: '정문', type: 'entrance', position: { x: 100, y: 350 }, connections: ['c1'] },
                   { id: 'side', name: '측면 입구', type: 'entrance', position: { x: 250, y: 350 }, connections: ['c1'] }
               ],
               '2': [  // 2층 경로 점
                   { id: 'e2', name: '동쪽 계단', type: 'stairs', position: { x: 350, y: 150 }, connections: ['e1', 'e3'] },
                   { id: 'w2', name: '서쪽 계단', type: 'stairs', position: { x: 50, y: 150 }, connections: ['w1', 'w3'] },
                   { id: 'c2', name: '중앙 복도', type: 'corridor', position: { x: 200, y: 150 }, connections: ['e2', 'w2'] }
               ],
               // 다른 층 경로...
           },
           // 다른 건물 경로...
       };

       // 현재 활성화된 건물 ID와 층
       let currentBuildingId = null;
       let currentFloor = null;
       let currentPathPoints = [];
       
       // 네이버 지도 관련 변수
       let naverMap;
       let mapMarkers = [];
       let infoWindows = [];
       
       // 페이지네이션 변수
       let currentPage = 1;
       const buildingsPerPage = 5;
       
       // 페이지 로드시 실행될 함수
       document.addEventListener('DOMContentLoaded', function() {
           // 시설 탭 초기화
           initFacilityTab();
           
           // 네이버 지도 초기화 - 약간 지연시켜 실행
           setTimeout(initNaverMap, 500);
           
           // 탭 전환 시 지도 갱신을 위한 이벤트 리스너
           document.querySelectorAll('.tab-item').forEach(item => {
               item.addEventListener('click', function() {
                   const tabId = this.textContent.trim().toLowerCase();
                   if (tabId.includes('시설')) {
                       setTimeout(function() {
                           if (naverMap) {
                               window.dispatchEvent(new Event('resize'));
                               naverMap.refresh();
                           }
                       }, 300);
                   }
               });
           });
       });
       
       // 시설 탭 초기화 함수
       function initFacilityTab() {
           loadBuildingsByPage(currentPage);
           updatePaginationControls();
       }
       
       // 해당 페이지의 건물 목록 로드 함수
       function loadBuildingsByPage(page) {
           // 건물 목록 컨테이너
           const buildingListElement = document.querySelector('#facility-tab .building-list');
           if (!buildingListElement) return;
           
           // 목록 초기화
           buildingListElement.innerHTML = '';
           
           // 페이지에 해당하는 건물 인덱스 계산
           const startIndex = (page - 1) * buildingsPerPage;
           const endIndex = Math.min(startIndex + buildingsPerPage, buildingData.length);
           
           // 페이지에 해당하는 건물 목록 생성
           for (let i = startIndex; i < endIndex; i++) {
               const building = buildingData[i];
               
               const listItem = document.createElement('li');
               listItem.className = 'building-item';
               listItem.onclick = function() { 
                   showBuildingDetail(building.id);
               };
               
               listItem.innerHTML = `
                   <div class="building-image">
                       <img src="${building.image}" alt="${building.name}">
                   </div>
                   <div class="building-info-container">
                       <div class="building-info">
                           <div class="building-name">${building.name}</div>
                           <div class="building-description">${building.description}</div>
                       </div>
                       <div class="building-nav-button" onclick="viewIndoorMap('${building.id}', event)">
                           <span>내부지도</span>
                           <span>🔎</span>
                       </div>
                   </div>
               `;
               
               buildingListElement.appendChild(listItem);
           }
           
           // 현재 페이지 저장
           currentPage = page;
       }
       
       // 페이지네이션 컨트롤 업데이트
       function updatePaginationControls() {
           // 총 페이지 수 계산
           const totalPages = Math.ceil(buildingData.length / buildingsPerPage);
           
           // 페이지네이션 컨트롤 컨테이너
           const paginationContainer = document.querySelector('#pagination-controls');
           if (!paginationContainer) return;
           
           // 컨트롤 초기화
           paginationContainer.innerHTML = '';
           
           // 이전 페이지 버튼
           const prevButton = document.createElement('button');
           prevButton.className = 'pagination-button';
           prevButton.textContent = '이전';
           prevButton.disabled = currentPage === 1;
           prevButton.onclick = function() {
               if (currentPage > 1) {
                   loadBuildingsByPage(currentPage - 1);
                   updatePaginationControls();
               }
           };
           paginationContainer.appendChild(prevButton);
           
           // 페이지 번호 버튼 (간략화)
           for (let i = 1; i <= Math.min(totalPages, 3); i++) {
               const pageButton = document.createElement('button');
               pageButton.className = 'pagination-button';
               pageButton.textContent = i;
               
               if (i === currentPage) {
                   pageButton.classList.add('active');
               }
               
               pageButton.onclick = function() {
                   loadBuildingsByPage(i);
                   updatePaginationControls();
               };
               
               paginationContainer.appendChild(pageButton);
           }
           
           // 다음 페이지 버튼
           const nextButton = document.createElement('button');
           nextButton.className = 'pagination-button';
           nextButton.textContent = '다음';
           nextButton.disabled = currentPage === totalPages;
           nextButton.onclick = function() {
               if (currentPage < totalPages) {
                   loadBuildingsByPage(currentPage + 1);
                   updatePaginationControls();
               }
           };
           paginationContainer.appendChild(nextButton);
       }
       
       // 네이버 지도 초기화
       function initNaverMap() {
           console.log('네이버 지도 초기화 시작...');
           
           // 네이버 지도 라이브러리가 로드되었는지 확인
           if (typeof naver === 'undefined' || typeof naver.maps === 'undefined') {
               console.error('네이버 지도 API가 로드되지 않았습니다. 다시 시도합니다.');
               // 1초 후에 다시 시도
               setTimeout(initNaverMap, 1000);
               return;
           }
           
           try {
               // 지도 컨테이너 존재 확인
               const mapContainer = document.getElementById('naverMap');
               if (!mapContainer) {
                   console.error('지도 컨테이너가 존재하지 않습니다.');
                   return;
               }
               
               // 컨테이너 스타일 명시적 설정
               mapContainer.style.width = '100%';
               mapContainer.style.height = '100%';
               
               console.log('네이버 지도 컨테이너 확인됨');
               
               // 연성대학교 위치 (실제 좌표로 설정)
               const yeonsung = new naver.maps.LatLng(37.39661657434427, 126.90772437800818);
               
               // 지도 옵션
               const mapOptions = {
                   center: yeonsung,
                   zoom: 16,
                   minZoom: 14,
                   maxZoom: 19,
                   zoomControl: true,
                   zoomControlOptions: {
                       position: naver.maps.Position.TOP_RIGHT
                   },
                   scaleControl: true,
                   logoControl: true,
                   mapDataControl: true
               };
               
               console.log('지도 옵션 설정 완료');
               
               // 지도 생성
               naverMap = new naver.maps.Map('naverMap', mapOptions);
               
               // 지도가 완전히 로드된 후 리사이즈 트리거
               naver.maps.Event.once(naverMap, 'init_stylemap', function() {
                   console.log('지도 스타일맵 초기화 완료');
                   window.dispatchEvent(new Event('resize'));
                   naverMap.refresh();
               });
               
               console.log('네이버 지도 객체 생성 완료');
               
               // 마커와 정보창 배열 초기화
               mapMarkers = [];
               infoWindows = [];
               
               // 메인 마커 추가 (연성대학교 위치)
               const mainMarker = new naver.maps.Marker({
                   position: yeonsung,
                   map: naverMap,
                   title: '연성대학교',
                   zIndex: 100,
                   icon: {
                       content: `<div style="background-color: #2196F3; color: white; padding: 5px 10px; border-radius: 15px; font-weight: bold; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">연성대학교</div>`,
                       anchor: new naver.maps.Point(50, 15)
                   }
               });
               mapMarkers.push(mainMarker);
               
               console.log('메인 마커 추가 완료');
               
               // 건물 데이터를 기반으로 마커 생성
               buildingData.forEach((building, index) => {
                   if (!building.position || !building.position.lat || !building.position.lng) {
                       console.warn(`건물 ${building.name}의 위치 정보가 없습니다.`);
                       return;
                   }

                   // 마커 생성
                   const marker = new naver.maps.Marker({
                       position: new naver.maps.LatLng(building.position.lat, building.position.lng),
                       map: naverMap,
                       title: building.name,
                       visible: true,
                       icon: {
                           content: `<div style="background-color: #c62917; color: white; padding: 5px 10px; border-radius: 15px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">${building.name}</div>`,
                           anchor: new naver.maps.Point(30, 15)
                       }
                   });
                   
                   // 정보창 내용 (실내 지도 보기 버튼 추가)
                   const contentString = `
                       <div class="map-info-window">
                           <div class="map-info-title">${building.name}</div>
                           <div class="map-info-desc">${building.description}</div>
                           <div style="margin-top: 8px;">
                               <button onclick="viewIndoorMap('${building.id}')" style="padding: 4px 8px; background-color: #c62917; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">내부 지도 보기</button>
                           </div>
                       </div>
                   `;
                   
                   // 정보창 생성
                   const infoWindow = new naver.maps.InfoWindow({
                       content: contentString,
                       maxWidth: 200,
                       backgroundColor: "white",
                       borderColor: "#ddd",
                       borderWidth: 1,
                       anchorSize: new naver.maps.Size(10, 10),
                       pixelOffset: new naver.maps.Point(0, -10)
                   });
                   
                   // 마커 클릭 이벤트
                   naver.maps.Event.addListener(marker, 'click', function() {
                       // 다른 모든 정보창 닫기
                       infoWindows.forEach(window => window.close());
                       
                       // 현재 정보창 열기
                       infoWindow.open(naverMap, marker);
                       
                       // 지도 중심 이동
                       naverMap.setCenter(building.position);
                   });
                   
                   // 배열에 추가
                   mapMarkers.push(marker);
                   infoWindows.push(infoWindow);
               });
               
               console.log('건물 마커 추가 완료. 마커 수: ' + mapMarkers.length);
               
               // 지도 리사이즈 이벤트 - 디바운스 적용
               let resizeTimer;
               window.addEventListener('resize', function() {
                   clearTimeout(resizeTimer);
                   resizeTimer = setTimeout(function() {
                       if (naverMap) {
                           naverMap.refresh();
                       }
                   }, 200);
               });
               
               console.log('네이버 지도가 성공적으로 초기화되었습니다.');
           } catch (error) {
               console.error('네이버 지도 초기화 중 오류가 발생했습니다:', error);
           }
       }
       
       // 탭 전환 함수 (실내 지도 탭 추가)
       function switchTab(tabName) {
           // 모든 탭 콘텐츠 숨기기
           document.querySelectorAll('.tab-content').forEach(tab => {
               tab.classList.remove('active');
           });
           
           // 선택한 탭 콘텐츠 표시
           document.getElementById(`${tabName}-tab`).classList.add('active');
           
           // 탭 메뉴 활성화 상태 변경
           document.querySelectorAll('.tab-item').forEach(item => {
               item.classList.remove('active');
           });
           
           // 현재 선택된 탭 버튼 활성화
           const tabItems = document.querySelectorAll('.tab-item');
           for (let i = 0; i < tabItems.length; i++) {
               if (tabItems[i].textContent.trim().toLowerCase().includes(tabName)) {
                   tabItems[i].classList.add('active');
                   break;
               }
           }
           
           // 시설 탭으로 전환 시 지도 갱신
           if (tabName === 'facility') {
               // 첫 페이지 로드
               currentPage = 1;
               loadBuildingsByPage(currentPage);
               updatePaginationControls();
               
               // 지도 갱신을 위한 다중 시도
               if (naverMap) {
                   // 즉시 한 번
                   naverMap.refresh();
                   
                   // 약간 지연 후 다시 시도
                   setTimeout(() => {
                       window.dispatchEvent(new Event('resize'));
                       naverMap.refresh();
                   }, 100);
                   
                   // 300ms 후 다시 시도 (탭 전환 애니메이션 완료 후)
                   setTimeout(() => {
                       window.dispatchEvent(new Event('resize'));
                       naverMap.refresh();
                   }, 300);
               }
           }
       }
       
       // 내부 지도 보기 함수
       function viewIndoorMap(buildingId, event) {
           // 이벤트 버블링 방지
           if (event) {
               event.stopPropagation();
           }
           
           // 해당 건물의 데이터 찾기
           const building = buildingData.find(b => b.id === buildingId);
           
           if (!building) {
               alert('건물 정보를 찾을 수 없습니다.');
               return;
           }
           
           // 현재 건물 ID 저장
           currentBuildingId = buildingId;
           
           // 건물 상세 정보 업데이트
           document.getElementById('building-detail-title').textContent = building.name;
           document.getElementById('building-detail-subtitle').textContent = building.description;
           document.getElementById('building-detail-image').src = building.image;
           
           // 층 선택 버튼 초기화
           const floorSelector = document.getElementById('floor-selector');
           floorSelector.innerHTML = '';
           
           // 층 선택 버튼 생성
           for (const floor of building.floors) {
               const floorButton = document.createElement('div');
               floorButton.className = 'floor-button';
               floorButton.textContent = `${floor}층`;
               floorButton.onclick = () => loadFloorMap(buildingId, floor);
               floorSelector.appendChild(floorButton);
           }
           
           // 건물 내부 지도 탭으로 전환
           document.querySelectorAll('.tab-content').forEach(tab => {
               tab.classList.remove('active');
           });
           document.getElementById('building-detail-tab').classList.add('active');
           
           // 첫 번째 층 로드
           loadFloorMap(buildingId, building.floors[0]);
       }
       
       // 층별 지도 로드 함수
       function loadFloorMap(buildingId, floor) {
           // 현재 층 저장
           currentFloor = floor;
           
           // 층 버튼 활성화 상태 업데이트
           const floorButtons = document.querySelectorAll('.floor-button');
           floorButtons.forEach(button => {
               button.classList.remove('active');
               if (button.textContent === `${floor}층`) {
                   button.classList.add('active');
               }
           });
           
           // 층별 강의실 데이터 가져오기
           const floorClassrooms = classroomData[buildingId] ? classroomData[buildingId][floor] || [] : [];
           
           // 강의실 경로 정보 가져오기
           const floorPaths = pathData[buildingId] ? pathData[buildingId][floor] || [] : [];
           
           // 강의실 목록 업데이트
           updateClassroomList(floorClassrooms);
           
           // 층별 지도 그리기
           drawFloorMap(buildingId, floor, floorClassrooms, floorPaths);
           
           // 출발지 및 도착지 선택 업데이트
           updateNavigationSelectors(buildingId, floor, floorClassrooms, floorPaths);
           
           // 경로 안내 초기화
           document.getElementById('navigation-instructions').style.display = 'none';
       }
       
       // 강의실 목록 업데이트 함수
       function updateClassroomList(classrooms) {
           const classroomList = document.getElementById('classroom-list');
           classroomList.innerHTML = '';
           
           if (!classrooms || classrooms.length === 0) {
               classroomList.innerHTML = '<div style="padding: 16px; text-align: center; color: #888;">해당 층에 강의실 정보가 없습니다.</div>';
               return;
           }
           
           // 강의실 항목 생성
           classrooms.forEach(classroom => {
               const classroomItem = document.createElement('li');
               classroomItem.className = 'classroom-item';
               classroomItem.innerHTML = `
                   <div class="classroom-info">
                       <div class="classroom-name">${classroom.name} (${classroom.id})</div>
                       <div class="classroom-desc">${classroom.type} | 수용인원: ${classroom.capacity}명</div>
                   </div>
                   <div class="classroom-button" onclick="findPathToClassroom('${classroom.id}')">길찾기</div>
               `;
               classroomList.appendChild(classroomItem);
           });
       }
       
       // 층별 지도 그리기 함수
       function drawFloorMap(buildingId, floor, classrooms, paths) {
           const floorMap = document.getElementById('floor-map');
           floorMap.innerHTML = '';
           
           // 실내 지도 배경 이미지 (SVG 또는 이미지)
           floorMap.style.backgroundImage = `url('/api/placeholder/500/350?text=${buildingId} ${floor}층')`;
           floorMap.style.backgroundSize = 'cover';
           floorMap.style.backgroundPosition = 'center';
           
           // 기존 경로 선 및 마커 초기화
           clearPathLines();
           
           // 강의실 마커 생성
           if (classrooms && classrooms.length > 0) {
               classrooms.forEach(classroom => {
                   const marker = document.createElement('div');
                   marker.className = 'classroom-marker';
                   marker.textContent = classroom.name.replace(/[^0-9]/g, ''); // 숫자만 표시
                   marker.style.left = `${classroom.position.x}px`;
                   marker.style.top = `${classroom.position.y}px`;
                   marker.setAttribute('data-id', classroom.id);
                   marker.setAttribute('data-name', classroom.name);
                   marker.setAttribute('data-type', classroom.type);
                   
                   // 마커 클릭 이벤트
                   marker.addEventListener('click', function() {
                       const roomId = this.getAttribute('data-id');
                       const roomName = this.getAttribute('data-name');
                       alert(`${roomName} (${roomId})\n타입: ${this.getAttribute('data-type')}`);
                   });
                   
                   floorMap.appendChild(marker);
               });
           }
           
           // 경로 정보 마커 생성
           if (paths && paths.length > 0) {
               paths.forEach(path => {
                   if (path.type === 'entrance' || path.type === 'stairs' || path.type === 'elevator') {
                       const marker = document.createElement('div');
                       marker.className = 'classroom-marker';
                       marker.classList.add(path.type);
                       
                       // 경로 지점 아이콘 설정
                       if (path.type === 'entrance') {
                           marker.textContent = '🚪';
                       } else if (path.type === 'stairs') {
                           marker.textContent = '🔄';
                       } else if (path.type === 'elevator') {
                           marker.textContent = '🔼';
                       }
                       
                       marker.style.left = `${path.position.x}px`;
                       marker.style.top = `${path.position.y}px`;
                       marker.setAttribute('data-id', path.id);
                       marker.setAttribute('data-name', path.name);
                       marker.setAttribute('data-type', path.type);
                       
                       floorMap.appendChild(marker);
                   }
               });
           }
       }
       
       // 길찾기 선택기 업데이트 함수
       function updateNavigationSelectors(buildingId, floor, classrooms, paths) {
           const startPointSelect = document.getElementById('start-point');
           const endPointSelect = document.getElementById('end-point');
           
           // 선택기 초기화
           startPointSelect.innerHTML = '';
           endPointSelect.innerHTML = '<option value="">선택하세요</option>';
           
           // 출발지 옵션 (입구 및 계단)
           if (paths && paths.length > 0) {
               paths.forEach(path => {
                   if (path.type === 'entrance' || path.type === 'stairs' || path.type === 'elevator') {
                       const option = document.createElement('option');
                       option.value = path.id;
                       option.textContent = path.name;
                       startPointSelect.appendChild(option);
                   }
               });
           }
           
           // 도착지 옵션 (강의실)
           if (classrooms && classrooms.length > 0) {
               classrooms.forEach(classroom => {
                   const option = document.createElement('option');
                   option.value = classroom.id;
                   option.textContent = `${classroom.name} (${classroom.type})`;
                   endPointSelect.appendChild(option);
               });
           }
       }
       
       // 특정 강의실로 길찾기 함수
       function findPathToClassroom(classroomId) {
           const endPointSelect = document.getElementById('end-point');
           endPointSelect.value = classroomId;
           
           // 길찾기 실행
           findPath();
       }
       
       // 길찾기 실행 함수
       function findPath() {
           const startPointSelect = document.getElementById('start-point');
           const endPointSelect = document.getElementById('end-point');
           
           const startId = startPointSelect.value;
           const endId = endPointSelect.value;
           
           if (!startId || !endId) {
               alert('출발지와 도착지를 모두 선택해주세요.');
               return;
           }
           
           // 경로 계산
           const path = calculatePath(currentBuildingId, currentFloor, startId, endId);
           
           if (!path) {
               alert('경로를 찾을 수 없습니다.');
               return;
           }
           
           // 경로 표시
           displayPath(path);
           
           // 경로 안내 표시
           displayPathInstructions(path);
       }
       
       // 경로 계산 함수 (실제 길찾기 알고리즘 구현)
       function calculatePath(buildingId, floor, startId, endId) {
           // 해당 건물, 층의 경로 및 강의실 데이터 가져오기
           const floorPaths = pathData[buildingId] ? pathData[buildingId][floor] || [] : [];
           const floorClassrooms = classroomData[buildingId] ? classroomData[buildingId][floor] || [] : [];
           
           if (!floorPaths.length || !floorClassrooms.length) {
               return null;
           }
           
           // 시작점 찾기
           const startNode = floorPaths.find(p => p.id === startId);
           
           // 도착 강의실 찾기
           const endRoom = floorClassrooms.find(c => c.id === endId);
           
           if (!startNode || !endRoom) {
               return null;
           }
           
           // 간단한 경로 계산 (실제 앱에서는 더 복잡한 길찾기 알고리즘 구현)
           // 여기서는 단순화를 위해 기본 경로만 생성
           
           // 가장 가까운 복도 노드 찾기
           let nearestCorridorId = null;
           let minDistance = Infinity;
           
           floorPaths.forEach(p => {
               if (p.type === 'corridor') {
                   // 복도 노드와 강의실 간의 거리 계산
                   const distance = calculateDistance(p.position, endRoom.position);
                   if (distance < minDistance) {
                       minDistance = distance;
                       nearestCorridorId = p.id;
                   }
               }
           });
           
           // 복도 노드 찾기
           const corridorNode = floorPaths.find(p => p.id === nearestCorridorId);
           
           if (!corridorNode) {
               return null;
           }
           
           // 시작점 -> 복도 -> 강의실 경로 생성
           return {
               points: [
                   { id: startId, position: startNode.position, name: startNode.name, type: 'start' },
                   { id: corridorNode.id, position: corridorNode.position, name: corridorNode.name, type: 'path' },
                   { id: endId, position: endRoom.position, name: endRoom.name, type: 'end' }
               ],
               distance: calculateDistance(startNode.position, corridorNode.position) + 
                        calculateDistance(corridorNode.position, endRoom.position)
           };
       }
       
       // 두 지점 간 거리 계산 (유클리드 거리)
       function calculateDistance(pos1, pos2) {
           const dx = pos1.x - pos2.x;
           const dy = pos1.y - pos2.y;
           return Math.sqrt(dx * dx + dy * dy);
       }
       
       // 경로 표시 함수
       function displayPath(path) {
           // 기존 경로 표시 제거
           clearPathLines();
           
           if (!path || !path.points || path.points.length < 2) {
               return;
           }
           
           const floorMap = document.getElementById('floor-map');
           
           // 경로 선 그리기
           for (let i = 0; i < path.points.length - 1; i++) {
               const start = path.points[i];
               const end = path.points[i + 1];
               
               drawPathLine(floorMap, start.position, end.position);
           }
           
           // 경로 포인트 마커 생성
           currentPathPoints = [];
           
           path.points.forEach((point, index) => {
               // 첫 번째와 마지막 지점 제외 (이미 표시되어 있음)
               if (index > 0 && index < path.points.length - 1) {
                   const marker = document.createElement('div');
                   marker.className = 'classroom-marker path';
                   marker.textContent = index.toString();
                   marker.style.left = `${point.position.x}px`;
                   marker.style.top = `${point.position.y}px`;
                   floorMap.appendChild(marker);
                   
                   currentPathPoints.push(marker);
               }
           });
           
           // 시작점과 종료점에 특별 마커 추가
           const startPoint = path.points[0];
           const startMarker = document.createElement('div');
           startMarker.className = 'classroom-marker start';
           startMarker.textContent = 'S';
           startMarker.style.left = `${startPoint.position.x}px`;
           startMarker.style.top = `${startPoint.position.y}px`;
           floorMap.appendChild(startMarker);
           
           const endPoint = path.points[path.points.length - 1];
           const endMarker = document.createElement('div');
           endMarker.className = 'classroom-marker end';
           endMarker.textContent = 'E';
           endMarker.style.left = `${endPoint.position.x}px`;
           endMarker.style.top = `${endPoint.position.y}px`;
           floorMap.appendChild(endMarker);
           
           currentPathPoints.push(startMarker, endMarker);
       }
       
       // 경로 선 그리기 함수
       function drawPathLine(container, start, end) {
           const line = document.createElement('div');
           line.className = 'path-line';
           
           // 선의 길이 계산
           const length = Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));
           
           // 선의 각도 계산
           const angle = Math.atan2(end.y - start.y, end.x - start.x) * (180 / Math.PI);
           
           // 선의 스타일 설정
           line.style.width = `${length}px`;
           line.style.height = '4px'; // 두께
           line.style.position = 'absolute';
           line.style.left = `${start.x}px`;
           line.style.top = `${start.y}px`;
           line.style.transformOrigin = '0 0';
           line.style.transform = `rotate(${angle}deg)`;
           
           container.appendChild(line);
           currentPathPoints.push(line);
       }
       
       // 경로 선 및 마커 제거 함수
       function clearPathLines() {
           if (currentPathPoints && currentPathPoints.length > 0) {
               currentPathPoints.forEach(point => {
                   if (point.parentNode) {
                       point.parentNode.removeChild(point);
                   }
               });
           }
           currentPathPoints = [];
       }
       
       // 경로 안내 표시 함수
       function displayPathInstructions(path) {
           const instructionsList = document.getElementById('instruction-list');
           const instructionsContainer = document.getElementById('navigation-instructions');
           
           // 안내 초기화
           instructionsList.innerHTML = '';
           
           if (!path || !path.points || path.points.length < 2) {
               instructionsContainer.style.display = 'none';
               return;
           }
           
           // 경로 안내 항목 생성
           for (let i = 0; i < path.points.length - 1; i++) {
               const start = path.points[i];
               const end = path.points[i + 1];
               
               const distance = Math.round(calculateDistance(start.position, end.position) / 10); // 픽셀을 미터로 환산 (임의)
               
               const instruction = document.createElement('li');
               instruction.className = 'instruction-item';
               
               if (i === 0) {
                   // 첫 번째 구간 안내
                   instruction.textContent = `${start.name}에서 ${end.name}까지 직진하세요. (약 ${distance}m)`;
               } else {
                   // 중간 구간 안내
                   instruction.textContent = `${start.name}에서 ${end.name}까지 이동하세요. (약 ${distance}m)`;
               }
               
               instructionsList.appendChild(instruction);
           }
           
           // 마지막 안내 (도착)
           const lastInstruction = document.createElement('li');
           lastInstruction.className = 'instruction-item';
           lastInstruction.textContent = `${path.points[path.points.length - 1].name}에 도착했습니다.`;
           instructionsList.appendChild(lastInstruction);
           
           // 안내 표시
           instructionsContainer.style.display = 'block';
       }
       
       // 지도 줌인
       function zoomIn() {
           if (naverMap) {
               const currentZoom = naverMap.getZoom();
               naverMap.setZoom(currentZoom + 1);
           }
       }
       
       // 지도 줌아웃
       function zoomOut() {
           if (naverMap) {
               const currentZoom = naverMap.getZoom();
               naverMap.setZoom(currentZoom - 1);
           }
       }
       
       // 지도 초기 뷰로 리셋
       function resetMapView() {
           if (naverMap) {
               naverMap.setCenter(new naver.maps.LatLng(37.39661657434427, 126.90772437800818));
               naverMap.setZoom(16);
               
               // 모든 정보창 닫기
               infoWindows.forEach(window => window.close());
           }
       }
       
       // 건물 시설 검색 기능
       function searchFacilities(query) {
           const searchResults = document.getElementById('search-results');
           const noResults = document.getElementById('no-results');
           const originalContent = document.getElementById('original-content');
           
           // 검색어가 비어있으면 원래 콘텐츠 표시
           if (!query.trim()) {
               searchResults.style.display = 'none';
               noResults.style.display = 'none';
               originalContent.style.display = 'block';
               return;
           }
           
           // 검색어를 포함하는 건물/시설만 필터링 (대소문자 구분 없이)
           const lowercaseQuery = query.toLowerCase();
           
           // 모든 시설 데이터 (건물 + 편의시설)
           const allFacilities = [...buildingData, ...facilityData];
           
           // 강의실 검색을 위한 전체 강의실 목록 생성
           let allClassrooms = [];
           for (const buildingId in classroomData) {
               for (const floor in classroomData[buildingId]) {
                   classroomData[buildingId][floor].forEach(classroom => {
                       allClassrooms.push({
                           id: classroom.id,
                           name: classroom.name,
                           type: classroom.type,
                           buildingId: buildingId,
                           floor: floor,
                           description: `${buildingId} ${floor}층 - ${classroom.type}`
                       });
                   });
               }
           }
           
           // 건물, 편의시설, 강의실 검색
           const filteredFacilities = allFacilities.filter(facility => 
               facility.name.toLowerCase().includes(lowercaseQuery) || 
               facility.description.toLowerCase().includes(lowercaseQuery)
           );
           
           const filteredClassrooms = allClassrooms.filter(classroom => 
               classroom.id.toLowerCase().includes(lowercaseQuery) || 
               classroom.name.toLowerCase().includes(lowercaseQuery) || 
               classroom.description.toLowerCase().includes(lowercaseQuery)
           );
           
           // 검색 결과 업데이트
           searchResults.innerHTML = '';
           
           if (filteredFacilities.length > 0 || filteredClassrooms.length > 0) {
               // 검색 결과가 있으면 표시
               const resultsList = document.createElement('ul');
               resultsList.className = 'building-list';
               
               // 건물 및 편의시설 결과
               filteredFacilities.forEach(facility => {
                   const listItem = document.createElement('li');
                   listItem.className = 'building-item';
                   listItem.onclick = function() { 
                       if (facility.type === 'building') {
                           viewIndoorMap(facility.id);
                       } else {
                           showFacilityDetail(facility.id);
                       }
                   };
                   
                   listItem.innerHTML = `
                       <div class="building-image">
                           <img src="${facility.image}" alt="${facility.name}">
                       </div>
                       <div class="building-info-container">
                           <div class="building-info">
                               <div class="building-name">${facility.name}</div>
                               <div class="building-description">${facility.description}</div>
                           </div>
                           <div class="building-nav-button" onclick="navigateToFacility('${facility.id}', '${facility.type}', event)">
                               <span>길찾기</span>
                               <span>🧭</span>
                           </div>
                       </div>
                   `;
                   
                   resultsList.appendChild(listItem);
               });
               
               // 강의실 결과
               filteredClassrooms.forEach(classroom => {
                   const listItem = document.createElement('li');
                   listItem.className = 'building-item';
                   listItem.onclick = function() { 
                       navigateToClassroom(classroom.buildingId, classroom.floor, classroom.id);
                   };
                   
                   listItem.innerHTML = `
                       <div class="building-image">
                           <div style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; font-size: 24px;">🚪</div>
                       </div>
                       <div class="building-info-container">
                           <div class="building-info">
                               <div class="building-name">${classroom.name} (${classroom.id})</div>
                               <div class="building-description">${classroom.description}</div>
                           </div>
                           <div class="building-nav-button" onclick="navigateToClassroom('${classroom.buildingId}', '${classroom.floor}', '${classroom.id}', event)">
                               <span>길찾기</span>
                               <span>🧭</span>
                           </div>
                       </div>
                   `;
                   
                   resultsList.appendChild(listItem);
               });
               
               searchResults.appendChild(resultsList);
               searchResults.style.display = 'block';
               noResults.style.display = 'none';
               originalContent.style.display = 'none';
           } else {
               // 검색 결과가 없으면 메시지 표시
               searchResults.style.display = 'none';
               noResults.style.display = 'block';
               originalContent.style.display = 'none';
           }
       }
       
       // 강의실로 길찾기 함수
       function navigateToClassroom(buildingId, floor, classroomId, event) {
           // 이벤트 버블링 방지
           if (event) {
               event.stopPropagation();
           }
           
           // 건물 내부 지도 보기로 이동
           viewIndoorMap(buildingId);
           
           // 층 선택
           loadFloorMap(buildingId, parseInt(floor));
           
           // 강의실 길찾기 설정
           setTimeout(() => {
               const endPointSelect = document.getElementById('end-point');
               if (endPointSelect) {
                   endPointSelect.value = classroomId;
                   findPath();
               }
           }, 500);
       }
       
       // 건물 상세 보기
       function showBuildingDetail(buildingId) {
           viewIndoorMap(buildingId);
       }
       
       // 편의 시설 상세 보기
       function showFacilityDetail(facilityId) {
           alert(`${facilityId} 시설 상세 정보를 확인합니다.`);
       }
       
       // 공지사항 필터링
       function filterNotices(category) {
           // 카테고리 태그 활성화 상태 변경
           document.querySelectorAll('.category-tag').forEach(tag => {
               tag.classList.remove('active');
           });

           // 선택된 카테고리 활성화
           document.querySelectorAll('.category-tag').forEach(tag => {
               if (tag.textContent.toLowerCase().includes(category) || 
               (category === 'all' && tag.textContent === '전체')) {
                   tag.classList.add('active');
               }
           });
       }

       // 강의 필터링
       function filterLectures(category) {
           // 카테고리 태그 활성화 상태 변경
           const communityTab = document.getElementById('community-tab');
           communityTab.querySelectorAll('.category-tag').forEach(tag => {
               tag.classList.remove('active');
           });

           // 선택된 카테고리 활성화
           communityTab.querySelectorAll('.category-tag').forEach(tag => {
               if (tag.textContent.toLowerCase().includes(category) || 
                   (category === 'all' && tag.textContent === '전체')) {
                   tag.classList.add('active');
               }
           });
       }
       
       // 메인 홈으로 이동
       function goToHome() {
           switchTab('home');
           window.scrollTo({ top: 0, behavior: 'smooth' });
       }
       
       // 시설로 길찾기 (건물 또는 편의시설)
       function navigateToFacility(facilityId, facilityType, event) {
           // 이벤트 버블링 방지
           if (event) {
               event.stopPropagation();
           }
           
           if (facilityType === 'building') {
               // 건물 길찾기
               viewIndoorMap(facilityId);
           } else {
               // 편의시설 길찾기
               const facility = facilityData.find(f => f.id === facilityId);
               
               if (facility) {
                   alert(`${facility.name}으로 길찾기를 시작합니다.`);
                   
                   // 지도를 표시하고 해당 시설로 이동
                   switchTab('facility');
                   
                   // 지도가 초기화되었는지 확인
                   if (naverMap) {
                       // 시설 위치로 지도 중심 이동
                       const position = new naver.maps.LatLng(facility.position.lat, facility.position.lng);
                       naverMap.setCenter(position);
                       naverMap.setZoom(18); // 더 가깝게 줌인
                   }
               }
           }
       }
       
       // 공지사항 상세 페이지로 이동
       function goToNoticeDetail(noticeId) {
           alert(`공지사항 ID: ${noticeId} 상세 페이지로 이동합니다.`);
       }
       
       // 강의 상세 보기
       function viewLectureDetail(lectureId) {
           alert(`강의 ${lectureId} 상세 페이지로 이동합니다.`);
       }
       
       // 알림 상세 보기
       function viewNotification(notificationId) {
           alert(`${notificationId} 알림 상세 내용을 확인합니다.`);
       }
       
       // 검색 키 입력 처리
       function handleSearchKeyPress(event) {
           if (event.key === 'Enter') {
               const searchTerm = event.target.value.trim();
               if (searchTerm) {
                   alert(`'${searchTerm}'에 대한 검색을 시작합니다.`);
               }
           }
       }
       
       // 페이지 이동 함수
       function goToPage(pageName) {
           alert(`${pageName} 페이지로 이동합니다.`);
       }
       
       // 프로필 페이지 이동 함수
       function navigateToProfilePage(pageName) {
           alert(`내 정보 > ${pageName} 페이지로 이동합니다.`);
       }
       
       // 로그아웃 함수
       function logout() {
           if (confirm('로그아웃 하시겠습니까?')) {
               alert('로그아웃 되었습니다.');
           }
       }
       
       // 회원 탈퇴 함수
       function deleteAccount() {
           if (confirm('정말 회원 탈퇴하시겠습니까? 모든 계정 정보가 삭제됩니다.')) {
               alert('회원 탈퇴가 완료되었습니다.');
           }
       }
       
       // 모든 설정 초기화 함수
       function resetAllSettings() {
           if (confirm('모든 설정을 초기화하시겠습니까? 설정된 위젯, 메뉴, 개인화 옵션이 모두 기본값으로 돌아갑니다.')) {
               alert('모든 설정이 초기화되었습니다. 앱을 다시 시작합니다.');
           }
       }
       
       // 프로필 드롭다운 토글 함수
       function toggleProfileDropdown() {
           const dropdown = document.querySelector('.profile-dropdown');
           dropdown.classList.toggle('active');
       }
   </script>
</body>
</html>