<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연성대학교 캠퍼스 가이드</title>
    <!-- 네이버 지도 API 스크립트 추가 - Direction 서브모듈 포함 -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=ikduyzmop9&submodules=direction"></script>
    <!-- CSS 파일 연결 -->
    <link rel="stylesheet" href="index.css">
</head>
<body>
   <div class="container">
       <header>
           <div class="logo" onclick="goToHome()">연성대학교</div>
           <div class="header-icons">
               <!-- 로그인 버튼만 남기고 검색 및 알림 아이콘 제거 -->
               <a href="#" class="login-button" onclick="goToPage('login')">로그인</a>
               <div class="profile-dropdown-container" style="display: none;">
                   <div class="header-profile-image" onclick="toggleProfileDropdown()">
                       <!-- 여기에 프로필 이미지가 들어갑니다 -->
                       <img id="headerProfileImg" src="" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="프로필">
                   </div>
                   <div class="profile-dropdown">
                       <div class="dropdown-profile-info">
                           <div class="dropdown-profile-name">사용자</div>
                           <div class="dropdown-profile-detail">학과 | 학년</div>
                           <div class="dropdown-profile-detail">학번: 0000000000</div>
                       </div>
                       <div class="dropdown-divider"></div>
                       <div class="dropdown-item" onclick="goToPage('profile-edit')">
                           <span class="dropdown-icon">✏️</span>
                           <span>프로필 수정</span>
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <span class="dropdown-icon">🚪</span>
                            <span>로그아웃</span>
                        </div>
                   </div>
               </div>
           </div>
       </header>

       <!-- 홈 탭 -->
       <div id="home-tab" class="tab-content active">
           <!-- 긴급 알림 배너 -->
           <div class="notification-banner" onclick="viewNotification('emergency')">
               <span class="urgent-icon">📢</span>
               <span class="notification-text">긴급 공지: 내일(4/9) 대학 전체 휴강 안내 - 시설 점검으로 인한 단수</span>
           </div>

           <!-- 환영 카드 -->
           <div class="welcome-card">
               <div class="welcome-title">안녕하세요, 학우님!</div>
               <div class="welcome-subtitle">오늘도 연성대학교와 함께 멋진 하루 되세요.</div>
           </div>

           <!-- 검색 바 -->
           <div class="search-bar">
               <input type="text" class="search-input" placeholder="강의실, 공지사항, 교수님 검색" onkeypress="handleSearchKeyPress(event)">
           </div>

           <!-- 오늘의 날씨 -->
           <div class="weather-widget">
               <div class="weather-info">
                   <div class="weather-temp">로딩 중...</div>
                   <div class="weather-desc">날씨 정보를 불러오는 중...</div>
               </div>
               <div class="weather-icon">☀️</div>
           </div>

           <!-- 바로가기 메뉴 -->
           <div class="shortcut-menu">
               <div class="shortcut-item" onclick="goToPage('activities')">
                   <div class="shortcut-icon">🌟</div>
                   <div class="shortcut-text">교내/대외활동</div>
               </div>
               <div class="shortcut-item" onclick="switchTab('community')">
                   <div class="shortcut-icon">📝</div>
                   <div class="shortcut-text">강의평가</div>
               </div>
                <div class="shortcut-item" onclick="window.location.href='shuttle_bus_tracker.html'">
                    <div class="shortcut-icon">🚌</div>
                    <div class="shortcut-text">셔틀버스</div>
                </div>
               <div class="shortcut-item" onclick="goToPage('everytime-board')">
                   <div class="shortcut-icon">💬</div>
                   <div class="shortcut-text">커뮤니티</div>
               </div>
               <div class="shortcut-item" onclick="goToPage('academic-calendar')">
                   <div class="shortcut-icon">📅</div>
                   <div class="shortcut-text">학사일정</div>
               </div>
           </div>

           <!-- 오늘의 시간표 -->
           <div class="timetable-preview">
               <div class="timetable-header">
                   <div class="timetable-date">2025년 4월 8일 (월) 시간표</div>
                   <div class="timetable-now">현재 강의</div>
               </div>
               <div id="timetable-preview-content">
                   <!-- 동적으로 생성될 수업 내용 -->
               </div>
           </div>

           <!-- 다음 셔틀버스 -->
           <div class="shuttle-card">
               <div class="shuttle-header">
                   <div class="shuttle-title">다음 셔틀버스</div>
                   <div class="shuttle-icon">🚌</div>
               </div>

               <!-- 노선 선택 탭 -->
               <div class="shuttle-route-tabs">
                   <button class="route-tab active" onclick="selectShuttleRoute(1)" data-route="1">
                       <span class="route-name">노선 1</span>
                       <span class="route-desc">인천 남동구, 시흥시</span>
                   </button>
                   <button class="route-tab" onclick="selectShuttleRoute(2)" data-route="2">
                       <span class="route-name">노선 2</span>
                       <span class="route-desc">시화지역, 장현지구</span>
                   </button>
                   <button class="route-tab" onclick="selectShuttleRoute(3)" data-route="3">
                       <span class="route-name">노선 3</span>
                       <span class="route-desc">서울 목동</span>
                   </button>
               </div>

               <!-- 다음 버스 정보 -->
               <div class="shuttle-next-info">
                   <div class="next-bus-main">
                       <div class="shuttle-time">15분 후 출발</div>
                       <div class="shuttle-desc">학교 → 안양역 경유 (14:30)</div>
                   </div>
                   <div class="shuttle-status">
                       <span class="status-badge running">운행 중</span>
                   </div>
               </div>

               <!-- 운행 시간표 -->
               <div class="shuttle-schedule">
                   <div class="schedule-header">오늘의 운행 시간</div>
                   <div class="shuttle-time-slots">
                       <div class="time-slot">
                           <div class="time-period">오전</div>
                           <div class="time-range">08:30~10:50</div>
                           <div class="time-interval">6분 간격</div>
                       </div>
                       <div class="time-slot">
                           <div class="time-period">점심</div>
                           <div class="time-range">12:00~13:20</div>
                           <div class="time-interval">10분 간격</div>
                       </div>
                       <div class="time-slot">
                           <div class="time-period">오후</div>
                           <div class="time-range">16:55~17:45</div>
                           <div class="time-interval">5분 간격</div>
                       </div>
                   </div>
               </div>

               <!-- 다음 운행 시간들 -->
               <div class="shuttle-upcoming">
                   <div class="upcoming-header">다음 운행 시간</div>
                   <div class="shuttle-time-list">
                       <div class="shuttle-time-item">
                           <div class="time-value">15:00</div>
                           <div class="time-label">5분 후</div>
                       </div>
                       <div class="shuttle-time-item">
                           <div class="time-value">15:05</div>
                           <div class="time-label">10분 후</div>
                       </div>
                       <div class="shuttle-time-item">
                           <div class="time-value">15:10</div>
                           <div class="time-label">15분 후</div>
                       </div>
                   </div>
               </div>
           </div>

                      <!-- 교내/대외활동 현황 -->
           <div class="activity-summary-card">
               <div class="activity-summary-header">
                   <div class="activity-summary-title">🌟 교내/대외활동 현황</div>
                   <div class="activity-summary-time">실시간 업데이트</div>
               </div>
               <div class="activity-summary-grid">
                   <div class="activity-stat-item">
                       <div class="activity-stat-icon">🏆</div>
                       <div class="activity-stat-info">
                           <div class="activity-stat-number">12</div>
                           <div class="activity-stat-label">진행 중인 공모전</div>
                       </div>
                   </div>
                   <div class="activity-stat-item">
                       <div class="activity-stat-icon">👥</div>
                       <div class="activity-stat-info">
                           <div class="activity-stat-number">8</div>
                           <div class="activity-stat-label">신입 모집 동아리</div>
                       </div>
                   </div>
                   <div class="activity-stat-item">
                       <div class="activity-stat-icon">🌟</div>
                       <div class="activity-stat-info">
                           <div class="activity-stat-number">15</div>
                           <div class="activity-stat-label">대외활동 기회</div>
                       </div>
                   </div>
               </div>
               <div class="activity-summary-notices">
                   <div class="activity-notice-item">
                       <span class="activity-notice-icon">⏰</span>
                       <span class="activity-notice-text">창업 아이디어 경진대회 마감 22일 남음</span>
                   </div>
                   <div class="activity-notice-item">
                       <span class="activity-notice-icon">🎵</span>
                       <span class="activity-notice-text">밴드 동아리 ECHO 오디션 이번 주</span>
                   </div>
               </div>
           </div>

           <!-- 학사 일정 -->
           <div class="calendar-card">
               <div class="section-title">
                   <span>다가오는 학사일정</span>
                   <a href="#" class="see-all" onclick="goToPage('academic-calendar')">전체보기</a>
               </div>
               <ul class="calendar-list">
                   <li class="calendar-item">
                       <div class="calendar-date">
                           <div class="calendar-day">22</div>
                           <div class="calendar-month">4월</div>
                       </div>
                       <div class="calendar-info">
                           <div class="calendar-title">2025-1학기 중간고사 시작</div>
                           <div class="calendar-desc">4월 22일(월) ~ 4월 26일(금)</div>
                       </div>
                   </li>
                   <li class="calendar-item">
                       <div class="calendar-date">
                           <div class="calendar-day">11</div>
                           <div class="calendar-month">4월</div>
                       </div>
                       <div class="calendar-info">
                           <div class="calendar-title">국가장학금 2차 신청 마감</div>
                           <div class="calendar-desc">온라인 신청</div>
                       </div>
                   </li>
                   <li class="calendar-item">
                       <div class="calendar-date">
                           <div class="calendar-day">15</div>
                           <div class="calendar-month">4월</div>
                       </div>
                       <div class="calendar-info">
                           <div class="calendar-title">삼성전자 채용설명회</div>
                           <div class="calendar-desc">대강당, 오후 2시</div>
                       </div>
                   </li>
               </ul>
           </div>

           <!-- 인기 맛집 할인 정보 -->
           <div class="student-deals-card">
               <div class="everytime-header">
                   <div class="everytime-title">🍽️ 인기 맛집 할인 정보</div>
                   <a href="student-deals.html" class="everytime-view-all">전체보기</a>
               </div>
               <div id="popular-restaurants-list">
                   <div class="popular-restaurant-item loading">
                       <div class="restaurant-image skeleton"></div>
                       <div class="restaurant-content">
                           <div class="restaurant-category skeleton"></div>
                           <div class="restaurant-name skeleton"></div>
                           <div class="restaurant-location skeleton"></div>
                           <div class="restaurant-discount skeleton"></div>
                       </div>
                   </div>
               </div>
           </div>
       </div>
              <!-- 공지사항 섹션 -->
       <div class="content-section">
           <div class="section-title">
               <span>주요 공지사항</span>
               <a href="#" class="see-all" onclick="goToPage('notices')">전체보기</a>
           </div>
           
           <div class="category-filter">
               <div class="category-tag active" onclick="filterNotices('all')">전체</div>
               <div class="category-tag" onclick="filterNotices('academic')">학사</div>
               <div class="category-tag" onclick="filterNotices('scholarship')">장학</div>
               <div class="category-tag" onclick="filterNotices('job')">취업</div>
               <div class="category-tag" onclick="filterNotices('event')">행사</div>
               <div class="category-tag" onclick="filterNotices('department')">학과</div>
           </div>
           
           <ul class="notice-list">
               <li class="notice-item" onclick="goToNoticeDetail('notice1')">
                   <div class="notice-header">
                       <span class="notice-category">학사</span>
                       <span class="notice-date">2025.04.08</span>
                   </div>
                   <div class="notice-title">2025학년도 1학기 중간고사 일정 안내</div>
                   <div class="notice-summary">
                       4월 22일(월)부터 4월 26일(금)까지 중간고사가 진행됩니다. 자세한 시간표는 학과 사무실에서 확인하세요.
                   </div>
               </li>
               <li class="notice-item" onclick="goToNoticeDetail('notice2')">
                   <div class="notice-header">
                       <span class="notice-category">장학</span>
                       <span class="notice-date">2025.04.07</span>
                   </div>
                   <div class="notice-title">국가장학금 2차 신청 마감 안내</div>
                   <div class="notice-summary">
                       국가장학금 2차 신청이 이번 주 금요일(4/11)에 마감됩니다. 아직 신청하지 않은 학생들은 서둘러 신청해주세요.
                   </div>
               </li>
               <li class="notice-item" onclick="goToNoticeDetail('notice3')">
                   <div class="notice-header">
                       <span class="notice-category">취업</span>
                       <span class="notice-date">2025.04.06</span>
                   </div>
                   <div class="notice-title">삼성전자 대규모 채용설명회 개최 안내</div>
                   <div class="notice-summary">
                       4월 15일(화) 오후 2시 대강당에서 삼성전자 채용설명회가 진행됩니다. 참석을 원하는 학생은 사전 신청 바랍니다.
                   </div>
               </li>
           </ul>
       </div>

       <!-- 강의평가 섹션 -->
       <div class="content-section">
           <div class="section-title">
               <span>인기 강의평가</span>
               <a href="#" class="see-all" onclick="switchTab('community')">전체보기</a>
           </div>
           
           <ul class="lecture-list">
               <li class="lecture-item" onclick="viewLectureDetail('web-programming')">
                   <div class="lecture-header">
                       <div class="lecture-title">웹 프로그래밍 실습</div>
                       <div class="lecture-rating">4.8</div>
                   </div>
                   <div class="lecture-info">
                       <span class="lecture-professor">김민수 교수님</span>
                       <span>컴퓨터정보학과</span>
                   </div>
                   <div class="rating-stars">★★★★★</div>
                   <div class="lecture-reviews">
                       "과제는 많지만 실력이 확실히 늘어요! 취업에 큰 도움이 됩니다."
                   </div>
               </li>
               <li class="lecture-item" onclick="viewLectureDetail('marketing')">
                   <div class="lecture-header">
                       <div class="lecture-title">마케팅 원론</div>
                       <div class="lecture-rating">4.5</div>
                   </div>
                   <div class="lecture-info">
                       <span class="lecture-professor">이지영 교수님</span>
                       <span>경영학과</span>
                   </div>
                   <div class="rating-stars">★★★★☆</div>
                   <div class="lecture-reviews">
                       "실제 사례를 많이 다루어서 이해하기 쉽고 재미있어요."
                   </div>
               </li>
           </ul>
       </div>

       <div class="content-pad"></div>
   </div>
       <!-- 시설 탭 -->
    <div id="facility-tab" class="tab-content">
        <!-- 검색 바 - 새로운 구조로 변경 -->
        <div class="search-bar">
            <div class="search-container">
                <input type="text" id="facility-search-input" class="search-input" placeholder="건물, 강의실, 편의시설 검색" oninput="searchFacilities(this.value)">
                <button class="search-clear" onclick="clearSearch()">✕</button>
            </div>
        </div>

        <!-- 빠른 검색 버튼 영역 -->
        <div class="quick-search-buttons">
            <div class="section-title" style="margin-top: 12px; margin-left: 16px; margin-right: 16px;">
                <span>빠른 검색</span>
            </div>
            <div style="display: flex; overflow-x: auto; padding: 0 16px 12px 16px; gap: 8px;">
                <button class="category-tag" onclick="quickSearch('강의실')">강의실</button>
                <button class="category-tag" onclick="quickSearch('학생')">학생시설</button>
                <button class="category-tag" onclick="quickSearch('식당')">식당/카페</button>
                <button class="category-tag" onclick="quickSearch('도서관')">도서관</button>
                <button class="category-tag" onclick="quickSearch('공학')">공학계열</button>
            </div>
        </div>

        <!-- 검색 결과 표시 영역 -->
        <div id="search-results" class="search-results" style="display: none;">
            <!-- 동적으로 추가됨 -->
        </div>

        <div id="no-results" class="no-results" style="display: none;">
            검색 결과가 없습니다.
        </div>

        <!-- 지도와 기본 컨텐츠 -->
        <div id="original-content">
            <div class="campus-map" id="naverMap">
                <div class="map-control-buttons">
                    <div class="map-button" onclick="zoomIn()">🔍+</div>
                    <div class="map-button" onclick="zoomOut()">🔍-</div>
                    <div class="map-button" onclick="resetMapView()">🏠</div>
                </div>

                <div class="gps-button" onclick="trackUserLocation()">📍</div>

                <div class="route-loading" id="routeLoading">
                    <span>🔄</span>
                    <span class="route-loading-text">경로를 계산하는 중...</span>
                </div>

                <div class="route-info-box" id="routeInfoBox">
                    <span class="route-info-close" onclick="closeRouteInfo()">✕</span>
                    <div class="route-info-title">목적지: <span id="routeDestination"></span></div>
                    <div class="route-info-detail">
                        <div>거리: <span id="routeDistance"></span></div>
                        <div>예상 소요시간: <span id="routeDuration"></span></div>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-title">
                    <span>주요 건물</span>
                </div>

                <ul class="building-list">
                    <!-- 동적으로 생성됨 -->
                </ul>

                <div id="pagination-controls" class="pagination-controls">
                    <!-- 페이지 버튼 생성 -->
                </div>
            </div>

            <div class="content-section">
                <div class="section-title">
                    <span>편의시설</span>
                </div>

                <div class="facility-list">
                    <div class="facility-item" onclick="showFacilityDetail('cafeteria')">
                        <div class="facility-image">
                            <img src="https://placehold.co/150x100/gray/white?text=학생식당" alt="학생식당">
                        </div>
                        <div class="facility-info">
                            <div class="facility-name">학생식당</div>
                            <div class="facility-location">학생복지센터 2층</div>
                        </div>
                    </div>
                    <div class="facility-item" onclick="showFacilityDetail('cafe')">
                        <div class="facility-image">
                            <img src="https://placehold.co/150x100/gray/white?text=카페" alt="카페">
                        </div>
                        <div class="facility-info">
                            <div class="facility-name">카페 연성</div>
                            <div class="facility-location">문화1관 1층</div>
                        </div>
                    </div>
                    <div class="facility-item" onclick="showFacilityDetail('convenience')">
                        <div class="facility-image">
                            <img src="https://placehold.co/150x100/gray/white?text=편의점" alt="편의점">
                        </div>
                        <div class="facility-info">
                            <div class="facility-name">CU 편의점</div>
                            <div class="facility-location">학생복지센터 1층</div>
                        </div>
                    </div>
                    <div class="facility-item" onclick="showFacilityDetail('atm')">
                        <div class="facility-image">
                            <img src="https://placehold.co/150x100/gray/white?text=ATM" alt="ATM">
                        </div>
                        <div class="facility-info">
                            <div class="facility-name">ATM</div>
                            <div class="facility-location">학생복지센터 1층</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-pad"></div>
    </div>
    <!-- 하단 탭 메뉴 -->
    <div class="tab-menu">
        <div class="tab-item active" onclick="switchTab('home')">
            <span class="tab-icon">🏠</span>
            <span>홈</span>
        </div>
        <div class="tab-item" onclick="switchTab('facility')">
            <span class="tab-icon">🏫</span>
            <span>시설</span>
        </div>
        <div class="tab-item" onclick="switchTab('community')">
            <span class="tab-icon">💬</span>
            <span>커뮤니티</span>
        </div>
        <div class="tab-item" onclick="switchTab('profile')">
            <span class="tab-icon">👤</span>
            <span>내 정보</span>
        </div>
        <div class="tab-item" onclick="switchTab('alert')">
            <span class="tab-icon">🔔</span>
            <span>알림</span>
        </div>
    </div>
</div>

<!-- JavaScript 파일 연결 -->
<script src="index.js"></script>
</body>
</html>

