<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연성대학교 캠퍼스 가이드</title>
    <!-- 네이버 지도 API 스크립트 추가 - Direction 서브모듈 포함 -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=ikduyzmop9&submodules=direction"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 768px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            padding-bottom: 60px; /* 하단 탭 메뉴 영역만큼 패딩 추가 */
            position: relative;
        }
        
        header {
            background-color: #c62917;
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-icons {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .login-button {
            padding: 6px 12px;
            background-color: white;
            color: #c62917;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
        }
        
        .profile-dropdown-container {
            position: relative;
        }
        
        .header-profile-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            cursor: pointer;
        }
        
        .profile-dropdown {
            position: absolute;
            top: 40px;
            right: 0;
            width: 220px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            overflow: hidden;
            display: none;
        }
        
        .profile-dropdown.active {
            display: block;
        }
        
        .dropdown-profile-info {
            padding: 16px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #eee;
        }
        
        .dropdown-profile-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
            color: #333;
        }
        
        .dropdown-profile-detail {
            font-size: 13px;
            color: #666;
            margin-bottom: 2px;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: #eee;
        }
        
        .dropdown-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            color: #666;
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background-color: #f5f5f5;
        }
        
        .dropdown-icon {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .search-bar {
            padding: 12px 16px;
            background-color: #f9f9f9;
            display: flex;
            border-bottom: 1px solid #eee;
        }
        
        .search-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* 검색 결과 스타일 */
        .search-results {
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 0 16px;
            overflow: hidden;
            position: relative;
            z-index: 100;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .no-results {
            padding: 16px;
            text-align: center;
            color: #888;
            font-size: 14px;
        }
        
        .notification-banner {
            background-color: #ffebee;
            padding: 12px 16px;
            border-bottom: 1px solid #ffcdd2;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .urgent-icon {
            color: #c62917;
            font-weight: bold;
        }
        
        .notification-text {
            font-size: 14px;
            flex: 1;
        }
        
        .shortcut-menu {
            display: flex;
            padding: 16px;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
        }
        
        .shortcut-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
            cursor: pointer;
        }
        
        .shortcut-icon {
            width: 40px;
            height: 40px;
            background-color: #f0f0f0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            font-size: 20px;
        }
        
        .shortcut-text {
            font-size: 12px;
            text-align: center;
            color: #555;
        }
        
        .content-section {
            padding: 16px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .see-all {
            font-size: 13px;
            color: #888;
            text-decoration: none;
        }
        
        .notice-list {
            list-style: none;
        }
        
        .notice-item {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .notice-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .notice-category {
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            color: #555;
        }
        
        .notice-date {
            font-size: 12px;
            color: #888;
        }
        
        .notice-title {
            font-size: 15px;
            margin-bottom: 6px;
        }
        
        .notice-summary {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }
        
        .facility-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .facility-item {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .facility-image {
            height: 100px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .facility-info {
            padding: 10px;
        }
        
        .facility-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .facility-location {
            font-size: 12px;
            color: #666;
        }
        
        .lecture-list {
            list-style: none;
        }
        
        .lecture-item {
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
        }
        
        .lecture-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .lecture-title {
            font-size: 15px;
            font-weight: bold;
        }
        
        .lecture-rating {
            color: #ff9800;
            font-weight: bold;
        }
        
        .lecture-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .lecture-professor {
            color: #333;
        }
        
        .lecture-reviews {
            font-size: 12px;
            color: #666;
        }
        
        /* 하단 탭 메뉴 수정 - 항상 표시되도록 */
        .tab-menu {
            display: flex;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 768px;
            margin: 0 auto;
            background-color: white;
            border-top: 1px solid #ddd;
            z-index: 1000; /* 다른 요소 위에 표시되도록 z-index 추가 */
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05); /* 약간의 그림자 추가 */
        }
        
        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 0;
            font-size: 12px;
            color: #888;
            text-decoration: none;
            cursor: pointer;
        }
        
        .tab-item.active {
            color: #c62917;
        }
        
        .tab-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }
        
        /* 지도 컨테이너 스타일 수정 */
        .campus-map {
            height: 350px; /* 높이 고정 */
            width: 100%;   /* 너비 100% */
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .campus-map img {
            max-width: 100%;
            max-height: 100%;
        }
        
        /* 지도 마커 정보창 스타일 */
        .map-info-window {
            padding: 8px 12px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            font-size: 13px;
            max-width: 200px;
        }
        
        .map-info-title {
            font-weight: bold;
            margin-bottom: 4px;
            color: #333;
        }
        
        .map-info-desc {
            color: #666;
            font-size: 12px;
        }
        
        /* 지도 버튼 스타일 */
        .map-control-buttons {
            position: absolute;
            bottom: 10px;
            right: 10px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .map-button {
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
        }
        
        .content-pad {
            padding-bottom: 60px; /* 하단 탭 메뉴 높이만큼 여백 */
        }

        /* 탭 콘텐츠 */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 건물 및 교실 목록 */
        .building-list {
            list-style: none;
        }
        
        /* 건물 목록 항목 재디자인 */
        .building-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .building-image {
            width: 80px;
            height: 60px;
            border-radius: 4px;
            overflow: hidden;
            margin-right: 12px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .building-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .building-info-container {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .building-info {
            flex: 1;
        }
        
        .building-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .building-description {
            font-size: 13px;
            color: #666;
        }
        
        .building-nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            padding: 8px;
            border-radius: 4px;
            margin-left: 8px;
            cursor: pointer;
        }
        
        .building-nav-button:hover {
            background-color: #e0e0e0;
        }
        
        .building-nav-button span:first-child {
            font-size: 12px;
            color: #555;
            margin-bottom: 4px;
        }
        
        .building-nav-button span:last-child {
            font-size: 18px;
        }
        
        /* 강의 평가 스타일 */
        .rating-stars {
            color: #ffb400;
            letter-spacing: 2px;
        }
        
        /* 카테고리 필터 */
        .category-filter {
            display: flex;
            overflow-x: auto;
            padding: 8px 0;
            margin-bottom: 12px;
            -webkit-overflow-scrolling: touch;
        }
        
        .category-tag {
            flex-shrink: 0;
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 16px;
            margin-right: 8px;
            font-size: 13px;
            color: #555;
            background-color: white;
            cursor: pointer;
        }
        
        .category-tag.active {
            background-color: #c62917;
            color: white;
            border-color: #c62917;
        }
        
        /* 알림 리스트 */
        .alert-list {
            list-style: none;
        }
        
        .alert-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            cursor: pointer;
        }
        
        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            font-size: 20px;
        }
        
        .alert-info {
            flex: 1;
        }
        
        .alert-title {
            font-size: 15px;
            margin-bottom: 4px;
        }
        
        .alert-message {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }
        
        .alert-time {
            font-size: 12px;
            color: #888;
        }
        
        .alert-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 10px;
            background-color: #c62917;
            color: white;
            font-size: 12px;
            margin-left: 4px;
        }

        /* 내 정보 탭 */
        .profile-section {
            padding: 24px 16px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        
        .profile-image {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background-color: #f0f0f0;
            margin-right: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            overflow: hidden;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .profile-detail {
            font-size: 14px;
            color: #666;
        }
        
        .menu-list {
            list-style: none;
        }
        
        .menu-item {
            padding: 16px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .menu-title {
            font-size: 15px;
        }
        
        .menu-arrow {
            color: #ccc;
        }

        /* 공지사항 상세 */
        .notice-detail {
            padding: 20px 16px;
        }
        
        .notice-detail-header {
            margin-bottom: 16px;
        }
        
        .notice-detail-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .notice-detail-info {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: #888;
        }
        
        .notice-detail-content {
            font-size: 15px;
            line-height: 1.6;
        }
        
        /* 로딩 인디케이터 */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #888;
        }

        /* 헤더 프로필 이미지 스타일 */
        .header-profile-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            margin-left: 8px;
        }
        
        /* 프로필 이미지 스타일 */
        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* 회원 탈퇴 버튼 스타일 */
        .delete-account {
            color: #e53935;
        }

        /* 페이지네이션 스타일 */
        .pagination-controls {
            display: flex;
            justify-content: center;
            padding: 16px 0;
            gap: 10px;
        }
        
        .pagination-button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
            font-size: 14px;
            cursor: pointer;
        }
        
        .pagination-button:hover {
            background-color: #f0f0f0;
        }
        
        .pagination-button.active {
            background-color: #c62917;
            border-color: #c62917;
            color: white;
        }
        
        .pagination-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* 검색 결과 스타일 개선 */
        .search-results {
            background-color: white;
            border: 1px solid #eee;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 0 16px;
            max-height: 60vh;
            overflow-y: auto;
            position: absolute;
            width: calc(100% - 32px);
            z-index: 200;
        }
        
        .search-results .building-item {
            border-bottom: 1px solid #eee;
        }
        
        .search-results .building-item:last-child {
            border-bottom: none;
        }
        
        .no-results {
            padding: 16px;
            text-align: center;
            color: #888;
            font-size: 14px;
            background-color: white;
            border: 1px solid #eee;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 0 16px;
            position: absolute;
            z-index: 100;
            width: calc(100% - 32px);
        }
        
        .search-highlight {
            background-color: rgba(198, 41, 23, 0.1);
            font-weight: bold;
            color: #c62917;
        }
        
        /* 검색바 컨테이너 스타일 */
        .search-container {
            position: relative;
            width: 100%;
            display: flex;
        }
        
        .search-input {
            flex: 1;
            padding: 8px 30px 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #c62917;
            box-shadow: 0 0 0 2px rgba(198, 41, 23, 0.2);
        }
        
        .search-clear {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            padding: 0;
            display: none;
            transition: color 0.2s ease;
        }
        
        .search-clear:hover {
            color: #c62917;
        }
        
        /* 검색 결과 항목 호버 효과 */
        .search-results .building-item:hover {
            background-color: #f9f9f9;
        }
        
        /* 빠른 검색 버튼 스타일 */
        .quick-search-buttons {
            background-color: white;
            border-bottom: 1px solid #eee;
            margin-bottom: 12px;
        }
        
        .quick-search-buttons .category-tag {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 16px;
            color: #555;
            cursor: pointer;
            font-size: 13px;
            padding: 6px 12px;
            transition: all 0.2s ease;
        }
        
        .quick-search-buttons .category-tag:hover {
            background-color: #e5e5e5;
        }
        
        .quick-search-buttons .category-tag.active {
            background-color: #c62917;
            border-color: #c62917;
            color: white;
        }
        /* GPS 버튼 스타일 */
        .gps-button {
            position: absolute;
            bottom: 80px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            z-index: 100;
            cursor: pointer;
        }

        /* 사용자 위치 마커 스타일 */
        .user-location-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #4285F4;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        /* 경로 안내 로딩 인디케이터 */
        .route-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }
        
        .route-loading-text {
            font-size: 14px;
            color: #333;
            margin-left: 8px;
        }
        
        /* 경로 정보 박스 */
        .route-info-box {
            position: absolute;
            bottom: 120px;
            left: 10px;
            right: 10px;
            background-color: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 90;
            display: none;
        }
        
        .route-info-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .route-info-detail {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #555;
        }
        
        .route-info-close {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 16px;
            color: #888;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo" onclick="goToHome()">연성대학교</div>
            <div class="header-icons">
                <!-- 로그인 버튼만 남기고 검색 및 알림 아이콘 제거 -->
                <a href="#" class="login-button" onclick="goToPage('login')">로그인</a>
                <div class="profile-dropdown-container" style="display: none;">
                    <div class="header-profile-image" onclick="toggleProfileDropdown()">
                        <!-- 여기에 프로필 이미지가 들어갑니다 -->
                        <img id="headerProfileImg" src="" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="프로필">
                    </div>
                    <div class="profile-dropdown">
                        <div class="dropdown-profile-info">
                            <div class="dropdown-profile-name">사용자</div>
                            <div class="dropdown-profile-detail">학과 | 학년</div>
                            <div class="dropdown-profile-detail">학번: 0000000000</div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="goToPage('profile-edit')">
                            <span class="dropdown-icon">✏️</span>
                            <span>프로필 수정</span>
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <div class="dropdown-item" onclick="logout()">
                                <span class="dropdown-icon">🚪</span>
                                <span>로그아웃</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- 홈 탭 -->
            <div id="home-tab" class="tab-content active">
                <!-- 긴급 알림 배너 -->
                <div class="notification-banner" onclick="viewNotification('emergency')">
                    <span class="urgent-icon">📢</span>
                    <span class="notification-text">긴급 공지: 내일(4/9) 대학 전체 휴강 안내 - 시설 점검으로 인한 단수</span>
                </div>
                
                <!-- 검색 바 -->
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="강의실, 공지사항, 교수님 검색" onkeypress="handleSearchKeyPress(event)">
                </div>
                
                <!-- 바로가기 메뉴 -->
                <div class="shortcut-menu">
                    <div class="shortcut-item" onclick="switchTab('facility')">
                        <div class="shortcut-icon">🏫</div>
                        <div class="shortcut-text">강의실</div>
                    </div>
                    <div class="shortcut-item" onclick="switchTab('community')">
                        <div class="shortcut-icon">📝</div>
                        <div class="shortcut-text">강의평가</div>
                    </div>
                    <div class="shortcut-item" onclick="goToPage('shuttle')">
                        <div class="shortcut-icon">🚌</div>
                        <div class="shortcut-text">셔틀버스</div>
                    </div>
                    <div class="shortcut-item" onclick="goToPage('cafeteria')">
                        <div class="shortcut-icon">🍽️</div>
                        <div class="shortcut-text">학식</div>
                    </div>
                    <div class="shortcut-item" onclick="goToPage('academic-calendar')">
                        <div class="shortcut-icon">📅</div>
                        <div class="shortcut-text">학사일정</div>
                    </div>
                </div>
                
                <!-- 공지사항 섹션 -->
                <div class="content-section">
                    <div class="section-title">
                        <span>주요 공지사항</span>
                        <a href="#" class="see-all" onclick="goToPage('notices')">전체보기</a>
                    </div>
                    
                    <div class="category-filter">
                        <div class="category-tag active" onclick="filterNotices('all')">전체</div>
                        <div class="category-tag" onclick="filterNotices('academic')">학사</div>
                        <div class="category-tag" onclick="filterNotices('scholarship')">장학</div>
                        <div class="category-tag" onclick="filterNotices('job')">취업</div>
                        <div class="category-tag" onclick="filterNotices('event')">행사</div>
                        <div class="category-tag" onclick="filterNotices('department')">학과</div>
                    </div>
                    
                    <ul class="notice-list">
                        <!-- 알림창 없이 공지사항 상세 페이지로 바로 이동하도록 수정 -->
                        <li class="notice-item" onclick="goToNoticeDetail('notice1')">
                            <div class="notice-header">
                                <span class="notice-category">학사</span>
                                <span class="notice-date">2025.04.08</span>
                            </div>
                            <div class="notice-title">2025학년도 1학기 중간고사 일정 안내</div>
                            <div class="notice-summary">
                                4월 22일(월)부터 4월 26일(금)까지 중간고사가 진행됩니다. 자세한 시간표는 학과 사무실에서 확인하세요.
                            </div>
                        </li>
                        <li class="notice-item" onclick="goToNoticeDetail('notice2')">
                            <div class="notice-header">
                                <span class="notice-category">장학</span>
                                <span class="notice-date">2025.04.07</span>
                            </div>
                            <div class="notice-title">국가장학금 2차 신청 마감 안내</div>
                            <div class="notice-summary">
                                국가장학금 2차 신청이 이번 주 금요일(4/11)에 마감됩니다. 아직 신청하지 않은 학생들은 서둘러 신청해주세요.
                            </div>
                        </li>
                        <li class="notice-item" onclick="goToNoticeDetail('notice3')">
                            <div class="notice-header">
                                <span class="notice-category">취업</span>
                                <span class="notice-date">2025.04.06</span>
                            </div>
                            <div class="notice-title">삼성전자 대규모 채용설명회 개최 안내</div>
                            <div class="notice-summary">
                                4월 15일(화) 오후 2시 대강당에서 삼성전자 채용설명회가 진행됩니다. 참석을 원하는 학생은 사전 신청 바랍니다.
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- 강의평가 섹션 -->
                <div class="content-section">
                    <div class="section-title">
                        <span>인기 강의평가</span>
                        <a href="#" class="see-all" onclick="switchTab('community')">전체보기</a>
                    </div>
                    
                    <ul class="lecture-list">
                        <li class="lecture-item" onclick="viewLectureDetail('web-programming')">
                            <div class="lecture-header">
                                <div class="lecture-title">웹 프로그래밍 실습</div>
                                <div class="lecture-rating">4.8</div>
                            </div>
                            <div class="lecture-info">
                                <span class="lecture-professor">김민수 교수님</span>
                                <span>컴퓨터정보학과</span>
                            </div>
                            <div class="rating-stars">★★★★★</div>
                            <div class="lecture-reviews">
                                "과제는 많지만 실력이 확실히 늘어요! 취업에 큰 도움이 됩니다."
                            </div>
                        </li>
                        <li class="lecture-item" onclick="viewLectureDetail('marketing')">
                            <div class="lecture-header">
                                <div class="lecture-title">마케팅 원론</div>
                                <div class="lecture-rating">4.5</div>
                            </div>
                            <div class="lecture-info">
                                <span class="lecture-professor">이지영 교수님</span>
                                <span>경영학과</span>
                            </div>
                            <div class="rating-stars">★★★★☆</div>
                            <div class="lecture-reviews">
                                "실제 사례를 많이 다루어서 이해하기 쉽고 재미있어요."
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-pad"></div>
            </div>
            
            <!-- 시설 탭 -->
            <div id="facility-tab" class="tab-content">
                <!-- 검색 바 - 새로운 구조로 변경 -->
                <div class="search-bar">
                    <div class="search-container">
                        <input type="text" id="facility-search-input" class="search-input" placeholder="건물, 강의실, 편의시설 검색" oninput="searchFacilities(this.value)">
                        <button class="search-clear" onclick="clearSearch()">✕</button>
                    </div>
                </div>
                
                <!-- 빠른 검색 버튼 영역 -->
                <div class="quick-search-buttons">
                    <div class="section-title" style="margin-top: 12px; margin-left: 16px; margin-right: 16px;">
                        <span>빠른 검색</span>
                    </div>
                    <div style="display: flex; overflow-x: auto; padding: 0 16px 12px 16px; gap: 8px;">
                        <button class="category-tag" onclick="quickSearch('강의실')">강의실</button>
                        <button class="category-tag" onclick="quickSearch('학생')">학생시설</button>
                        <button class="category-tag" onclick="quickSearch('식당')">식당/카페</button>
                        <button class="category-tag" onclick="quickSearch('도서관')">도서관</button>
                        <button class="category-tag" onclick="quickSearch('공학')">공학계열</button>
                    </div>
                </div>
                
                <!-- 검색 결과를 표시할 컨테이너 추가 -->
                <div id="search-results" class="search-results" style="display: none;">
                    <!-- 검색 결과가 여기에 동적으로 추가됩니다 -->
                </div>
                
                <!-- 검색 결과가 없을 때 표시될 내용 -->
                <div id="no-results" class="no-results" style="display: none;">
                    검색 결과가 없습니다.
                </div>
                
                <!-- 원래 내용은 검색 결과가 없을 때만 표시 -->
                <div id="original-content">
                    <!-- 네이버 지도로 대체된 캠퍼스 맵 -->
                    <div class="campus-map" id="naverMap">
                        <img src="/api/placeholder/400/250" alt="연성대학교 캠퍼스 지도">
                        <div class="map-control-buttons">
                            <div class="map-button" onclick="zoomIn()">🔍+</div>
                            <div class="map-button" onclick="zoomOut()">🔍-</div>
                            <div class="map-button" onclick="resetMapView()">🏠</div>
                        </div>
    
                        <!-- 여기에 GPS 버튼 추가 -->
                        <div class="gps-button" onclick="trackUserLocation()">📍</div>
                        
                        <!-- 경로 정보 로딩 인디케이터 -->
                        <div class="route-loading" id="routeLoading">
                            <span>🔄</span>
                            <span class="route-loading-text">경로를 계산하는 중...</span>
                        </div>
                        
                        <!-- 경로 정보 박스 -->
                        <div class="route-info-box" id="routeInfoBox">
                            <span class="route-info-close" onclick="closeRouteInfo()">✕</span>
                            <div class="route-info-title">목적지: <span id="routeDestination"></span></div>
                            <div class="route-info-detail">
                                <div>거리: <span id="routeDistance"></span></div>
                                <div>예상 소요시간: <span id="routeDuration"></span></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-section">
                        <div class="section-title">
                            <span>주요 건물</span>
                        </div>
                        
                        <ul class="building-list">
                            <!-- 건물 항목들이 JavaScript로 동적 생성됩니다 -->
                            <li class="building-item" onclick="showBuildingDetail('공학1관')">
                                <div class="building-image">
                                    <img src="/api/placeholder/80/60" alt="공학1관 건물 이미지">
                                </div>
                                <div class="building-info-container">
                                    <div class="building-info">
                                        <div class="building-name">공학1관</div>
                                        <div class="building-description">공학계열 강의실, 실험실</div>
                                    </div>
                                    <div class="building-nav-button" onclick="navigateToBuilding('공학1관', event)">
                                        <span>길찾기</span>
                                        <span>🧭</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        
                        <!-- 페이지네이션 컨트롤 추가 -->
                        <div id="pagination-controls" class="pagination-controls">
                            <!-- 페이지 버튼들이 JavaScript로 동적 생성됩니다 -->
                        </div>
                    </div>
                    
                    <div class="content-section">
                        <div class="section-title">
                            <span>편의시설</span>
                        </div>
                        
                        <div class="facility-list">
                            <div class="facility-item" onclick="showFacilityDetail('cafeteria')">
                                <div class="facility-image">
                                    <img src="/api/placeholder/150/100" alt="학생식당">
                                </div>
                                <div class="facility-info">
                                    <div class="facility-name">학생식당</div>
                                    <div class="facility-location">학생복지센터 2층</div>
                                </div>
                            </div>
                            <div class="facility-item" onclick="showFacilityDetail('cafe')">
                                <div class="facility-image">
                                    <img src="/api/placeholder/150/100" alt="카페">
                                </div>
                                <div class="facility-info">
                                    <div class="facility-name">카페 연성</div>
                                    <div class="facility-location">문화1관 1층</div>
                                </div>
                            </div>
                            <div class="facility-item" onclick="showFacilityDetail('convenience')">
                                <div class="facility-image">
                                    <img src="/api/placeholder/150/100" alt="편의점">
                                </div>
                                <div class="facility-info">
                                    <div class="facility-name">CU 편의점</div>
                                    <div class="facility-location">학생복지센터 1층</div>
                                </div>
                            </div>
                            <div class="facility-item" onclick="showFacilityDetail('atm')">
                                <div class="facility-image">
                                    <img src="/api/placeholder/150/100" alt="ATM">
                                </div>
                                <div class="facility-info">
                                    <div class="facility-name">ATM</div>
                                    <div class="facility-location">학생복지센터 1층</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="content-pad"></div>
            </div>
            
            <!-- 커뮤니티 탭 -->
            <div id="community-tab" class="tab-content">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="강의평가 검색" onkeypress="handleSearchKeyPress(event)">
                </div>
                
                <div class="content-section">
                    <div class="section-title">
                        <span>강의평가</span>
                    </div>
                    
                    <div class="category-filter">
                        <div class="category-tag active" onclick="filterLectures('all')">전체</div>
                        <div class="category-tag" onclick="filterLectures('general')">교양</div>
                        <div class="category-tag" onclick="filterLectures('required')">전공필수</div>
                        <div class="category-tag" onclick="filterLectures('optional')">전공선택</div>
                    </div>
                    <ul class="lecture-list">
                        <li class="lecture-item" onclick="viewLectureDetail('web-programming')">
                            <div class="lecture-header">
                                <div class="lecture-title">웹 프로그래밍 실습</div>
                                <div class="lecture-rating">4.8</div>
                            </div>
                            <div class="lecture-info">
                                <span class="lecture-professor">김민수 교수님</span>
                                <span>컴퓨터정보학과</span>
                            </div>
                            <div class="rating-stars">★★★★★</div>
                            <div class="lecture-reviews">
                                "과제는 많지만 실력이 확실히 늘어요! 취업에 큰 도움이 됩니다."
                            </div>
                        </li>
                        <li class="lecture-item" onclick="viewLectureDetail('english')">
                            <div class="lecture-header">
                                <div class="lecture-title">영어회화</div>
                                <div class="lecture-rating">4.3</div>
                            </div>
                            <div class="lecture-info">
                                <span class="lecture-professor">John Smith 교수님</span>
                                <span>교양과정</span>
                            </div>
                            <div class="rating-stars">★★★★☆</div>
                            <div class="lecture-reviews">
                                "원어민 교수님과 실제 대화를 많이 할 수 있어서 좋아요."
                            </div>
                        </li>
                        <li class="lecture-item" onclick="viewLectureDetail('statistics')">
                            <div class="lecture-header">
                                <div class="lecture-title">경영통계학</div>
                                <div class="lecture-rating">3.7</div>
                            </div>
                            <div class="lecture-info">
                                <span class="lecture-professor">박성호 교수님</span>
                                <span>경영학과</span>
                            </div>
                            <div class="rating-stars">★★★☆☆</div>
                            <div class="lecture-reviews">
                                "내용이 어렵지만 설명을 잘 해주세요. 시험은 까다로운 편."
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-pad"></div>
            </div>
            
            <!-- 내 정보 탭 -->
            <div id="profile-tab" class="tab-content">
                <div class="profile-section">
                    <div class="profile-image">👨‍🎓</div>
                    <div class="profile-info">
                        <div class="profile-name">조희정</div>
                        <div class="profile-detail">경영학과 | 3학년</div>
                        <div class="profile-detail">학번: 2021100215</div>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-title">
                        <span>내 정보 관리</span>
                    </div>
                    
                    <ul class="menu-list">
                        <li class="menu-item" onclick="navigateToProfilePage('timetable')">
                            <div class="menu-title">내 시간표</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('my-courses')">
                            <div class="menu-title">내 수강 강의</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('favorite-classrooms')">
                            <div class="menu-title">즐겨찾는 강의실</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('profile-edit')">
                            <div class="menu-title">개인정보 수정</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <!-- 회원 탈퇴 메뉴 추가 -->
                        <li class="menu-item" onclick="deleteAccount()">
                            <div class="menu-title delete-account">회원 탈퇴</div>
                            <div class="menu-arrow">›</div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-section">
                    <div class="section-title">
                        <span>학적 정보</span>
                    </div>
                    
                    <ul class="menu-list">
                        <li class="menu-item" onclick="navigateToProfilePage('grades')">
                            <div class="menu-title">성적 조회</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('course-registration')">
                            <div class="menu-title">수강 신청 내역</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('scholarships')">
                            <div class="menu-title">장학금 내역</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('tuition')">
                            <div class="menu-title">등록금 납부 내역</div>
                            <div class="menu-arrow">›</div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-section">
                    <div class="section-title">
                        <span>앱 설정</span>
                    </div>
                    
                    <ul class="menu-list">
                        <li class="menu-item" onclick="navigateToProfilePage('notification-settings')">
                            <div class="menu-title">알림 설정</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('widget-settings')">
                            <div class="menu-title">위젯 및 메뉴 설정</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="resetAllSettings()">
                            <div class="menu-title">모든 설정 초기화</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="navigateToProfilePage('app-info')">
                            <div class="menu-title">앱 정보</div>
                            <div class="menu-arrow">›</div>
                        </li>
                        <li class="menu-item" onclick="logout()">
                            <div class="menu-title">로그아웃</div>
                            <div class="menu-arrow">›</div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-pad"></div>
            </div>
            
            <!-- 알림 탭 -->
            <div id="alert-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-title">
                        <span>알림</span>
                    </div>
                    
                    <ul class="alert-list">
                        <li class="alert-item" onclick="viewNotification('emergency')">
                            <div class="alert-icon">📢</div>
                            <div class="alert-info">
                                <div class="alert-title">긴급 공지 <span class="alert-badge">중요</span></div>
                                <div class="alert-message">내일(4/9) 대학 전체 휴강 안내 - 시설 점검으로 인한 단수</div>
                                <div class="alert-time">10분 전</div>
                            </div>
                        </li>
                        <li class="alert-item" onclick="viewNotification('classroom')">
                            <div class="alert-icon">🏫</div>
                            <div class="alert-info">
                                <div class="alert-title">강의실 알림</div>
                                <div class="alert-message">웹 프로그래밍 실습 강의실이 3-101호에서 3-201호로 변경되었습니다.</div>
                                <div class="alert-time">30분 전</div>
                            </div>
                        </li>
                        <li class="alert-item" onclick="viewNotification('assignment')">
                            <div class="alert-icon">📝</div>
                            <div class="alert-info">
                                <div class="alert-title">과제 알림</div>
                                <div class="alert-message">마케팅 원론 과제 제출 기한이 내일 오후 6시까지입니다.</div>
                                <div class="alert-time">1시간 전</div>
                            </div>
                        </li>
                        <li class="alert-item" onclick="viewNotification('library')">
                            <div class="alert-icon">📚</div>
                            <div class="alert-info">
                                <div class="alert-title">도서관 알림</div>
                                <div class="alert-message">대출하신 책 "디자인 씽킹의 이해"의 반납 기한이 이틀 남았습니다.</div>
                                <div class="alert-time">3시간 전</div>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div class="content-pad"></div>
            </div>
            
            <!-- 하단 탭 메뉴 -->
            <div class="tab-menu">
                <div class="tab-item active" onclick="switchTab('home')">
                    <span class="tab-icon">🏠</span>
                    <span>홈</span>
                </div>
                <div class="tab-item" onclick="switchTab('facility')">
                    <span class="tab-icon">🏫</span>
                    <span>시설</span>
                </div>
                <div class="tab-item" onclick="switchTab('community')">
                    <span class="tab-icon">💬</span>
                    <span>커뮤니티</span>
                </div>
                <div class="tab-item" onclick="switchTab('profile')">
                    <span class="tab-icon">👤</span>
                    <span>내 정보</span>
                </div>
                <div class="tab-item" onclick="switchTab('alert')">
                    <span class="tab-icon">🔔</span>
                    <span>알림</span>
                </div>
            </div>
        </div>
        
        <script>
            // 건물 데이터 (배열로 정의) - 이미지에서 확인된 건물 이름으로 수정
            const buildingData = [
                {
                    id: '공학1관',
                    name: '공학1관',
                    description: '공학계열 강의실, 실험실',
                    image: '/api/placeholder/80/60', // 플레이스홀더 이미지 사용
                    type: 'building',
                    position: { lat: 37.39632767479923, lng: 126.90699348692698 }
                },
                {
                    id: '자연과학관',
                    name: '자연과학관',
                    description: '반려동물보건학, 반려동물산업학',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.39669466288283, lng: 126.90676716508685 }
                },
                {
                    id: '식품과학관',
                    name: '식품과학관',
                    description: '식품영양학과, 조리실습실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.39714809720343, lng: 126.90762208499473 }
                },
                {
                    id: '도의관',
                    name: '도의관',
                    description: '교양 수업, 강당',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.39679932128769, lng: 126.90809683728425 }
                },
                {
                    id: '공학2관',
                    name: '공학2관',
                    description: '공학계열 실습실, 연구실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.396789747114205, lng: 126.90737406929797 }
                },
                {
                    id: '문화1관',
                    name: '문화1관',
                    description: '인문사회계열 강의실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.39576992475254, lng: 126.90812350405056 }
                },
                {
                    id: '연곡문화센터',
                    name: '연곡문화센터',
                    description: '기숙사, 컨벤션홀, 평생교육원',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.398046192024914, lng: 126.90966512810492 }
                },
                {
                    id: '창조관',
                    name: '창조관',
                    description: '학과 사무실, 강의실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.39730791148064, lng: 126.91039726900274 }
                },
                {
                    id: '운동장',
                    name: '운동장',
                    description: '체육활동, 행사장',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.39673944839101, lng: 126.90932224700094 }
                },
                {
                    id: '농구장',
                    name: '농구장',
                    description: '체육활동',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat: 37.39667684947615, lng: 126.90994063692402 }
                },
                {
                    id: '학생복지센터',
                    name: '학생복지센터',
                    description: '학생지원 시설',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.3962916630711, lng: 126.90994109780426 }
                },
                {
                    id: '창의교육센터',
                    name: '창의교육센터',
                    description: '항공서비스과 항공실습실, 카페',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.39737971014044, lng: 126.91002449732869 }
                },
                {
                    id: '문화2관',
                    name: '문화2관',
                    description: '문화콘텐츠계열 강의실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.396035307891026, lng: 126.90758674745014 }
                },
                {
                    id: '대학본관',
                    name: '대학본관',
                    description: '유통물류학과, 총장실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.397467068076345, lng: 126.90938066144557 }
                },
                {
                    id: '학술정보관',
                    name: '학술정보관',
                    description: '독서실',
                    image: '/api/placeholder/80/60',
                    type: 'building',
                    position: { lat:  37.39637467129301, lng: 126.906603807587 }
                }
            ];

            // 편의시설 데이터 정의
            const facilityData = [
                {
                    id: 'cafeteria',
                    name: '학생식당',
                    description: '학생복지센터 2층',
                    image: '/api/placeholder/150/100',
                    type: 'facility',
                    position: { lat: 37.377100, lng: 126.663600 },
                    relatedBuilding: '학생복지센터'
                },
                {
                    id: 'cafe',
                    name: '카페 연성',
                    description: '문화1관 1층',
                    image: '/api/placeholder/150/100',
                    type: 'facility',
                    position: { lat: 37.378300, lng: 126.662700 },
                    relatedBuilding: '문화1관'
                },
                {
                    id: 'convenience',
                    name: 'CU 편의점',
                    description: '학생복지센터 1층',
                    image: '/api/placeholder/150/100',
                    type: 'facility',
                    position: { lat: 37.377100, lng: 126.663700 },
                    relatedBuilding: '학생복지센터'
                },
                {
                    id: 'atm',
                    name: 'ATM',
                    description: '학생복지센터 1층',
                    image: '/api/placeholder/150/100',
                    type: 'facility',
                    position: { lat: 37.377100, lng: 126.663800 },
                    relatedBuilding: '학생복지센터'
                }
            ];
            
            // 네이버 지도 관련 변수
            let naverMap;
            let mapMarkers = [];
            let infoWindows = [];
            let userMarker = null;
            let userLocationCircle = null;
            let userLocationWatchId = null;
            let userLocation = null;
            let isTrackingUser = false;
            let routePolyline = null; // 경로 폴리라인
            
            // 페이지네이션 변수
            let currentPage = 1;
            const buildingsPerPage = 5;
            
            // 시설 탭 초기화 함수 (페이지네이션 포함)
            function initFacilityTab() {
                loadBuildingsByPage(currentPage);
                updatePaginationControls();
            }
            
            // 여기에 JavaScript 함수들이 계속됩니다...
            
            // 페이지 로드 시 실행 함수
            document.addEventListener('DOMContentLoaded', function() {
                // 시설 탭 초기화
                initFacilityTab();
                
                // 네이버 지도 초기화
                setTimeout(initNaverMap, 500);
                
                // 검색 기능 초기화
                initSearchFunctionality();
            });
        </script>
    </body>
</html>