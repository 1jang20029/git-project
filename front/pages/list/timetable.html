<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>내 시간표 – 연성대학교 스마트 캠퍼스</title>
  <link rel="stylesheet" href="/git-project/front/css/timetable.css" />

  <!-- API 기본 URL -->
  <script>
    const API_BASE_URL = 'http://localhost:3000/api'; // 실제 서버 주소로 바꿔 주세요
  </script>
</head>
<body>
  <!-- 로딩 스피너 -->
  <div id="loading-spinner" class="loading-spinner">
    <div class="spinner"></div>
    <p>데이터를 불러오는 중...</p>
  </div>

  <div class="container">
    <header>
      <div class="back-button" onclick="goToBack()">
        <!-- SVG... -->
        <span>뒤로</span>
      </div>
      <div class="page-title">시간표 1</div>
      <div class="page-actions">
        <button class="action-button" onclick="openSettings()">
          <!-- SVG... -->
        </button>
      </div>
    </header>

    <div class="main-content">
      <!-- 사이드바 -->
      <div class="sidebar">
        <!-- 학기 선택 -->
        <div class="control-card">
          <div class="card-title">📅 학기 선택</div>
          <div class="form-group">
            <select id="semester-select" class="form-select" onchange="changeSemester()">
              <!-- options... -->
            </select>
          </div>
        </div>

        <!-- 시간표 관리 -->
        <div class="control-card">
          <div class="card-title">📋 시간표 관리</div>
          <div class="form-group">
            <label class="form-label">현재 시간표</label>
            <div class="custom-dropdown">
              <button class="dropdown-button" onclick="toggleTimetableDropdown()">
                <span id="selected-timetable">시간표 1</span>
                <!-- SVG... -->
              </button>
              <div class="dropdown-menu" id="timetable-menu"></div>
            </div>
          </div>
        </div>

        <!-- 빠른 작업 -->
        <div class="control-card">
          <div class="card-title">⚡ 빠른 작업</div>
          <div class="action-buttons">
            <button class="btn btn-primary" onclick="openAddCourseModal()">과목 추가</button>
            <button class="btn btn-outline" onclick="renameTimetable()">이름 변경</button>
            <button class="btn btn-outline" onclick="addNewTimetable()">새 시간표</button>
            <button class="btn btn-outline" onclick="exportToImage()">이미지 저장</button>
          </div>
        </div>

        <!-- 성적 요약 -->
        <div class="control-card grade-summary">
          <div class="card-title">📊 성적 요약</div>
          <div class="grade-summary-content">
            <div class="grade-item">
              <span class="grade-label">총 학점</span>
              <span class="grade-value" id="total-credits">0</span>
            </div>
            <div class="grade-item">
              <span class="grade-label">전공 평점</span>
              <span class="grade-value major" id="major-gpa">0.0</span>
            </div>
            <div class="grade-item">
              <span class="grade-label">전체 평점</span>
              <span class="grade-value total" id="total-gpa">0.0</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 메인 시간표 영역 -->
      <div class="timetable-section">
        <div class="timetable-container">
          <div class="card-title">🗓️ 주간 시간표</div>
          <table class="timetable">
            <thead>
              <tr>
                <th class="time-col">시간</th>
                <th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
              </tr>
            </thead>
            <tbody id="timetable-body"></tbody>
          </table>
        </div>

        <!-- 과목 목록 -->
        <div class="course-info-section">
          <div class="course-list-container">
            <div class="card-title">📚 수강 과목 목록</div>
            <ul class="course-list" id="course-list"></ul>
          </div>
        </div>
      </div>
    </div>

    <!-- 과목 추가/수정 모달 -->
    <div class="modal" id="course-modal">
      <div class="modal-content">
        <div class="modal-title" id="modal-title">과목 추가</div>
        <form id="course-form" onsubmit="saveCourse(event)">
          <input type="hidden" id="course-id">
          <!-- 이름, 교수, 강의실, 학점, 이수구분, 색상 선택, 시간 슬롯 등 폼 필드 -->
          <div id="time-slots" class="time-slots"></div>
          <button type="button" class="btn btn-outline" onclick="addTimeSlot()">수업 시간 추가</button>
          <div class="modal-actions">
            <button type="button" class="btn btn-outline" onclick="closeModal()">취소</button>
            <button type="submit" class="btn btn-primary">저장</button>
          </div>
        </form>
      </div>
    </div>

    <!-- 설정 모달 -->
    <div class="modal" id="settings-modal">
      <div class="modal-content">
        <div class="modal-title">시간표 설정</div>
        <!-- 체크박스·드롭다운 (show-room, show-professor, theme-select, time-format-select, weekend-select) -->
        <div class="modal-actions">
          <button class="btn btn-outline" onclick="closeSettings()">취소</button>
          <button class="btn btn-primary" onclick="saveSettings()">저장</button>
        </div>
      </div>
    </div>

    <!-- 토스트 등... -->
  </div>

  <script src="/git-project/front/js/timetable.js"></script>
</body>
</html>
