<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì—°ì„±ëŒ€í•™êµ ìŠ¤ë§ˆíŠ¸ ìº í¼ìŠ¤ - ë””ë²„ê·¸</title>

  <!-- ë„¤ì´ë²„ ì§€ë„ API -->
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=5qggqdvx3j&submodules=direction" defer></script>
  
  <!-- CSS íŒŒì¼ë“¤ -->
  <link rel="stylesheet" href="./css/index.css" />
  
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ - CSS íŒŒì¼ì´ ì—†ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„ */
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a2e;
      color: white;
    }
    
    #top-nav {
      background: #16213e;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    #nav-brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.2rem;
      font-weight: bold;
    }
    
    #main-menu {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
      gap: 1rem;
    }
    
    .nav-item {
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .nav-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .nav-item.active {
      background: #0f3460;
    }
    
    #main-container {
      padding: 2rem;
    }
    
    .debug-info {
      background: #333;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 8px;
      border-left: 4px solid #4CAF50;
    }
    
    .error-info {
      background: #333;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 8px;
      border-left: 4px solid #f44336;
    }
  </style>
</head>
<body>
  <nav id="top-nav">
    <div id="nav-brand">
      <span>ğŸ“</span>
      <span>ì—°ì„±ëŒ€í•™êµ ìŠ¤ë§ˆíŠ¸ ìº í¼ìŠ¤</span>
    </div>
    <ul id="main-menu">
      <li class="nav-item active" id="nav-home" onclick="showContent('home')">
        <span>ğŸ  ëŒ€ì‹œë³´ë“œ</span>
      </li>
      <li class="nav-item" id="nav-buildings" onclick="showContent('buildings')">
        <span>ğŸ¢ ê±´ë¬¼ì •ë³´</span>
      </li>
    </ul>
  </nav>

  <div id="main-container">
    <div id="debug-status">
      <h2>ğŸ”§ ì‹œìŠ¤í…œ ì§„ë‹¨</h2>
      <div id="debug-results"></div>
    </div>
    
    <div id="homeContent">
      <h1>ëŒ€ì‹œë³´ë“œ</h1>
      <p>ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ì…ë‹ˆë‹¤.</p>
    </div>
    
    <div id="buildingsContent" style="display:none;">
      <h1>ê±´ë¬¼ ì •ë³´</h1>
      <p>ê±´ë¬¼ ì •ë³´ í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
    </div>
  </div>

  <!-- ë””ë²„ê¹…ìš© ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    console.log('ğŸš€ ë””ë²„ê·¸ ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘');
    
    // ë””ë²„ê·¸ ì •ë³´ í‘œì‹œ í•¨ìˆ˜
    function showDebugInfo() {
      const debugDiv = document.getElementById('debug-results');
      const results = [];
      
      // 1. ëª¨ë“ˆ ë¡œë“œ ìƒíƒœ í™•ì¸
      const modules = [
        'AppState', 'Utils', 'NetworkManager', 'DataManager', 
        'UIRenderer', 'NavigationManager', 'DropdownManager', 
        'EventManager', 'SessionManager', 'MapManager'
      ];
      
      results.push('<h3>ğŸ“¦ ëª¨ë“ˆ ë¡œë“œ ìƒíƒœ</h3>');
      modules.forEach(module => {
        const loaded = window[module] ? 'âœ…' : 'âŒ';
        const className = window[module] ? 'debug-info' : 'error-info';
        results.push(`<div class="${className}">${loaded} ${module}</div>`);
      });
      
      // 2. ë„¤ì´ë²„ ì§€ë„ API ìƒíƒœ í™•ì¸
      results.push('<h3>ğŸ—ºï¸ ë„¤ì´ë²„ ì§€ë„ API</h3>');
      const mapStatus = typeof naver !== 'undefined' && naver.maps ? 'âœ… ë¡œë“œë¨' : 'âŒ ë¡œë“œ ì‹¤íŒ¨';
      const mapClassName = typeof naver !== 'undefined' ? 'debug-info' : 'error-info';
      results.push(`<div class="${mapClassName}">${mapStatus}</div>`);
      
      // 3. DOM ìš”ì†Œ í™•ì¸
      results.push('<h3>ğŸ¯ DOM ìš”ì†Œ</h3>');
      const elements = ['nav-home', 'nav-buildings', 'homeContent', 'buildingsContent'];
      elements.forEach(id => {
        const element = document.getElementById(id);
        const status = element ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ';
        const className = element ? 'debug-info' : 'error-info';
        results.push(`<div class="${className}">${status} #${id}</div>`);
      });
      
      debugDiv.innerHTML = results.join('');
    }
    
    // ê¸°ë³¸ showContent í•¨ìˆ˜ (ëª¨ë“ˆì´ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€ë¹„)
    function showContent(type) {
      console.log(`ğŸ¯ showContent í˜¸ì¶œ: ${type}`);
      
      // ëª¨ë“  ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
      const contents = ['homeContent', 'buildingsContent'];
      contents.forEach(id => {
        const element = document.getElementById(id);
        if (element) element.style.display = 'none';
      });
      
      // ì„ íƒëœ ì½˜í…ì¸  í‘œì‹œ
      const targetElement = document.getElementById(type + 'Content');
      if (targetElement) {
        targetElement.style.display = 'block';
        console.log(`âœ… ${type} ì½˜í…ì¸  í‘œì‹œë¨`);
      } else {
        console.error(`âŒ ${type}Content ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
      }
      
      // ë„¤ë¹„ê²Œì´ì…˜ í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      const navItem = document.getElementById('nav-' + type);
      if (navItem) {
        navItem.classList.add('active');
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ í›„ ì§„ë‹¨ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ğŸ“± DOM ë¡œë“œ ì™„ë£Œ');
      setTimeout(showDebugInfo, 1000); // 1ì´ˆ í›„ ì§„ë‹¨ ì‹¤í–‰
    });
  </script>

  <!-- ëª¨ë“ˆ íŒŒì¼ë“¤ ë¡œë“œ ì‹œë„ -->
  <script>
    // íŒŒì¼ ë¡œë“œ ìƒíƒœ í™•ì¸ì„ ìœ„í•œ í•¨ìˆ˜ë“¤
    function loadScript(src, name) {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = src;
        script.onload = () => {
          console.log(`âœ… ${name} ë¡œë“œ ì„±ê³µ`);
          resolve();
        };
        script.onerror = () => {
          console.error(`âŒ ${name} ë¡œë“œ ì‹¤íŒ¨: ${src}`);
          reject(new Error(`Failed to load ${name}`));
        };
        document.head.appendChild(script);
      });
    }
    
    // ìˆœì°¨ì ìœ¼ë¡œ ëª¨ë“ˆ ë¡œë“œ
    async function loadModules() {
      const modules = [
        { src: './js/index/app-state.js', name: 'AppState' },
        { src: './js/index/utils.js', name: 'Utils' },
        { src: './js/index/network-manager.js', name: 'NetworkManager' },
        { src: './js/index/data-manager.js', name: 'DataManager' },
        { src: './js/index/ui-renderer.js', name: 'UIRenderer' },
        { src: './js/index/navigation-manager.js', name: 'NavigationManager' },
        { src: './js/index/dropdown-manager.js', name: 'DropdownManager' },
        { src: './js/index/event-manager.js', name: 'EventManager' },
        { src: './js/index/session-manager.js', name: 'SessionManager' },
        { src: './js/index/map-manager.js', name: 'MapManager' },
        { src: './js/index/main.js', name: 'Main' },
        { src: './js/compatibility.js', name: 'Compatibility' }
      ];
      
      for (const module of modules) {
        try {
          await loadScript(module.src, module.name);
        } catch (error) {
          console.error(`ëª¨ë“ˆ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:`, error);
          // ë¡œë“œ ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰
        }
      }
      
      console.log('ğŸ“¦ ëª¨ë“  ëª¨ë“ˆ ë¡œë“œ ì‹œë„ ì™„ë£Œ');
      setTimeout(showDebugInfo, 500); // ë‹¤ì‹œ ì§„ë‹¨
    }
    
    // DOM ë¡œë“œ í›„ ëª¨ë“ˆ ë¡œë“œ ì‹œì‘
    document.addEventListener('DOMContentLoaded', loadModules);
  </script>
</body>
</html>