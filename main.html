<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ì„±ëŒ€í•™êµ ìŠ¤ë§ˆíŠ¸ ìº í¼ìŠ¤</title>
    <!-- ë„¤ì´ë²„ ì§€ë„ API -->
    <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=5qggqdvx3j&submodules=direction" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0a0e27;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .top-nav {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-bar {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 0.75rem 1rem 0.75rem 3rem;
            width: 300px;
            color: #f1f5f9;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: rgba(30, 41, 59, 0.95);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            color: #94a3b8;
            font-size: 1.1rem;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }

        .notification-btn {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .notification-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
            color: #3b82f6;
        }

        .notification-dot {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .user-profile:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: #f1f5f9;
        }

        .user-role {
            font-size: 0.75rem;
            color: #94a3b8;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .main-container {
            margin-top: 80px;
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 280px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(148, 163, 184, 0.1);
            padding: 2rem 0;
            position: fixed;
            top: 80px;
            left: 0;
            bottom: 0;
            overflow-y: auto;
            z-index: 900;
        }

        .sidebar-section {
            margin-bottom: 2rem;
            padding: 0 1.5rem;
        }

        .sidebar-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }

        .nav-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #94a3b8;
            font-weight: 500;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #3b82f6;
            border-radius: 0 2px 2px 0;
        }

        .nav-icon {
            font-size: 1.25rem;
            width: 20px;
            text-align: center;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .content-area {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .content-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #f1f5f9, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #64748b;
        }

        /* ëŒ€ì‹œë³´ë“œ ê·¸ë¦¬ë“œ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f1f5f9;
        }

        .card-icon {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* í†µê³„ ì¹´ë“œ */
        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .stat-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .stat-change.positive {
            color: #10b981;
        }

        .stat-change.negative {
            color: #ef4444;
        }

        /* ì§€ë„ ì»¨í…Œì´ë„ˆ */
        .map-card {
            grid-column: span 2;
            height: 400px;
            position: relative;
            overflow: hidden;
        }

        .map-container {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            overflow: hidden;
        }

        .map-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 100;
        }

        .map-control {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .map-control:hover {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border-color: #3b82f6;
        }

        /* ì‹œê°„í‘œ ìœ„ì ¯ ê°œì„  */
        .timetable-card {
            max-height: 500px;
            overflow-y: auto;
        }

        .timetable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .timetable-date {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .timetable-count {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .class-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: rgba(15, 23, 42, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
        }

        .class-item:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .class-item.current {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .class-item.upcoming {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .class-item.finished {
            opacity: 0.6;
            border-color: #6b7280;
        }

        .class-time {
            font-weight: 700;
            color: #3b82f6;
            min-width: 100px;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .class-time-main {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .class-time-remaining {
            font-size: 0.75rem;
            color: #94a3b8;
            font-weight: 400;
        }

        .class-info {
            margin-left: 1rem;
            flex: 1;
        }

        .class-name {
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 0.25rem;
        }

        .class-location {
            font-size: 0.85rem;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .class-professor {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .class-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-current {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .status-upcoming {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-finished {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }

        .no-classes {
            text-align: center;
            padding: 2rem;
            color: #94a3b8;
        }

        .no-classes-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .timetable-actions {
            margin-top: 1rem;
            text-align: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: #94a3b8;
        }

        .btn-outline:hover {
            border-color: #3b82f6;
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .map-card {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .top-nav {
                padding: 1rem;
            }

            .search-input {
                width: 200px;
            }

            .content-area {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .class-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .class-time {
                min-width: auto;
                align-items: flex-start;
            }

            .class-info {
                margin-left: 0;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(148, 163, 184, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            .mobile-menu-toggle {
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="top-nav">
        <div class="nav-brand">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">â˜°</button>
            <span>ğŸ“</span>
            <span>ì—°ì„±ëŒ€í•™êµ ìŠ¤ë§ˆíŠ¸ ìº í¼ìŠ¤</span>
        </div>
        
        <div class="nav-controls">
            <div class="search-bar">
                <span class="search-icon">ğŸ”</span>
                <input type="text" class="search-input" placeholder="ê±´ë¬¼, êµìˆ˜ë‹˜, ê°•ì˜ì‹¤ ê²€ìƒ‰..." id="globalSearch">
            </div>
            
            <div class="user-menu">
                <div class="notification-btn" onclick="toggleNotifications()">
                    ğŸ””
                    <div class="notification-dot" id="notificationDot"></div>
                </div>
                
                <div class="user-profile" onclick="toggleUserMenu()">
                    <div class="avatar" id="userAvatar">ğŸ‘¤</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">ê²ŒìŠ¤íŠ¸</div>
                        <div class="user-role" id="userRole">ë°©ë¬¸ì</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <!-- ì‚¬ì´ë“œë°” -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">ë©”ì¸ ë©”ë‰´</div>
                <ul class="nav-list">
                    <li class="nav-item active">
                        <span class="nav-icon">ğŸ </span>
                        <span>ëŒ€ì‹œë³´ë“œ</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">ğŸ¢</span>
                        <span>ê±´ë¬¼ & ì‹œì„¤</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">ğŸ¯</span>
                        <span>í•™ìƒ ì„œë¹„ìŠ¤</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">ğŸ’¬</span>
                        <span>ì»¤ë®¤ë‹ˆí‹°</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">â­</span>
                        <span>ê°•ì˜í‰ê°€</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">ğŸ“¢</span>
                        <span>ê³µì§€ì‚¬í•­</span>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ë¹ ë¥¸ ì ‘ê·¼</div>
                <ul class="nav-list">
                    <li class="nav-item" onclick="openQuickLink('timetable')">
                        <span class="nav-icon">ğŸ“…</span>
                        <span>ë‚´ ì‹œê°„í‘œ</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('shuttle')">
                        <span class="nav-icon">ğŸšŒ</span>
                        <span>ì…”í‹€ë²„ìŠ¤</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('activities')">
                        <span class="nav-icon">ğŸŒŸ</span>
                        <span>êµë‚´í™œë™</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('deals')">
                        <span class="nav-icon">ğŸ½ï¸</span>
                        <span>ë§›ì§‘ì •ë³´</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('academic-calendar')">
                        <span class="nav-icon">ğŸ“…</span>
                        <span>í•™ì‚¬ì¼ì •</span>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="content-area">
            <div class="content-header">
                <div>
                    <h1 class="page-title">ëŒ€ì‹œë³´ë“œ</h1>
                    <div class="breadcrumb">
                        <span>í™ˆ</span>
                        <span>â€º</span>
                        <span>ëŒ€ì‹œë³´ë“œ</span>
                    </div>
                </div>
            </div>

            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalBuildings">15</div>
                    <div class="stat-label">ìº í¼ìŠ¤ ê±´ë¬¼</div>
                    <div class="stat-change positive">
                        <span>â†—</span>
                        <span>+2 ì‹ ê·œ</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">8,500</div>
                    <div class="stat-label">ì¬í•™ìƒ ìˆ˜</div>
                    <div class="stat-change positive">
                        <span>â†—</span>
                        <span>+3.2%</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeServices">25</div>
                    <div class="stat-label">ìš´ì˜ ì„œë¹„ìŠ¤</div>
                    <div class="stat-change positive">
                        <span>â†—</span>
                        <span>+1 ì¶”ê°€</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayEvents">0</div>
                    <div class="stat-label">ì˜¤ëŠ˜ ìˆ˜ì—…</div>
                    <div class="stat-change">
                        <span>ğŸ“…</span>
                        <span id="todayEventsStatus">ë¡œë”©ì¤‘...</span>
                    </div>
                </div>
            </div>

            <!-- ë©”ì¸ ìœ„ì ¯ ê·¸ë¦¬ë“œ -->
            <div class="dashboard-grid">
                <!-- ì§€ë„ ì¹´ë“œ -->
                <div class="card map-card">
                    <div class="card-header">
                        <h3 class="card-title">ìº í¼ìŠ¤ ì§€ë„</h3>
                        <span class="card-icon">ğŸ—ºï¸</span>
                    </div>
                    <div class="map-container">
                        <div id="naverMap" style="width: 100%; height: 100%;"></div>
                        <div class="map-overlay">
                            <button class="map-control" onclick="zoomIn()" title="í™•ëŒ€">ğŸ”+</button>
                            <button class="map-control" onclick="zoomOut()" title="ì¶•ì†Œ">ğŸ”-</button>
                            <button class="map-control" onclick="resetMapView()" title="ì´ˆê¸°í™”">ğŸ </button>
                            <button class="map-control" onclick="trackUserLocation()" title="ë‚´ ìœ„ì¹˜">ğŸ“</button>
                        </div>
                    </div>
                </div>

                <!-- ì‹œê°„í‘œ ìœ„ì ¯ ê°œì„  -->
                <div class="card timetable-card">
                    <div class="card-header">
                        <h3 class="card-title">ì˜¤ëŠ˜ì˜ ì‹œê°„í‘œ</h3>
                        <span class="card-icon">ğŸ“…</span>
                    </div>
                    <div class="timetable-header">
                        <div class="timetable-date" id="currentDate">ì˜¤ëŠ˜ ë‚ ì§œ</div>
                        <div class="timetable-count" id="classCount">0ê°œ ìˆ˜ì—…</div>
                    </div>
                    <div id="timetableContent">
                        <!-- ì‹œê°„í‘œ ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <!-- ì…”í‹€ë²„ìŠ¤ ìœ„ì ¯ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ì…”í‹€ë²„ìŠ¤ í˜„í™©</h3>
                        <span class="card-icon">ğŸšŒ</span>
                    </div>
                    <div class="shuttle-routes">
                        <div class="route-tab active" onclick="selectShuttleRoute(1)">
                            <div class="route-name">ë…¸ì„  1</div>
                            <div class="route-desc">ì¸ì²œ ë‚¨ë™êµ¬</div>
                        </div>
                        <div class="route-tab" onclick="selectShuttleRoute(2)">
                            <div class="route-name">ë…¸ì„  2</div>
                            <div class="route-desc">ì‹œí™”ì§€ì—­</div>
                        </div>
                        <div class="route-tab" onclick="selectShuttleRoute(3)">
                            <div class="route-name">ë…¸ì„  3</div>
                            <div class="route-desc">ì„œìš¸ ëª©ë™</div>
                        </div>
                    </div>
                    <div class="shuttle-status">
                        <div class="shuttle-time" id="shuttleTime">15ë¶„ í›„</div>
                        <div class="shuttle-desc" id="shuttleDesc">í•™êµ â†’ ì•ˆì–‘ì—­ ê²½ìœ  (14:30)</div>
                        <div class="status-badge status-running" id="shuttleStatus">
                            <span>ğŸŸ¢</span>
                            <span>ìš´í–‰ì¤‘</span>
                        </div>
                    </div>
                </div>

                <!-- êµë‚´ í™œë™ ìœ„ì ¯ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">êµë‚´ í™œë™ í˜„í™©</h3>
                        <span class="card-icon">ğŸŒŸ</span>
                    </div>
                    <div class="activity-stats">
                        <div class="activity-stat">
                            <div class="activity-number" id="contestCount">12</div>
                            <div class="activity-label">ì§„í–‰ì¤‘ ê³µëª¨ì „</div>
                        </div>
                        <div class="activity-stat">
                            <div class="activity-number" id="clubCount">8</div>
                            <div class="activity-label">ì‹ ì… ëª¨ì§‘ ë™ì•„ë¦¬</div>
                        </div>
                        <div class="activity-stat">
                            <div class="activity-number" id="externalCount">15</div>
                            <div class="activity-label">ëŒ€ì™¸í™œë™ ê¸°íšŒ</div>
                        </div>
                    </div>
                    <div class="notice-item">
                        <div class="notice-header">
                            <span class="notice-category">ë§ˆê°ì„ë°•</span>
                            <span class="notice-date">22ì¼ ë‚¨ìŒ</span>
                        </div>
                        <div class="notice-title">ì°½ì—… ì•„ì´ë””ì–´ ê²½ì§„ëŒ€íšŒ</div>
                    </div>
                </div>

                <!-- ì¸ê¸° ë§›ì§‘ ìœ„ì ¯ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ì¸ê¸° ë§›ì§‘</h3>
                        <span class="card-icon">ğŸ½ï¸</span>
                    </div>
                    <div class="restaurant-grid" id="restaurantGrid">
                        <div class="restaurant-card">
                            <div class="restaurant-image">ğŸ²</div>
                            <div class="restaurant-info">
                                <div class="restaurant-name">ì§€ì§€ê³  ì•ˆì–‘ ì—°ì„±ëŒ€ì </div>
                                <div class="restaurant-category">í•œì‹</div>
                                <div class="restaurant-discount">í•™ìƒì¦ ì œì‹œ ì‹œ 15% í• ì¸</div>
                                <div class="restaurant-likes">ğŸ‘ 3</div>
                            </div>
                        </div>
                        <div class="restaurant-card">
                            <div class="restaurant-image">ğŸœ</div>
                            <div class="restaurant-info">
                                <div class="restaurant-name">ê°¯ë§ˆì„ ì¹¼êµ­ìˆ˜</div>
                                <div class="restaurant-category">í•œì‹</div>
                                <div class="restaurant-discount">í• ì¸ ì—†ìŒ</div>
                                <div class="restaurant-likes">ğŸ‘ 5</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìµœê·¼ ê³µì§€ì‚¬í•­ ìœ„ì ¯ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ìµœê·¼ ê³µì§€ì‚¬í•­</h3>
                        <span class="card-icon">ğŸ“¢</span>
                    </div>
                    <div class="notice-list">
                        <div class="notice-item">
                            <div class="notice-header">
                                <span class="notice-category">í•™ì‚¬</span>
                                <span class="notice-date">2025.04.08</span>
                            </div>
                            <div class="notice-title">2025í•™ë…„ë„ 1í•™ê¸° ì¤‘ê°„ê³ ì‚¬ ì¼ì • ì•ˆë‚´</div>
                        </div>
                        <div class="notice-item">
                            <div class="notice-header">
                                <span class="notice-category">ì¥í•™</span>
                                <span class="notice-date">2025.04.07</span>
                            </div>
                            <div class="notice-title">êµ­ê°€ì¥í•™ê¸ˆ 2ì°¨ ì‹ ì²­ ë§ˆê° ì•ˆë‚´</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë“¤
        let naverMap;
        let mapMarkers = [];
        let infoWindows = [];
        let currentUser = null;

        // ê±´ë¬¼ ë°ì´í„°
        const buildingData = [
            {
                id: 'ê³µí•™1ê´€',
                name: 'ê³µí•™1ê´€',
                description: 'ê³µí•™ê³„ì—´ ê°•ì˜ì‹¤, ì‹¤í—˜ì‹¤',
                position: { lat: 37.39632767479923, lng: 126.90699348692698 }
            },
            {
                id: 'ìì—°ê³¼í•™ê´€',
                name: 'ìì—°ê³¼í•™ê´€',
                description: 'ë°˜ë ¤ë™ë¬¼ë³´ê±´í•™, ë°˜ë ¤ë™ë¬¼ì‚°ì—…í•™',
                position: { lat: 37.39669466288283, lng: 126.90676716508685 }
            },
            {
                id: 'ì‹í’ˆê³¼í•™ê´€',
                name: 'ì‹í’ˆê³¼í•™ê´€',
                description: 'ì‹í’ˆì˜ì–‘í•™ê³¼, ì¡°ë¦¬ì‹¤ìŠµì‹¤',
                position: { lat: 37.39714809720343, lng: 126.90762208499473 }
            },
            {
                id: 'ë„ì˜ê´€',
                name: 'ë„ì˜ê´€',
                description: 'êµì–‘ ìˆ˜ì—…, ê°•ë‹¹',
                position: { lat: 37.39679932128769, lng: 126.90809683728425 }
            },
            {
                id: 'ê³µí•™2ê´€',
                name: 'ê³µí•™2ê´€',
                description: 'ê³µí•™ê³„ì—´ ì‹¤ìŠµì‹¤, ì—°êµ¬ì‹¤',
                position: { lat: 37.396789747114205, lng: 126.90737406929797 }
            }
        ];

        // ìš”ì¼ ì´ë¦„ ë°°ì—´
        const dayNames = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            // ì§€ë„ ì´ˆê¸°í™”
            initNaverMap();
            
            // ì‚¬ìš©ì ìƒíƒœ í™•ì¸
            checkUserStatus();
            
            // ì‹œê°„í‘œ ì—…ë°ì´íŠ¸
            updateTimetable();
            
            // í˜„ì¬ ë‚ ì§œ í‘œì‹œ
            updateCurrentDate();
            
            // ì •ê¸°ì  ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤)
            setInterval(updateTimetable, 60000);
        });

        // í˜„ì¬ ë‚ ì§œ í‘œì‹œ
        function updateCurrentDate() {
            const now = new Date();
            const today = dayNames[now.getDay()];
            const dateStr = `${now.getMonth() + 1}ì›” ${now.getDate()}ì¼ ${today}`;
            document.getElementById('currentDate').textContent = dateStr;
        }

        // ë„¤ì´ë²„ ì§€ë„ ì´ˆê¸°í™”
        function initNaverMap() {
            if (typeof naver === 'undefined' || !naver.maps) {
                console.error('ë„¤ì´ë²„ ì§€ë„ APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                const mapContainer = document.getElementById('naverMap');
                if (!mapContainer) return;

                const yeonsung = new naver.maps.LatLng(37.39661657434427, 126.90772437800818);
                const mapOptions = {
                    center: yeonsung,
                    zoom: 16,
                    minZoom: 14,
                    maxZoom: 19,
                    zoomControl: false,
                    logoControl: false,
                    mapDataControl: false,
                    scaleControl: false
                };

                naverMap = new naver.maps.Map(mapContainer, mapOptions);

                // ë§ˆì»¤ ìƒì„±
                buildingData.forEach(building => {
                    const marker = new naver.maps.Marker({
                        position: new naver.maps.LatLng(building.position.lat, building.position.lng),
                        map: naverMap,
                        title: building.name
                    });

                    const infoWindow = new naver.maps.InfoWindow({
                        content: `
                            <div style="padding: 10px; background: #1e293b; color: white; border-radius: 8px; border: 1px solid #3b82f6;">
                                <strong style="color: #3b82f6;">${building.name}</strong><br>
                                <span style="color: #94a3b8;">${building.description}</span>
                            </div>
                        `,
                        backgroundColor: 'transparent',
                        borderWidth: 0,
                        anchorSize: new naver.maps.Size(0, 0)
                    });

                    naver.maps.Event.addListener(marker, 'click', () => {
                        infoWindows.forEach(iw => iw.close());
                        infoWindow.open(naverMap, marker);
                    });

                    mapMarkers.push(marker);
                    infoWindows.push(infoWindow);
                });

                console.log('ë„¤ì´ë²„ ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('ì§€ë„ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
            }
        }

        // ì‚¬ìš©ì ìƒíƒœ í™•ì¸
        function checkUserStatus() {
            currentUser = localStorage.getItem('currentLoggedInUser');
            const userNameElement = document.getElementById('userName');
            const userRoleElement = document.getElementById('userRole');
            
            if (currentUser) {
                const userName = localStorage.getItem(`user_${currentUser}_name`) || 'ì‚¬ìš©ì';
                const department = localStorage.getItem(`user_${currentUser}_department`) || '';
                const departmentName = department ? getDepartmentName(department) : 'í•™ìƒ';
                
                userNameElement.textContent = userName;
                userRoleElement.textContent = departmentName;
                
                updateProfileImage(currentUser);
            } else {
                userNameElement.textContent = 'ê²ŒìŠ¤íŠ¸';
                userRoleElement.textContent = 'ë°©ë¬¸ì';
            }
        }

        // í•™ê³¼ëª… ë³€í™˜
        function getDepartmentName(department) {
            const deptMap = {
                'computerScience': 'ì»´í“¨í„°ì •ë³´í•™ê³¼',
                'business': 'ê²½ì˜í•™ê³¼',
                'nursing': 'ê°„í˜¸í•™ê³¼',
                'engineering': 'ê³µí•™ê³„ì—´',
                'arts': 'ì˜ˆìˆ ê³„ì—´'
            };
            return deptMap[department] || department;
        }

        // í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
        function updateProfileImage(userId) {
            const profileImageType = localStorage.getItem(`user_${userId}_profileImageType`) || 'emoji';
            const profileImage = localStorage.getItem(`user_${userId}_profileImage`) || 'ğŸ‘¤';
            const avatarElement = document.getElementById('userAvatar');
            
            if (profileImageType === 'emoji') {
                avatarElement.textContent = profileImage;
            } else {
                avatarElement.innerHTML = `<img src="${profileImage}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" alt="í”„ë¡œí•„">`;
            }
        }

        // ì‹œê°„í‘œ ì—…ë°ì´íŠ¸ - ì‹¤ì œ ì‹œê°„í‘œ ë°ì´í„° ì—°ë™
        function updateTimetable() {
            if (!currentUser) {
                showNoLoginMessage();
                return;
            }

            // í˜„ì¬ ì‹œê°„ ì •ë³´
            const now = new Date();
            const currentDay = now.getDay(); // 0: ì¼ìš”ì¼, 1: ì›”ìš”ì¼, ..., 6: í† ìš”ì¼
            const currentTime = now.getHours() * 60 + now.getMinutes();

            // í˜„ì¬ í•™ê¸° ì„¤ì •
            const semester = getCurrentSemester(now);

            // í˜„ì¬ ì‹œê°„í‘œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const currentTimetableId = getCurrentTimetableId();

            // ì‹œê°„í‘œ ë°ì´í„° ë¡œë“œ
            const courses = loadTimetableCourses(semester, currentTimetableId);

            if (courses.length === 0) {
                showNoCourses();
                return;
            }

            // ì˜¤ëŠ˜ì˜ ìˆ˜ì—… í•„í„°ë§ ë° ì²˜ë¦¬
            const todayCourses = getTodayCourses(courses, currentDay, currentTime);

            if (todayCourses.length === 0) {
                showNoClassesToday();
                return;
            }

            // ì‹œê°„í‘œ UI ì—…ë°ì´íŠ¸
            displayTodayCourses(todayCourses);
            
            // ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
            updateTodayStats(todayCourses);
        }

        // í˜„ì¬ í•™ê¸° ê°€ì ¸ì˜¤ê¸°
        function getCurrentSemester(now) {
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth() + 1;
            
            if (currentMonth >= 3 && currentMonth <= 6) {
                return { year: currentYear, term: 1 };
            } else if (currentMonth >= 9 && currentMonth <= 12) {
                return { year: currentYear, term: 2 };
            } else if (currentMonth >= 1 && currentMonth <= 2) {
                return { year: currentYear - 1, term: 2 };
            } else {
                return { year: currentYear, term: 1 };
            }
        }

        // í˜„ì¬ ì‹œê°„í‘œ ID ê°€ì ¸ì˜¤ê¸°
        function getCurrentTimetableId() {
            const savedCurrentTimetable = localStorage.getItem(`currentTimetable_user_${currentUser}`);
            if (savedCurrentTimetable) {
                const timetableInfo = JSON.parse(savedCurrentTimetable);
                return timetableInfo.id;
            }
            return 1; // ê¸°ë³¸ ì‹œê°„í‘œ ID
        }

        // ì‹œê°„í‘œ ê³¼ëª© ë°ì´í„° ë¡œë“œ
        function loadTimetableCourses(semester, timetableId) {
            const semesterKey = `courses_${semester.year}_${semester.term}_${timetableId}_user_${currentUser}`;
            const savedCourses = localStorage.getItem(semesterKey);
            return savedCourses ? JSON.parse(savedCourses) : [];
        }

        // ì˜¤ëŠ˜ì˜ ìˆ˜ì—… ê°€ì ¸ì˜¤ê¸°
        function getTodayCourses(courses, currentDay, currentTime) {
            const todayCourses = [];
            
            courses.forEach(course => {
                course.times.forEach(time => {
                    // ìš”ì¼ ë§¤ì¹­ (ì‹œê°„í‘œì˜ 1=ì›”ìš”ì¼ì„ ì‹¤ì œ ìš”ì¼ê³¼ ë§¤ì¹­)
                    if (time.day === currentDay || (currentDay === 0 && time.day === 6)) {
                        // ì‹œì‘ ì‹œê°„ ê³„ì‚° (9ì‹œë¶€í„° ì‹œì‘, 30ë¶„ ì‹œì‘)
                        const startHour = 8 + time.start;
                        const startMinute = 30;
                        const startTime = startHour * 60 + startMinute;
                        
                        // ì¢…ë£Œ ì‹œê°„ ê³„ì‚° (ê° êµì‹œëŠ” 50ë¶„, 20ë¶„ ì¢…ë£Œ)
                        const endHour = 8 + time.end + 1;
                        const endMinute = 20;
                        const endTime = endHour * 60 + endMinute;

                        // ìƒíƒœ íŒë‹¨
                        let status = 'upcoming';
                        let timeInfo = '';
                        
                        if (currentTime >= startTime && currentTime < endTime) {
                            status = 'current';
                            const remainingMinutes = endTime - currentTime;
                            timeInfo = formatTimeRemaining(remainingMinutes, 'ì¢…ë£Œê¹Œì§€');
                        } else if (currentTime >= endTime) {
                            status = 'finished';
                            timeInfo = 'ìˆ˜ì—… ì¢…ë£Œ';
                        } else {
                            status = 'upcoming';
                            const minutesToStart = startTime - currentTime;
                            if (minutesToStart > 0) {
                                timeInfo = formatTimeRemaining(minutesToStart, 'ì‹œì‘ê¹Œì§€');
                            } else {
                                timeInfo = 'ê³§ ì‹œì‘';
                            }
                        }

                        todayCourses.push({
                            ...course,
                            time: time,
                            status: status,
                            timeInfo: timeInfo,
                            startTime: startTime,
                            endTime: endTime,
                            displayTime: `${String(startHour).padStart(2, '0')}:${String(startMinute).padStart(2, '0')}`
                        });
                    }
                });
            });

            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            return todayCourses.sort((a, b) => a.startTime - b.startTime);
        }

        // ì‹œê°„ í¬ë§·íŒ…
        function formatTimeRemaining(minutes, suffix) {
            if (minutes < 60) {
                return `${minutes}ë¶„ ${suffix}`;
            } else {
                const hours = Math.floor(minutes / 60);
                const remainingMinutes = minutes % 60;
                if (remainingMinutes === 0) {
                    return `${hours}ì‹œê°„ ${suffix}`;
                } else {
                    return `${hours}ì‹œê°„ ${remainingMinutes}ë¶„ ${suffix}`;
                }
            }
        }

        // ì˜¤ëŠ˜ì˜ ìˆ˜ì—… í‘œì‹œ
        function displayTodayCourses(todayCourses) {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            // ìˆ˜ì—… ê°œìˆ˜ ì—…ë°ì´íŠ¸
            classCount.textContent = `${todayCourses.length}ê°œ ìˆ˜ì—…`;
            
            // HTML ìƒì„±
            timetableContent.innerHTML = '';

            todayCourses.forEach(classInfo => {
                const statusText = {
                    'current': 'ì§„í–‰ì¤‘',
                    'upcoming': 'ì˜ˆì •',
                    'finished': 'ì¢…ë£Œ'
                };

                const classItem = document.createElement('div');
                classItem.className = `class-item ${classInfo.status}`;
                classItem.innerHTML = `
                    <div class="class-time">
                        <div class="class-time-main">${classInfo.displayTime}</div>
                        <div class="class-time-remaining">${classInfo.timeInfo}</div>
                    </div>
                    <div class="class-info">
                        <div class="class-name">${classInfo.name}</div>
                        <div class="class-location">
                            ğŸ“ ${classInfo.room || 'ê°•ì˜ì‹¤ ë¯¸ì •'}
                        </div>
                        <div class="class-professor">ğŸ‘¨â€ğŸ« ${classInfo.professor || 'êµìˆ˜ëª… ë¯¸ì •'}</div>
                    </div>
                    <div class="class-status status-${classInfo.status}">${statusText[classInfo.status]}</div>
                `;
                
                timetableContent.appendChild(classItem);
            });

            // ì‹œê°„í‘œ í˜ì´ì§€ë¡œ ê°€ëŠ” ë²„íŠ¼ ì¶”ê°€
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'timetable-actions';
            actionsDiv.innerHTML = `
                <button class="btn btn-outline" onclick="openQuickLink('timetable')">
                    ğŸ“… ì „ì²´ ì‹œê°„í‘œ ë³´ê¸°
                </button>
            `;
            timetableContent.appendChild(actionsDiv);
        }

        // ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
        function updateTodayStats(todayCourses) {
            const todayEventsElement = document.getElementById('todayEvents');
            const todayEventsStatusElement = document.getElementById('todayEventsStatus');
            
            todayEventsElement.textContent = todayCourses.length;
            
            const currentCourses = todayCourses.filter(course => course.status === 'current');
            const upcomingCourses = todayCourses.filter(course => course.status === 'upcoming');
            
            if (currentCourses.length > 0) {
                todayEventsStatusElement.textContent = 'ì§„í–‰ì¤‘';
                todayEventsStatusElement.style.color = '#10b981';
            } else if (upcomingCourses.length > 0) {
                todayEventsStatusElement.textContent = 'ì˜ˆì •';
                todayEventsStatusElement.style.color = '#f59e0b';
            } else {
                todayEventsStatusElement.textContent = 'ì™„ë£Œ';
                todayEventsStatusElement.style.color = '#6b7280';
            }
        }

        // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° ë©”ì‹œì§€
        function showNoLoginMessage() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = 'ë¡œê·¸ì¸ í•„ìš”';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">ğŸ”</div>
                    <p>ë¡œê·¸ì¸í•˜ì—¬ ê°œì¸ ì‹œê°„í‘œë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
                    <div class="timetable-actions">
                        <button class="btn btn-primary" onclick="window.open('login.html', '_blank')">
                            ğŸ”‘ ë¡œê·¸ì¸í•˜ê¸°
                        </button>
                    </div>
                </div>
            `;
            
            // ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = 'ë¡œê·¸ì¸ í•„ìš”';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // ë“±ë¡ëœ ê³¼ëª©ì´ ì—†ëŠ” ê²½ìš°
        function showNoCourses() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = 'ê³¼ëª© ì—†ìŒ';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">ğŸ“š</div>
                    <p>ë“±ë¡ëœ ê³¼ëª©ì´ ì—†ìŠµë‹ˆë‹¤</p>
                    <div class="timetable-actions">
                        <button class="btn btn-primary" onclick="openQuickLink('timetable')">
                            ğŸ“… ì‹œê°„í‘œ ì‘ì„±í•˜ê¸°
                        </button>
                    </div>
                </div>
            `;
            
            // ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = 'ê³¼ëª© ì—†ìŒ';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // ì˜¤ëŠ˜ ìˆ˜ì—…ì´ ì—†ëŠ” ê²½ìš°
        function showNoClassesToday() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = 'ìˆ˜ì—… ì—†ìŒ';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">ğŸ˜Œ</div>
                    <p>ì˜¤ëŠ˜ì€ ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤</p>
                    <div class="timetable-actions">
                        <button class="btn btn-outline" onclick="openQuickLink('timetable')">
                            ğŸ“… ì£¼ê°„ ì‹œê°„í‘œ ë³´ê¸°
                        </button>
                    </div>
                </div>
            `;
            
            // ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = 'ìˆ˜ì—… ì—†ìŒ';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // ë¹ ë¥¸ ë§í¬ í•¨ìˆ˜ë“¤
        function openQuickLink(type) {
            const links = {
                'timetable': 'timetable.html',
                'shuttle': 'shuttle_bus_tracker.html',
                'activities': 'activities.html',
                'deals': 'student-deals.html',
                'academic-calendar': 'academic-calendar.html'
            };
            
            if (links[type]) {
                window.open(links[type], '_blank');
            } else {
                alert(`${type} ì„œë¹„ìŠ¤ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.`);
            }
        }

        // ì§€ë„ ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ë“¤
        function zoomIn() {
            if (naverMap) {
                naverMap.setZoom(naverMap.getZoom() + 1);
            }
        }

        function zoomOut() {
            if (naverMap) {
                naverMap.setZoom(naverMap.getZoom() - 1);
            }
        }

        function resetMapView() {
            if (naverMap) {
                const yeonsung = new naver.maps.LatLng(37.39661657434427, 126.90772437800818);
                naverMap.setCenter(yeonsung);
                naverMap.setZoom(16);
                infoWindows.forEach(iw => iw.close());
            }
        }

        function trackUserLocation() {
            if (!navigator.geolocation) {
                alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì¶”ì  ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const userPos = new naver.maps.LatLng(position.coords.latitude, position.coords.longitude);
                    
                    const userMarker = new naver.maps.Marker({
                        position: userPos,
                        map: naverMap,
                        icon: {
                            content: '<div style="background: #3b82f6; width: 15px; height: 15px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);"></div>',
                            anchor: new naver.maps.Point(10, 10)
                        }
                    });

                    naverMap.setCenter(userPos);
                    naverMap.setZoom(18);
                },
                function(error) {
                    console.error('ìœ„ì¹˜ ì¶”ì  ì˜¤ë¥˜:', error);
                    alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            );
        }

        // ì‚¬ìš©ì ë©”ë‰´ í† ê¸€
        function toggleUserMenu() {
            if (!currentUser) {
                const action = confirm('ë¡œê·¸ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
                if (action) {
                    window.open('login.html', '_blank');
                }
                return;
            }
            
            // ì‚¬ìš©ì ë©”ë‰´ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥
            alert('ì‚¬ìš©ì ë©”ë‰´ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // ì•Œë¦¼ í† ê¸€
        function toggleNotifications() {
            alert('ì•Œë¦¼ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // ì‚¬ì´ë“œë°” í† ê¸€ (ëª¨ë°”ì¼)
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Storage ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ë‹¤ë¥¸ íƒ­ì—ì„œ ë°ì´í„° ë³€ê²½ ê°ì§€)
        window.addEventListener('storage', function(event) {
            if (event.key === 'currentLoggedInUser' || 
                (event.key && event.key.includes('_profileImage')) ||
                (event.key && event.key.includes('courses_'))) {
                checkUserStatus();
                updateTimetable();
            }
        });

        // í˜ì´ì§€ ë³µì› ì‹œ ë°ì´í„° ê°±ì‹ 
        window.addEventListener('pageshow', function(event) {
            if (event.persisted) {
                checkUserStatus();
                updateTimetable();
            }
        });

        // ì¶”ê°€ ìŠ¤íƒ€ì¼
        const additionalStyles = `
            .shuttle-routes {
                display: flex;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }

            .route-tab {
                flex: 1;
                padding: 0.75rem;
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 8px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .route-tab.active {
                background: rgba(59, 130, 246, 0.2);
                border-color: #3b82f6;
            }

            .route-name {
                font-weight: 600;
                color: #f1f5f9;
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }

            .route-desc {
                font-size: 0.75rem;
                color: #94a3b8;
            }

            .shuttle-status {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                margin-bottom: 1rem;
            }

            .shuttle-time {
                font-size: 2rem;
                font-weight: 700;
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 0.5rem;
            }

            .shuttle-desc {
                color: #94a3b8;
                font-size: 0.9rem;
                margin-bottom: 1rem;
            }

            .status-badge {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .status-running {
                background: rgba(16, 185, 129, 0.2);
                color: #10b981;
            }

            .status-stopped {
                background: rgba(239, 68, 68, 0.2);
                color: #ef4444;
            }

            .activity-stats {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .activity-stat {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1rem;
                text-align: center;
            }

            .activity-number {
                font-size: 1.8rem;
                font-weight: 700;
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 0.25rem;
            }

            .activity-label {
                color: #94a3b8;
                font-size: 0.8rem;
            }

            .notice-item {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-bottom: 1rem;
            }

            .notice-item:hover {
                background: rgba(59, 130, 246, 0.1);
                border-color: rgba(59, 130, 246, 0.3);
                transform: translateX(4px);
            }

            .notice-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .notice-category {
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                color: white;
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
            }

            .notice-date {
                color: #94a3b8;
                font-size: 0.85rem;
            }

            .notice-title {
                font-weight: 600;
                color: #f1f5f9;
                margin-bottom: 0.5rem;
                font-size: 1.1rem;
            }

            .notice-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .restaurant-grid {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .restaurant-card {
                display: flex;
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1rem;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .restaurant-card:hover {
                background: rgba(59, 130, 246, 0.1);
                border-color: rgba(59, 130, 246, 0.3);
            }

            .restaurant-image {
                width: 80px;
                height: 80px;
                border-radius: 8px;
                background: rgba(59, 130, 246, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                margin-right: 1rem;
            }

            .restaurant-info {
                flex: 1;
            }

            .restaurant-name {
                font-weight: 600;
                color: #f1f5f9;
                margin-bottom: 0.25rem;
            }

            .restaurant-category {
                color: #3b82f6;
                font-size: 0.85rem;
                margin-bottom: 0.25rem;
            }

            .restaurant-discount {
                color: #ef4444;
                font-size: 0.85rem;
                font-weight: 500;
            }

            .restaurant-likes {
                color: #94a3b8;
                font-size: 0.8rem;
                margin-top: 0.5rem;
            }
        `;

        // ìŠ¤íƒ€ì¼ ì¶”ê°€
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);

        // ì…”í‹€ë²„ìŠ¤ ê´€ë ¨ í•¨ìˆ˜
        function selectShuttleRoute(routeId) {
            // íƒ­ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.route-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // í´ë¦­ëœ íƒ­ í™œì„±í™”
            const clickedTab = event.target.closest('.route-tab');
            if (clickedTab) {
                clickedTab.classList.add('active');
            }
            
            // ì…”í‹€ë²„ìŠ¤ ì •ë³´ ì—…ë°ì´íŠ¸
            updateShuttleBusInfo(routeId);
        }

        function updateShuttleBusInfo(routeId = 1) {
            const routes = {
                1: { name: 'ì¸ì²œ ë‚¨ë™êµ¬', time: '15ë¶„ í›„', desc: 'í•™êµ â†’ ì•ˆì–‘ì—­ ê²½ìœ  (14:30)', status: 'running' },
                2: { name: 'ì‹œí™”ì§€ì—­', time: '25ë¶„ í›„', desc: 'í•™êµ â†’ ì‹œí™”ì—­ ê²½ìœ  (14:40)', status: 'running' },
                3: { name: 'ì„œìš¸ ëª©ë™', time: 'ìš´í–‰ì¢…ë£Œ', desc: 'ë‹¤ìŒ ìš´í–‰: ë‚´ì¼ 08:30', status: 'stopped' }
            };

            const route = routes[routeId];
            
            if (route) {
                document.getElementById('shuttleTime').textContent = route.time;
                document.getElementById('shuttleDesc').textContent = route.desc;
                
                const statusElement = document.getElementById('shuttleStatus');
                statusElement.className = `status-badge status-${route.status}`;
                statusElement.innerHTML = route.status === 'running' ? 
                    '<span>ğŸŸ¢</span><span>ìš´í–‰ì¤‘</span>' : 
                    '<span>ğŸ”´</span><span>ìš´í–‰ì¢…ë£Œ</span>';
            }
        }

        // ì´ˆê¸° ì…”í‹€ë²„ìŠ¤ ì •ë³´ ì„¤ì •
        updateShuttleBusInfo(1);
    </script>
</body>
</html>