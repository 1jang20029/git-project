<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연성대학교 스마트 캠퍼스</title>
    <!-- 네이버 지도 API -->
    <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=5qggqdvx3j&submodules=direction" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0a0e27;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* 상단 네비게이션 */
        .top-nav {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-bar {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 0.75rem 1rem 0.75rem 3rem;
            width: 300px;
            color: #f1f5f9;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: rgba(30, 41, 59, 0.95);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            color: #94a3b8;
            font-size: 1.1rem;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }

        .notification-btn {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .notification-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
            color: #3b82f6;
        }

        .notification-dot {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .user-profile:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: #f1f5f9;
        }

        .user-role {
            font-size: 0.75rem;
            color: #94a3b8;
        }

        /* 메인 컨테이너 */
        .main-container {
            margin-top: 80px;
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* 사이드바 */
        .sidebar {
            width: 280px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(148, 163, 184, 0.1);
            padding: 2rem 0;
            position: fixed;
            top: 80px;
            left: 0;
            bottom: 0;
            overflow-y: auto;
            z-index: 900;
        }

        .sidebar-section {
            margin-bottom: 2rem;
            padding: 0 1.5rem;
        }

        .sidebar-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }

        .nav-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #94a3b8;
            font-weight: 500;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #3b82f6;
            border-radius: 0 2px 2px 0;
        }

        .nav-icon {
            font-size: 1.25rem;
            width: 20px;
            text-align: center;
        }

        /* 메인 콘텐츠 */
        .content-area {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .content-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #f1f5f9, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #64748b;
        }

        /* 대시보드 그리드 */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* 카드 스타일 */
        .card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f1f5f9;
        }

        .card-icon {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* 통계 카드 */
        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .stat-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .stat-change.positive {
            color: #10b981;
        }

        .stat-change.negative {
            color: #ef4444;
        }

        /* 지도 컨테이너 */
        .map-card {
            grid-column: span 2;
            height: 400px;
            position: relative;
            overflow: hidden;
        }

        .map-container {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            overflow: hidden;
        }

        .map-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 100;
        }

        .map-control {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .map-control:hover {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border-color: #3b82f6;
        }

        /* 시간표 위젯 개선 */
        .timetable-card {
            max-height: 500px;
            overflow-y: auto;
        }

        .timetable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .timetable-date {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .timetable-count {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .class-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: rgba(15, 23, 42, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
        }

        .class-item:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .class-item.current {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .class-item.upcoming {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .class-item.finished {
            opacity: 0.6;
            border-color: #6b7280;
        }

        .class-time {
            font-weight: 700;
            color: #3b82f6;
            min-width: 100px;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .class-time-main {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .class-time-remaining {
            font-size: 0.75rem;
            color: #94a3b8;
            font-weight: 400;
        }

        .class-info {
            margin-left: 1rem;
            flex: 1;
        }

        .class-name {
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 0.25rem;
        }

        .class-location {
            font-size: 0.85rem;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .class-professor {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .class-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-current {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .status-upcoming {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-finished {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }

        .no-classes {
            text-align: center;
            padding: 2rem;
            color: #94a3b8;
        }

        .no-classes-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .timetable-actions {
            margin-top: 1rem;
            text-align: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: #94a3b8;
        }

        .btn-outline:hover {
            border-color: #3b82f6;
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        /* 반응형 디자인 */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .map-card {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .top-nav {
                padding: 1rem;
            }

            .search-input {
                width: 200px;
            }

            .content-area {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .class-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .class-time {
                min-width: auto;
                align-items: flex-start;
            }

            .class-info {
                margin-left: 0;
            }
        }

        /* 애니메이션 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* 스크롤바 스타일 */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }

        /* 로딩 스피너 */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(148, 163, 184, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 모바일 메뉴 토글 */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            .mobile-menu-toggle {
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- 상단 네비게이션 -->
    <nav class="top-nav">
        <div class="nav-brand">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">☰</button>
            <span>🎓</span>
            <span>연성대학교 스마트 캠퍼스</span>
        </div>
        
        <div class="nav-controls">
            <div class="search-bar">
                <span class="search-icon">🔍</span>
                <input type="text" class="search-input" placeholder="건물, 교수님, 강의실 검색..." id="globalSearch">
            </div>
            
            <div class="user-menu">
                <div class="notification-btn" onclick="toggleNotifications()">
                    🔔
                    <div class="notification-dot" id="notificationDot"></div>
                </div>
                
                <div class="user-profile" onclick="toggleUserMenu()">
                    <div class="avatar" id="userAvatar">👤</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">게스트</div>
                        <div class="user-role" id="userRole">방문자</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <!-- 사이드바 -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">메인 메뉴</div>
                <ul class="nav-list">
                    <li class="nav-item active">
                        <span class="nav-icon">🏠</span>
                        <span>대시보드</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">🏢</span>
                        <span>건물 & 시설</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">🎯</span>
                        <span>학생 서비스</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">💬</span>
                        <span>커뮤니티</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">⭐</span>
                        <span>강의평가</span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-icon">📢</span>
                        <span>공지사항</span>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">빠른 접근</div>
                <ul class="nav-list">
                    <li class="nav-item" onclick="openQuickLink('timetable')">
                        <span class="nav-icon">📅</span>
                        <span>내 시간표</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('shuttle')">
                        <span class="nav-icon">🚌</span>
                        <span>셔틀버스</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('activities')">
                        <span class="nav-icon">🌟</span>
                        <span>교내활동</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('deals')">
                        <span class="nav-icon">🍽️</span>
                        <span>맛집정보</span>
                    </li>
                    <li class="nav-item" onclick="openQuickLink('academic-calendar')">
                        <span class="nav-icon">📅</span>
                        <span>학사일정</span>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- 메인 콘텐츠 -->
        <main class="content-area">
            <div class="content-header">
                <div>
                    <h1 class="page-title">대시보드</h1>
                    <div class="breadcrumb">
                        <span>홈</span>
                        <span>›</span>
                        <span>대시보드</span>
                    </div>
                </div>
            </div>

            <!-- 통계 카드 -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalBuildings">15</div>
                    <div class="stat-label">캠퍼스 건물</div>
                    <div class="stat-change positive">
                        <span>↗</span>
                        <span>+2 신규</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">8,500</div>
                    <div class="stat-label">재학생 수</div>
                    <div class="stat-change positive">
                        <span>↗</span>
                        <span>+3.2%</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeServices">25</div>
                    <div class="stat-label">운영 서비스</div>
                    <div class="stat-change positive">
                        <span>↗</span>
                        <span>+1 추가</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayEvents">0</div>
                    <div class="stat-label">오늘 수업</div>
                    <div class="stat-change">
                        <span>📅</span>
                        <span id="todayEventsStatus">로딩중...</span>
                    </div>
                </div>
            </div>

            <!-- 메인 위젯 그리드 -->
            <div class="dashboard-grid">
                <!-- 지도 카드 -->
                <div class="card map-card">
                    <div class="card-header">
                        <h3 class="card-title">캠퍼스 지도</h3>
                        <span class="card-icon">🗺️</span>
                    </div>
                    <div class="map-container">
                        <div id="naverMap" style="width: 100%; height: 100%;"></div>
                        <div class="map-overlay">
                            <button class="map-control" onclick="zoomIn()" title="확대">🔍+</button>
                            <button class="map-control" onclick="zoomOut()" title="축소">🔍-</button>
                            <button class="map-control" onclick="resetMapView()" title="초기화">🏠</button>
                            <button class="map-control" onclick="trackUserLocation()" title="내 위치">📍</button>
                        </div>
                    </div>
                </div>

                <!-- 시간표 위젯 개선 -->
                <div class="card timetable-card">
                    <div class="card-header">
                        <h3 class="card-title">오늘의 시간표</h3>
                        <span class="card-icon">📅</span>
                    </div>
                    <div class="timetable-header">
                        <div class="timetable-date" id="currentDate">오늘 날짜</div>
                        <div class="timetable-count" id="classCount">0개 수업</div>
                    </div>
                    <div id="timetableContent">
                        <!-- 시간표 데이터가 동적으로 생성됩니다 -->
                    </div>
                </div>

                <!-- 셔틀버스 위젯 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">셔틀버스 현황</h3>
                        <span class="card-icon">🚌</span>
                    </div>
                    <div class="shuttle-routes">
                        <div class="route-tab active" onclick="selectShuttleRoute(1)">
                            <div class="route-name">노선 1</div>
                            <div class="route-desc">인천 남동구</div>
                        </div>
                        <div class="route-tab" onclick="selectShuttleRoute(2)">
                            <div class="route-name">노선 2</div>
                            <div class="route-desc">시화지역</div>
                        </div>
                        <div class="route-tab" onclick="selectShuttleRoute(3)">
                            <div class="route-name">노선 3</div>
                            <div class="route-desc">서울 목동</div>
                        </div>
                    </div>
                    <div class="shuttle-status">
                        <div class="shuttle-time" id="shuttleTime">15분 후</div>
                        <div class="shuttle-desc" id="shuttleDesc">학교 → 안양역 경유 (14:30)</div>
                        <div class="status-badge status-running" id="shuttleStatus">
                            <span>🟢</span>
                            <span>운행중</span>
                        </div>
                    </div>
                </div>

                <!-- 교내 활동 위젯 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">교내 활동 현황</h3>
                        <span class="card-icon">🌟</span>
                    </div>
                    <div class="activity-stats">
                        <div class="activity-stat">
                            <div class="activity-number" id="contestCount">12</div>
                            <div class="activity-label">진행중 공모전</div>
                        </div>
                        <div class="activity-stat">
                            <div class="activity-number" id="clubCount">8</div>
                            <div class="activity-label">신입 모집 동아리</div>
                        </div>
                        <div class="activity-stat">
                            <div class="activity-number" id="externalCount">15</div>
                            <div class="activity-label">대외활동 기회</div>
                        </div>
                    </div>
                    <div class="notice-item">
                        <div class="notice-header">
                            <span class="notice-category">마감임박</span>
                            <span class="notice-date">22일 남음</span>
                        </div>
                        <div class="notice-title">창업 아이디어 경진대회</div>
                    </div>
                </div>

                <!-- 인기 맛집 위젯 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">인기 맛집</h3>
                        <span class="card-icon">🍽️</span>
                    </div>
                    <div class="restaurant-grid" id="restaurantGrid">
                        <div class="restaurant-card">
                            <div class="restaurant-image">🍲</div>
                            <div class="restaurant-info">
                                <div class="restaurant-name">지지고 안양 연성대점</div>
                                <div class="restaurant-category">한식</div>
                                <div class="restaurant-discount">학생증 제시 시 15% 할인</div>
                                <div class="restaurant-likes">👍 3</div>
                            </div>
                        </div>
                        <div class="restaurant-card">
                            <div class="restaurant-image">🍜</div>
                            <div class="restaurant-info">
                                <div class="restaurant-name">갯마을 칼국수</div>
                                <div class="restaurant-category">한식</div>
                                <div class="restaurant-discount">할인 없음</div>
                                <div class="restaurant-likes">👍 5</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 최근 공지사항 위젯 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">최근 공지사항</h3>
                        <span class="card-icon">📢</span>
                    </div>
                    <div class="notice-list">
                        <div class="notice-item">
                            <div class="notice-header">
                                <span class="notice-category">학사</span>
                                <span class="notice-date">2025.04.08</span>
                            </div>
                            <div class="notice-title">2025학년도 1학기 중간고사 일정 안내</div>
                        </div>
                        <div class="notice-item">
                            <div class="notice-header">
                                <span class="notice-category">장학</span>
                                <span class="notice-date">2025.04.07</span>
                            </div>
                            <div class="notice-title">국가장학금 2차 신청 마감 안내</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 전역 변수들
        let naverMap;
        let mapMarkers = [];
        let infoWindows = [];
        let currentUser = null;

        // 건물 데이터
        const buildingData = [
            {
                id: '공학1관',
                name: '공학1관',
                description: '공학계열 강의실, 실험실',
                position: { lat: 37.39632767479923, lng: 126.90699348692698 }
            },
            {
                id: '자연과학관',
                name: '자연과학관',
                description: '반려동물보건학, 반려동물산업학',
                position: { lat: 37.39669466288283, lng: 126.90676716508685 }
            },
            {
                id: '식품과학관',
                name: '식품과학관',
                description: '식품영양학과, 조리실습실',
                position: { lat: 37.39714809720343, lng: 126.90762208499473 }
            },
            {
                id: '도의관',
                name: '도의관',
                description: '교양 수업, 강당',
                position: { lat: 37.39679932128769, lng: 126.90809683728425 }
            },
            {
                id: '공학2관',
                name: '공학2관',
                description: '공학계열 실습실, 연구실',
                position: { lat: 37.396789747114205, lng: 126.90737406929797 }
            }
        ];

        // 요일 이름 배열
        const dayNames = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            console.log('페이지 로드 완료');
            
            // 지도 초기화
            initNaverMap();
            
            // 사용자 상태 확인
            checkUserStatus();
            
            // 시간표 업데이트
            updateTimetable();
            
            // 현재 날짜 표시
            updateCurrentDate();
            
            // 정기적 업데이트 (1분마다)
            setInterval(updateTimetable, 60000);
        });

        // 현재 날짜 표시
        function updateCurrentDate() {
            const now = new Date();
            const today = dayNames[now.getDay()];
            const dateStr = `${now.getMonth() + 1}월 ${now.getDate()}일 ${today}`;
            document.getElementById('currentDate').textContent = dateStr;
        }

        // 네이버 지도 초기화
        function initNaverMap() {
            if (typeof naver === 'undefined' || !naver.maps) {
                console.error('네이버 지도 API가 로드되지 않았습니다.');
                return;
            }

            try {
                const mapContainer = document.getElementById('naverMap');
                if (!mapContainer) return;

                const yeonsung = new naver.maps.LatLng(37.39661657434427, 126.90772437800818);
                const mapOptions = {
                    center: yeonsung,
                    zoom: 16,
                    minZoom: 14,
                    maxZoom: 19,
                    zoomControl: false,
                    logoControl: false,
                    mapDataControl: false,
                    scaleControl: false
                };

                naverMap = new naver.maps.Map(mapContainer, mapOptions);

                // 마커 생성
                buildingData.forEach(building => {
                    const marker = new naver.maps.Marker({
                        position: new naver.maps.LatLng(building.position.lat, building.position.lng),
                        map: naverMap,
                        title: building.name
                    });

                    const infoWindow = new naver.maps.InfoWindow({
                        content: `
                            <div style="padding: 10px; background: #1e293b; color: white; border-radius: 8px; border: 1px solid #3b82f6;">
                                <strong style="color: #3b82f6;">${building.name}</strong><br>
                                <span style="color: #94a3b8;">${building.description}</span>
                            </div>
                        `,
                        backgroundColor: 'transparent',
                        borderWidth: 0,
                        anchorSize: new naver.maps.Size(0, 0)
                    });

                    naver.maps.Event.addListener(marker, 'click', () => {
                        infoWindows.forEach(iw => iw.close());
                        infoWindow.open(naverMap, marker);
                    });

                    mapMarkers.push(marker);
                    infoWindows.push(infoWindow);
                });

                console.log('네이버 지도 초기화 완료');
            } catch (error) {
                console.error('지도 초기화 오류:', error);
            }
        }

        // 사용자 상태 확인
        function checkUserStatus() {
            currentUser = localStorage.getItem('currentLoggedInUser');
            const userNameElement = document.getElementById('userName');
            const userRoleElement = document.getElementById('userRole');
            
            if (currentUser) {
                const userName = localStorage.getItem(`user_${currentUser}_name`) || '사용자';
                const department = localStorage.getItem(`user_${currentUser}_department`) || '';
                const departmentName = department ? getDepartmentName(department) : '학생';
                
                userNameElement.textContent = userName;
                userRoleElement.textContent = departmentName;
                
                updateProfileImage(currentUser);
            } else {
                userNameElement.textContent = '게스트';
                userRoleElement.textContent = '방문자';
            }
        }

        // 학과명 변환
        function getDepartmentName(department) {
            const deptMap = {
                'computerScience': '컴퓨터정보학과',
                'business': '경영학과',
                'nursing': '간호학과',
                'engineering': '공학계열',
                'arts': '예술계열'
            };
            return deptMap[department] || department;
        }

        // 프로필 이미지 업데이트
        function updateProfileImage(userId) {
            const profileImageType = localStorage.getItem(`user_${userId}_profileImageType`) || 'emoji';
            const profileImage = localStorage.getItem(`user_${userId}_profileImage`) || '👤';
            const avatarElement = document.getElementById('userAvatar');
            
            if (profileImageType === 'emoji') {
                avatarElement.textContent = profileImage;
            } else {
                avatarElement.innerHTML = `<img src="${profileImage}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" alt="프로필">`;
            }
        }

        // 시간표 업데이트 - 실제 시간표 데이터 연동
        function updateTimetable() {
            if (!currentUser) {
                showNoLoginMessage();
                return;
            }

            // 현재 시간 정보
            const now = new Date();
            const currentDay = now.getDay(); // 0: 일요일, 1: 월요일, ..., 6: 토요일
            const currentTime = now.getHours() * 60 + now.getMinutes();

            // 현재 학기 설정
            const semester = getCurrentSemester(now);

            // 현재 시간표 정보 가져오기
            const currentTimetableId = getCurrentTimetableId();

            // 시간표 데이터 로드
            const courses = loadTimetableCourses(semester, currentTimetableId);

            if (courses.length === 0) {
                showNoCourses();
                return;
            }

            // 오늘의 수업 필터링 및 처리
            const todayCourses = getTodayCourses(courses, currentDay, currentTime);

            if (todayCourses.length === 0) {
                showNoClassesToday();
                return;
            }

            // 시간표 UI 업데이트
            displayTodayCourses(todayCourses);
            
            // 상단 통계 업데이트
            updateTodayStats(todayCourses);
        }

        // 현재 학기 가져오기
        function getCurrentSemester(now) {
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth() + 1;
            
            if (currentMonth >= 3 && currentMonth <= 6) {
                return { year: currentYear, term: 1 };
            } else if (currentMonth >= 9 && currentMonth <= 12) {
                return { year: currentYear, term: 2 };
            } else if (currentMonth >= 1 && currentMonth <= 2) {
                return { year: currentYear - 1, term: 2 };
            } else {
                return { year: currentYear, term: 1 };
            }
        }

        // 현재 시간표 ID 가져오기
        function getCurrentTimetableId() {
            const savedCurrentTimetable = localStorage.getItem(`currentTimetable_user_${currentUser}`);
            if (savedCurrentTimetable) {
                const timetableInfo = JSON.parse(savedCurrentTimetable);
                return timetableInfo.id;
            }
            return 1; // 기본 시간표 ID
        }

        // 시간표 과목 데이터 로드
        function loadTimetableCourses(semester, timetableId) {
            const semesterKey = `courses_${semester.year}_${semester.term}_${timetableId}_user_${currentUser}`;
            const savedCourses = localStorage.getItem(semesterKey);
            return savedCourses ? JSON.parse(savedCourses) : [];
        }

        // 오늘의 수업 가져오기
        function getTodayCourses(courses, currentDay, currentTime) {
            const todayCourses = [];
            
            courses.forEach(course => {
                course.times.forEach(time => {
                    // 요일 매칭 (시간표의 1=월요일을 실제 요일과 매칭)
                    if (time.day === currentDay || (currentDay === 0 && time.day === 6)) {
                        // 시작 시간 계산 (9시부터 시작, 30분 시작)
                        const startHour = 8 + time.start;
                        const startMinute = 30;
                        const startTime = startHour * 60 + startMinute;
                        
                        // 종료 시간 계산 (각 교시는 50분, 20분 종료)
                        const endHour = 8 + time.end + 1;
                        const endMinute = 20;
                        const endTime = endHour * 60 + endMinute;

                        // 상태 판단
                        let status = 'upcoming';
                        let timeInfo = '';
                        
                        if (currentTime >= startTime && currentTime < endTime) {
                            status = 'current';
                            const remainingMinutes = endTime - currentTime;
                            timeInfo = formatTimeRemaining(remainingMinutes, '종료까지');
                        } else if (currentTime >= endTime) {
                            status = 'finished';
                            timeInfo = '수업 종료';
                        } else {
                            status = 'upcoming';
                            const minutesToStart = startTime - currentTime;
                            if (minutesToStart > 0) {
                                timeInfo = formatTimeRemaining(minutesToStart, '시작까지');
                            } else {
                                timeInfo = '곧 시작';
                            }
                        }

                        todayCourses.push({
                            ...course,
                            time: time,
                            status: status,
                            timeInfo: timeInfo,
                            startTime: startTime,
                            endTime: endTime,
                            displayTime: `${String(startHour).padStart(2, '0')}:${String(startMinute).padStart(2, '0')}`
                        });
                    }
                });
            });

            // 시간순으로 정렬
            return todayCourses.sort((a, b) => a.startTime - b.startTime);
        }

        // 시간 포맷팅
        function formatTimeRemaining(minutes, suffix) {
            if (minutes < 60) {
                return `${minutes}분 ${suffix}`;
            } else {
                const hours = Math.floor(minutes / 60);
                const remainingMinutes = minutes % 60;
                if (remainingMinutes === 0) {
                    return `${hours}시간 ${suffix}`;
                } else {
                    return `${hours}시간 ${remainingMinutes}분 ${suffix}`;
                }
            }
        }

        // 오늘의 수업 표시
        function displayTodayCourses(todayCourses) {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            // 수업 개수 업데이트
            classCount.textContent = `${todayCourses.length}개 수업`;
            
            // HTML 생성
            timetableContent.innerHTML = '';

            todayCourses.forEach(classInfo => {
                const statusText = {
                    'current': '진행중',
                    'upcoming': '예정',
                    'finished': '종료'
                };

                const classItem = document.createElement('div');
                classItem.className = `class-item ${classInfo.status}`;
                classItem.innerHTML = `
                    <div class="class-time">
                        <div class="class-time-main">${classInfo.displayTime}</div>
                        <div class="class-time-remaining">${classInfo.timeInfo}</div>
                    </div>
                    <div class="class-info">
                        <div class="class-name">${classInfo.name}</div>
                        <div class="class-location">
                            📍 ${classInfo.room || '강의실 미정'}
                        </div>
                        <div class="class-professor">👨‍🏫 ${classInfo.professor || '교수명 미정'}</div>
                    </div>
                    <div class="class-status status-${classInfo.status}">${statusText[classInfo.status]}</div>
                `;
                
                timetableContent.appendChild(classItem);
            });

            // 시간표 페이지로 가는 버튼 추가
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'timetable-actions';
            actionsDiv.innerHTML = `
                <button class="btn btn-outline" onclick="openQuickLink('timetable')">
                    📅 전체 시간표 보기
                </button>
            `;
            timetableContent.appendChild(actionsDiv);
        }

        // 상단 통계 업데이트
        function updateTodayStats(todayCourses) {
            const todayEventsElement = document.getElementById('todayEvents');
            const todayEventsStatusElement = document.getElementById('todayEventsStatus');
            
            todayEventsElement.textContent = todayCourses.length;
            
            const currentCourses = todayCourses.filter(course => course.status === 'current');
            const upcomingCourses = todayCourses.filter(course => course.status === 'upcoming');
            
            if (currentCourses.length > 0) {
                todayEventsStatusElement.textContent = '진행중';
                todayEventsStatusElement.style.color = '#10b981';
            } else if (upcomingCourses.length > 0) {
                todayEventsStatusElement.textContent = '예정';
                todayEventsStatusElement.style.color = '#f59e0b';
            } else {
                todayEventsStatusElement.textContent = '완료';
                todayEventsStatusElement.style.color = '#6b7280';
            }
        }

        // 로그인하지 않은 경우 메시지
        function showNoLoginMessage() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = '로그인 필요';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">🔐</div>
                    <p>로그인하여 개인 시간표를 확인하세요</p>
                    <div class="timetable-actions">
                        <button class="btn btn-primary" onclick="window.open('login.html', '_blank')">
                            🔑 로그인하기
                        </button>
                    </div>
                </div>
            `;
            
            // 상단 통계 업데이트
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = '로그인 필요';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // 등록된 과목이 없는 경우
        function showNoCourses() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = '과목 없음';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">📚</div>
                    <p>등록된 과목이 없습니다</p>
                    <div class="timetable-actions">
                        <button class="btn btn-primary" onclick="openQuickLink('timetable')">
                            📅 시간표 작성하기
                        </button>
                    </div>
                </div>
            `;
            
            // 상단 통계 업데이트
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = '과목 없음';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // 오늘 수업이 없는 경우
        function showNoClassesToday() {
            const timetableContent = document.getElementById('timetableContent');
            const classCount = document.getElementById('classCount');
            
            classCount.textContent = '수업 없음';
            
            timetableContent.innerHTML = `
                <div class="no-classes">
                    <div class="no-classes-icon">😌</div>
                    <p>오늘은 수업이 없습니다</p>
                    <div class="timetable-actions">
                        <button class="btn btn-outline" onclick="openQuickLink('timetable')">
                            📅 주간 시간표 보기
                        </button>
                    </div>
                </div>
            `;
            
            // 상단 통계 업데이트
            document.getElementById('todayEvents').textContent = '0';
            document.getElementById('todayEventsStatus').textContent = '수업 없음';
            document.getElementById('todayEventsStatus').style.color = '#94a3b8';
        }

        // 빠른 링크 함수들
        function openQuickLink(type) {
            const links = {
                'timetable': 'timetable.html',
                'shuttle': 'shuttle_bus_tracker.html',
                'activities': 'activities.html',
                'deals': 'student-deals.html',
                'academic-calendar': 'academic-calendar.html'
            };
            
            if (links[type]) {
                window.open(links[type], '_blank');
            } else {
                alert(`${type} 서비스는 준비 중입니다.`);
            }
        }

        // 지도 컨트롤 함수들
        function zoomIn() {
            if (naverMap) {
                naverMap.setZoom(naverMap.getZoom() + 1);
            }
        }

        function zoomOut() {
            if (naverMap) {
                naverMap.setZoom(naverMap.getZoom() - 1);
            }
        }

        function resetMapView() {
            if (naverMap) {
                const yeonsung = new naver.maps.LatLng(37.39661657434427, 126.90772437800818);
                naverMap.setCenter(yeonsung);
                naverMap.setZoom(16);
                infoWindows.forEach(iw => iw.close());
            }
        }

        function trackUserLocation() {
            if (!navigator.geolocation) {
                alert('이 브라우저에서는 위치 추적 기능을 지원하지 않습니다.');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const userPos = new naver.maps.LatLng(position.coords.latitude, position.coords.longitude);
                    
                    const userMarker = new naver.maps.Marker({
                        position: userPos,
                        map: naverMap,
                        icon: {
                            content: '<div style="background: #3b82f6; width: 15px; height: 15px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);"></div>',
                            anchor: new naver.maps.Point(10, 10)
                        }
                    });

                    naverMap.setCenter(userPos);
                    naverMap.setZoom(18);
                },
                function(error) {
                    console.error('위치 추적 오류:', error);
                    alert('위치 정보를 가져올 수 없습니다.');
                }
            );
        }

        // 사용자 메뉴 토글
        function toggleUserMenu() {
            if (!currentUser) {
                const action = confirm('로그인하시겠습니까?');
                if (action) {
                    window.open('login.html', '_blank');
                }
                return;
            }
            
            // 사용자 메뉴 기능 구현 가능
            alert('사용자 메뉴 기능은 준비 중입니다.');
        }

        // 알림 토글
        function toggleNotifications() {
            alert('알림 기능은 준비 중입니다.');
        }

        // 사이드바 토글 (모바일)
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Storage 이벤트 리스너 (다른 탭에서 데이터 변경 감지)
        window.addEventListener('storage', function(event) {
            if (event.key === 'currentLoggedInUser' || 
                (event.key && event.key.includes('_profileImage')) ||
                (event.key && event.key.includes('courses_'))) {
                checkUserStatus();
                updateTimetable();
            }
        });

        // 페이지 복원 시 데이터 갱신
        window.addEventListener('pageshow', function(event) {
            if (event.persisted) {
                checkUserStatus();
                updateTimetable();
            }
        });

        // 추가 스타일
        const additionalStyles = `
            .shuttle-routes {
                display: flex;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }

            .route-tab {
                flex: 1;
                padding: 0.75rem;
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 8px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .route-tab.active {
                background: rgba(59, 130, 246, 0.2);
                border-color: #3b82f6;
            }

            .route-name {
                font-weight: 600;
                color: #f1f5f9;
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }

            .route-desc {
                font-size: 0.75rem;
                color: #94a3b8;
            }

            .shuttle-status {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                margin-bottom: 1rem;
            }

            .shuttle-time {
                font-size: 2rem;
                font-weight: 700;
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 0.5rem;
            }

            .shuttle-desc {
                color: #94a3b8;
                font-size: 0.9rem;
                margin-bottom: 1rem;
            }

            .status-badge {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .status-running {
                background: rgba(16, 185, 129, 0.2);
                color: #10b981;
            }

            .status-stopped {
                background: rgba(239, 68, 68, 0.2);
                color: #ef4444;
            }

            .activity-stats {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .activity-stat {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1rem;
                text-align: center;
            }

            .activity-number {
                font-size: 1.8rem;
                font-weight: 700;
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 0.25rem;
            }

            .activity-label {
                color: #94a3b8;
                font-size: 0.8rem;
            }

            .notice-item {
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-bottom: 1rem;
            }

            .notice-item:hover {
                background: rgba(59, 130, 246, 0.1);
                border-color: rgba(59, 130, 246, 0.3);
                transform: translateX(4px);
            }

            .notice-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .notice-category {
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                color: white;
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
            }

            .notice-date {
                color: #94a3b8;
                font-size: 0.85rem;
            }

            .notice-title {
                font-weight: 600;
                color: #f1f5f9;
                margin-bottom: 0.5rem;
                font-size: 1.1rem;
            }

            .notice-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .restaurant-grid {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .restaurant-card {
                display: flex;
                background: rgba(15, 23, 42, 0.3);
                border: 1px solid rgba(148, 163, 184, 0.1);
                border-radius: 12px;
                padding: 1rem;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .restaurant-card:hover {
                background: rgba(59, 130, 246, 0.1);
                border-color: rgba(59, 130, 246, 0.3);
            }

            .restaurant-image {
                width: 80px;
                height: 80px;
                border-radius: 8px;
                background: rgba(59, 130, 246, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                margin-right: 1rem;
            }

            .restaurant-info {
                flex: 1;
            }

            .restaurant-name {
                font-weight: 600;
                color: #f1f5f9;
                margin-bottom: 0.25rem;
            }

            .restaurant-category {
                color: #3b82f6;
                font-size: 0.85rem;
                margin-bottom: 0.25rem;
            }

            .restaurant-discount {
                color: #ef4444;
                font-size: 0.85rem;
                font-weight: 500;
            }

            .restaurant-likes {
                color: #94a3b8;
                font-size: 0.8rem;
                margin-top: 0.5rem;
            }
        `;

        // 스타일 추가
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);

        // 셔틀버스 관련 함수
        function selectShuttleRoute(routeId) {
            // 탭 활성화 상태 업데이트
            document.querySelectorAll('.route-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 클릭된 탭 활성화
            const clickedTab = event.target.closest('.route-tab');
            if (clickedTab) {
                clickedTab.classList.add('active');
            }
            
            // 셔틀버스 정보 업데이트
            updateShuttleBusInfo(routeId);
        }

        function updateShuttleBusInfo(routeId = 1) {
            const routes = {
                1: { name: '인천 남동구', time: '15분 후', desc: '학교 → 안양역 경유 (14:30)', status: 'running' },
                2: { name: '시화지역', time: '25분 후', desc: '학교 → 시화역 경유 (14:40)', status: 'running' },
                3: { name: '서울 목동', time: '운행종료', desc: '다음 운행: 내일 08:30', status: 'stopped' }
            };

            const route = routes[routeId];
            
            if (route) {
                document.getElementById('shuttleTime').textContent = route.time;
                document.getElementById('shuttleDesc').textContent = route.desc;
                
                const statusElement = document.getElementById('shuttleStatus');
                statusElement.className = `status-badge status-${route.status}`;
                statusElement.innerHTML = route.status === 'running' ? 
                    '<span>🟢</span><span>운행중</span>' : 
                    '<span>🔴</span><span>운행종료</span>';
            }
        }

        // 초기 셔틀버스 정보 설정
        updateShuttleBusInfo(1);
    </script>
</body>
</html>